window.dapi=function(){function a(){l("connected"),f(),g()}function b(){var a=document.getElementsByTagName("canvas")[0];a&&c(a),c(document.body)}function c(a){a.addEventListener("touchstart",function(a){Y=a},!0),a.addEventListener("touchend",function(a){null==Y&&(Y=a)},!0)}function d(){window.onAFReady=function(a){S=a},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src=X,e.parentNode.insertBefore(d,e))}(document,"script","AppsFlyer-jssdk")}function e(a){_.postMessage(a)}function f(){_.init(function(a){j(a)})}function g(){w(ea.getDapiData,{})}function h(a){var b=$.version;$=a,$.version=b,!Z&&$.adData&&(Z=!0,$.adData.isAFAd&&d())}function i(a){v(a)}function j(a){a=_.parseMessage(a);var b=a.name,c=a.data;k(b).call(null,c)}function k(a){return ba[a]||ba["default"]}function l(a,b){return!!a&&(e({name:a,data:b||{}}),!0)}function m(a){a=a||{},x(ca.failToCloseAd,a)}function n(){$.adData.isAFAd&&b(),x(ca.ready)}function o(a){a=a||{},x(ca.viewableChange,a)}function p(a){a=a||{},x(ca.timeUpdate,a.timeElapsed)}function q(a){a=a||{},x(ca.closeButtonVisibilityChange,a.isCloseButtonVisible)}function r(){x(ca.audioVolumeChange,$.audioVolume)}function s(a){a=a||{},x(ca.adResized,a)}function t(){x(ca.adRewarded,{})}function u(){return+new Date+""+Math.random()}function v(a){if(!aa.isObject(a)||!a.id)return!1;var b=T[a.id];delete T[a.id],aa.isFunction(b)&&b(a.callbackData)}function w(a,arguments,b){if(!aa.isString(a)||!a.length)return!1;var c=null;if(b){if(!aa.isFunction(b))return!1;c=u(),T[c]=b}return l(a,{id:c,arguments:arguments}),!0}function x(a,b){var c=U[a];if(c){aa.isDefined(b)&&(b=[b]);for(var d=0;d<c.length;d++)c[d].apply(null,b)}}function y(a,b){return!(!aa.isFunction(b)||!aa.isString(a))&&void(U[a]?U[a].push(b):U[a]=[b])}function z(a,b){var c;aa.isString(a)&&aa.isDefined(U[a])&&(aa.isDefined(b)?(c=U[a].indexOf(b),c>-1&&(U[a].splice(c,1),0===U[a].length&&delete U[a])):delete U[a])}function A(){w(ea.replay,{})}function B(){w(ea.close,{})}function C(a,b,c){w(ea.open,{url:a,params:b||{}},c||null)}function D(a){w(ea.useCustomClose,{useCustomClose:a})}function E(a,b){a.token=S&&S.hasOwnProperty("getToken")&&null!==Y?S.getToken(Y):W,w(ea.openStoreUrl,a,b||null)}function F(a,b){var c=a||{};$.adData.isAFAd?null==Y?setTimeout(function(){E(c,b)},0):E(c,b):w(ea.openStoreUrl,c,b||null)}function G(){return"ready"==$.state}function H(){return $.version}function I(){return $.isViewable}function J(){return $.deviceData}function K(){return $.adData}function L(){return $.appData}function M(){return $.audioVolume}function N(){return $.screenSize}function O(){return $.adData.timeData}function P(){return $.adData.isCloseButtonVisible}function Q(){w(ea.reward,{})}function R(a,b){var c={eventName:a,data:b||{}};w(ea.triggerEvent,c)}var S,T={},U={},V={communicationPrefix:"connection."},W="EMPTY_TOKEN",X="https://fvalid.appsflyer.com/ironsource/cp.sdk.1.2.5.js",Y=null,Z=!1,$={version:"1.0.15",audioVolume:0,screenSize:{},deviceData:{},state:"loading",isViewable:!1};V.dapiEvents={stateChange:"stateChange",adRewarded:"adRewarded",ready:"ready",viewableChange:"viewableChange",timeUpdate:"timeUpdate",closeButtonVisibilityChange:"closeButtonVisibilityChange",audioVolumeChange:"audioVolumeChange",adResized:"adResized",failToCloseAd:"failToCloseAd"},V.connectionEvents={adRewarded:V.communicationPrefix+"adRewarded",ready:V.communicationPrefix+"ready",adResized:V.communicationPrefix+"adResized",viewableChange:V.communicationPrefix+"viewableChange",timeUpdate:V.communicationPrefix+"timeUpdate",closeButtonVisibilityChange:V.communicationPrefix+"closeButtonVisibilityChange",audioVolumeChange:V.communicationPrefix+"audioVolumeChange",updateDapiData:V.communicationPrefix+"updateDapiData",handleFunctionCallback:V.communicationPrefix+"handleFunctionCallback",failToCloseAd:V.communicationPrefix+"failToCloseAd"},V.connectionFunctions={open:V.communicationPrefix+"open",openStoreUrl:V.communicationPrefix+"openStoreUrl",close:V.communicationPrefix+"close",replay:V.communicationPrefix+"replay",useCustomClose:V.communicationPrefix+"useCustomClose",reward:V.communicationPrefix+"reward",getDapiData:V.communicationPrefix+"getDapiData",triggerEvent:V.communicationPrefix+"triggerEvent"};var _=function(){var a="$$",b="DAPI_SERVICE:",c="DAPI_AD:";return{init:function(a){window.addEventListener("message",a,!1)},formatMessage:function(a){return"$$"+c+JSON.stringify(a)},postMessage:function(a){a=this.formatMessage(a),window.parent.postMessage(a,"*")},parseMessage:function(c){var d=c.data,e=d.indexOf(a+b);if(e!==-1){var f=d.slice(e+a.length);return this.getParams(f)}return{}},getParams:function(a){var c,d=[],e=a.split("/"),f=e.length;if(a.indexOf(b)===-1){if(f>=2&&f%2===0)for(c=0;c<f;c+=2)d[e[c]]=e.length>=c+1?decodeURIComponent(e[c+1]):null}else{var g=a.split(b);"undefined"!=typeof g[1]&&(d=JSON&&JSON.parse(g[1]))}return d}}}(),aa=function(){function a(a,b){return typeof a===b}function b(b){return a(b,"object")}function c(b){return a(b,"string")}function d(b){return a(b,"function")}function e(b){return!a(b,"undefined")}function f(a){return Array.isArray(a)}return{isObject:b,isString:c,isFunction:d,isDefined:e,isArray:f}}(),ba={"default":function(){}},ca=V.dapiEvents,da=V.connectionEvents,ea=V.connectionFunctions;ba[da.updateDapiData]=h,ba[da.ready]=n,ba[da.adRewarded]=t,ba[da.adResized]=s,ba[da.viewableChange]=o,ba[da.timeUpdate]=p,ba[da.closeButtonVisibilityChange]=q,ba[da.audioVolumeChange]=r,ba[da.handleFunctionCallback]=i,ba[da.failToCloseAd]=m,a();var fa={replay:A,close:B,open:C,isReady:G,useCustomClose:D,addEventListener:y,removeEventListener:z,openStoreUrl:F,getVersion:H,getDeviceData:J,getAdData:K,getAppData:L,getScreenSize:N,isViewable:I,reward:Q,triggerEvent:R,getAudioVolume:M,getTimeData:O,isCloseButtonVisible:P};return fa}();
//# sourceMappingURL=dapi.js.map