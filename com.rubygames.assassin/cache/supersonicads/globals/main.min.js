/*!  2020-03-25 10:32:19 AM */
angular.module("templates-adunit",[]).run(["$templateCache",function(a){a.put("ssa-templates",'<script type=text/ng-template id=carouselTemplate.html><div class="adUnitGalleryWrap">\n        <div class="adUnitGalleryScroll" scroll-only="x" ssa-scroll-position>\n            <div class="adUnitGallery">\n                <div class="adUnitGalleryItemWrapper">\n                    <div class="adUnitGalleryItem" ng-repeat="img in carouselImages track by $index">\n                        <img ng-src="{{img}}" imageonload ng-class="{\'hidden\': \'img-hidden\', \'visible\': \'img-visible\'}[carouselLoaded]">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=closeButton.html><div class="closeWrapper" ng-click="closeAdUnit($event)" ng-class="{closeREB: isRightButton, closeLEB: !isRightButton, faded: fadeMode, closeButtonFadeIn: fadeInMode}">\n        <ssa-close-logo close-data="closeData" ng-class="closeData.class" ng-hide="closeData.hideClose"></ssa-close-logo>\n    </div></script><script type=text/ng-template id=closeSimple.html><div id="closeBtn" ng-class="closeData.class" ng-hide="closeData.hideClose"></div></script><script type=text/ng-template id=ssaContactSupportTemplate.html><div class="ssaContactSupportLinkContainer">\n        <div ng-if="contactSupportAvailable" class="userInfoContainer">\n            <div class="userInfoRow tableContentLayout">\n                <div class="userInfoTitle">User ID: </div>\n                <div class="smallFontContent"> {{userDeviceId}}</div>\n            </div>\n            <div class="userInfoRow tableContentLayout">\n                <div class="userInfoTitle">Application Key:  </div>\n                <div class="smallFontContent"> {{userApplicationKey}}</div>\n            </div>\n        </div>\n        <div class="tableContentLayout contactSupportContainer">\n            <ssa-generic-button button-data="contactSupportLinkData"></ssa-generic-button>\n            <div ng-if="!contactSupportAvailable">- available in {{valueInHours}} hours</div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaEaClickHere.html><div class="ea-click-here-button">\n    </div></script><script type=text/ng-template id=ssaGenericButtonTemplate.html><div class="ssaGenericButtonContainer" ng-click="clickAction()">\n      <div class="ssaGenericButton {{style}}">{{title}}</div>\n   </div></script><script type=text/ng-template id=ssaIconTemplate.html><img class="appIcon" ng-src="{{appData.icon}}" ng-hide="imageVisibilityHidden"></script><script type=text/ng-template id=ssaInstallButtonTemplate.html><div class="installActions" ng-class="{\'wiggle\': isWiggle}" ng-click="vm.postActionFunction()">\n        <div class="downloadButton">\n            <div class="text">\n                {{postActionTitle}}\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=installClickableTemplate.html><div class="outterInstall" ssa-mobile-click="postActionFunction(); $event.stopPropagation()">\n        <div class="middleInstall">\n            <div class="installActionsWrapper horizontalLayout">\n                <div class="installActions left">\n                    <div class="appDetails">\n                        <ssa-icon component-custom-config="componentCustomConfig" app-data="appData"></ssa-icon>\n                        <div class="appExtraDetails">\n                            <div class="appTitle">\n                                <div class="text alignTitleToTop" text="appData.title" text-clamp-config="textClampConfig" ssa-line-clamp>{{appData.title}}</div>\n                            </div>\n                            <div class="appRatingContainer">\n                                <div class="appStars" ssa-stars stars-data="appData" stars-image-name="{{appData.starsImageName}}"></div>\n                                <ssa-rate></ssa-rate>\n                                <div class="reviewersIcon">\n                                <div class="sprite-images-ssa-reviewers-icon"></div>\n                            </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <ssa-install-button post-action-function="postActionFunction"\n                                    post-action-title="postActionTitle"\n                                    is-wiggle="isWiggle"\n                                    class="right">\n                </ssa-install-button>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaLoaderAnimationTemplate.html><div class="loaderOW loaderOWFadeOut spinnerAnimationContainer absPosElement">\n        <div class="offers">\n            <div class="offer">\n                <div class="offerWrap">\n                    <div class="offerImg"></div>\n                    <div class="offerDetails">\n                        <div>        <span class="offerText">Loading Info...</span>        </div>\n                        <div class="offerEarn">\n                            <div class="badge"></div>\n                            <div class="callToAction">Loading...</div>\n                        </div>\n                    </div>\n                    <div class="offerButton"></div>\n                </div>\n            </div>\n            <div class="offer">\n                <div class="offerWrap">\n                    <div class="offerImg"></div>\n                    <div class="offerDetails">\n                        <div>        <span class="offerText">Loading Info...</span>        </div>\n                        <div class="offerEarn">\n                            <div class="badge"></div>\n                            <div class="callToAction">Loading...</div>\n                        </div>\n                    </div>\n                    <div class="offerButton"></div>\n                </div>\n            </div>\n            <div class="offer">\n                <div class="offerWrap">\n                    <div class="offerImg"></div>\n                    <div class="offerDetails">\n                        <div>        <span class="offerText">Loading Info...</span>        </div>\n                        <div class="offerEarn">\n                            <div class="badge"></div>\n                            <div class="callToAction">Loading...</div>\n                        </div>\n                    </div>\n                    <div class="offerButton"></div>\n                </div>\n            </div>\n            <div class="offer">\n                <div class="offerWrap">\n                    <div class="offerImg"></div>\n                    <div class="offerDetails">\n                        <div>        <span class="offerText">Loading Info...</span>        </div>\n                        <div class="offerEarn">\n                            <div class="badge"></div>\n                            <div class="callToAction">Loading...</div>\n                        </div>\n                    </div>\n                    <div class="offerButton"></div>\n                </div>\n            </div>\n            <div class="offer">\n                <div class="offerWrap">\n                    <div class="offerImg"></div>\n                    <div class="offerDetails">\n                        <div>        <span class="offerText">Loading Info...</span>        </div>\n                        <div class="offerEarn">\n                            <div class="badge"></div>\n                            <div class="callToAction">Loading...</div>\n                        </div>\n                    </div>\n                    <div class="offerButton"></div>\n                </div>\n            </div>\n\n            <div class="shine"></div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaLogoTemplate.html><div id="ssaLogo" class="sprite-images-ssaLogo {{::deviceType}}"></div></script><script type=text/ng-template id=modalDefaultContent.html><div class="modalDefault {{designName}}">\n        <ssa-close-button close-action="modal.closeModal"></ssa-close-button>\n        <div class="modalBody">{{modal.text}}</div>\n        <div class="modalFooter">\n            <div ng-click="modal.ok()" class="modalButtonDefault modalOK">{{modal.okButtonText}}</div>\n            <div ng-click="modal.cancel()" ng-if="modal.showCancel" class="modalButtonDefault modalCancel">{{modal.closeButtonText}}</div>\n        </div>\n   </div></script><script type=text/ng-template id=modalTemplate.html><div class=\'modalDialog\' ng-class=\'layer\' ng-if=\'modal.show\'>\n        <div class="modalOverlay" ng-if=\'showOverlay\'></div>\n        <div class="modalDialogContainer {{size}} {{customClass}} {{designName}} {{mode}}">\n            <ng-include src=\'contentTemplateUrl\'></ng-include>\n        </div>\n    </div></script><script type=text/ng-template id=muteButton.html><div class="muteWrapper" ng-click="muteClick($event)">\n        <div id="muteBtn" ng-class="muteBtnIcon? muteClassName : unMuteClassName"></div>\n    </div></script><script type=text/ng-template id=notificationTemplate.html><div class="notification" ng-class="{largeText: notificationData.isLargeText}">\n        <div class="notificationOverlay" ng-style="{\'background-color\': notificationBGColor}"></div>\n        <div class="notificationText" ng-style="{color: notificationColor}" reduce-notification-font-size\n             tf-text-config="textConfig">{{notificationData.data}}\n        </div>\n    </div></script><script type=text/ng-template id=ssaPrivacyLinkTemplate.html><div class="privacyLinkContainer" ng-click="handlePrivacyLink($event)">\n        <div class="privacyCircle {{privacyCircleClassName}}" >\n            <div>{{privacyCircleText}}</div>\n        </div>\n       <div class="privacyFlachContainer">\n           <div class="privacyFlach">\n               <div>privacy</div>\n           </div>\n       </div>\n    </div></script><script type=text/ng-template id=ssaRateTemplate.html><div class="appRating">{{generateBigRandomNumber() | number:0}}</div></script><script type=text/ng-template id=ssaRefreshButtonTemplate.html><div id="refreshButton" ng-click="refreshActionFunction()">\n        <div class="refreshIcon" class="sprite-images-ssaRefreshBtn"></div>\n        <div class="text" ng-if="refreshButtonTitle">\n            {{refreshButtonTitle}}\n        </div>\n    </div></script><script type=text/ng-template id=replayButton.html><div class="replayWrapper" ng-click="replay($event)">\n        <div id="replayBtn" class="sprite-images-ssaReplayButton"></div>\n    </div></script><script type=text/ng-template id=skipInTemplate.html><ssa-close-button class="closeButton" close-data="skipInData" close-by-adunit="closeByAdunit" ng-class="xButtonClass" layout-shows-privacy-link="layoutShowsPrivacyLink"></ssa-close-button>\n    <div class="skipInDisplay" ng-class="skipInClass">{{skipInRemainingTime}}</div></script><script type=text/ng-template id=socialButtonsTemplate.html><ul class="ssa-social">\n    \t<li ng-repeat="social in socialData" ng-click="onClick($event, social);" >\n            <a href="javascript:void(0);" ng-style="{\'background-image\':\'url(\'+ social.icon +\')\'}"></a>\n        </li>\n    </ul></script><script type=text/ng-template id=spinnerTemplate.html><div id="spin" class="container" ng-class="{spinnerOverlay: showOverlay}" ng-show="showSpinner">\n        <ssa-close-button close-data="closeData" ng-if="showSpinner && showOverlay"></ssa-close-button>\n        <div class="spinner">\n            <div class="bar1"></div>\n            <div class="bar2"></div>\n            <div class="bar3"></div>\n            <div class="bar4"></div>\n            <div class="bar5"></div>\n            <div class="bar6"></div>\n            <div class="bar7"></div>\n            <div class="bar8"></div>\n            <div class="bar9"></div>\n            <div class="bar10"></div>\n            <div class="bar11"></div>\n            <div class="bar12"></div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaStatusBarTemplate.html><div class="ssaStatusBarContainer">\n        <div class="bar {{barConfig.theme}}">\n            <span class="{{barConfig.progressValue}}"></span>\n        </div>\n    </div></script><script type=text/ng-template id=progressBarTemplate.html><div class="fontLoader">.</div>\n    <canvas class="timer-canvas"></canvas>\n    <div class="progress">\n        <canvas class="progress-bar-canvas"></canvas>\n        <div class="sprite-images-ssaRisGift"></div>\n        <div class="sprite-images-ssaRisGiftBlue"></div>\n    </div></script><script type=text/ng-template id=timerTemplate.html><canvas class="timer-canvas"></canvas></script><script type=text/ng-template id=internal360PlayerTemplate.html><div class="video-wrapper">\n        <div id="overlay" style="position:absolute!important;top:0;left:0;width:100%;height:100%;background-color:black;z-index:980;">\n            <div id="overlayContent" style="visibility: hidden;position:absolute!important;z-index:990;">\n                <img width="140" height="140"  style="padding: 6px 0 0 3px;" src="https://networksdk.ssacdn.com/test/360/assets/360_spinner_org.jpg">\n                <div class="animationLoader"></div>\n            </div>\n        </div>\n        <video id="videojs-panorama-player" class="video-js vjs-default-skin vjs-fluid video-full-screen" webkit-playsinline playsinline crossorigin="anonymous">\n            <source id="mp4" ng-src="{{ videoDataUrlMp4 }}" type="video/mp4">\n            <p>Your device does not support the HTML5 Video element.</p>\n        </video>\n        <img id="watermark360" width="55" height="55"  style="visibility: hidden; position: absolute; top: 0;left: 0;z-index: 999;margin: -11px 0 0 -5px;" src="https://networksdk.ssacdn.com/test/360/assets/360_spinner_org.jpg">\n    </div></script><script type=text/ng-template id=externalUnifiedPlayerTemplate.html><div class="externalUnifiedPlayerContainer" ssa-external-player-progress video-data="videoData" is-replay-video="isReplayVideo" timer-data="timerData">\n        <iframe id="adContainer" class="obfuscationIframe"></iframe>\n    </div></script><script type=text/ng-template id=externalPlayerTemplate.html><div class="video-wrapper">\n        <div class="external-player" ng-bind-html="externalVideoHtml" ssa-external-player-progress video-data="videoData" is-replay-video="isReplayVideo" timer-data="timerData"></div>\n        <!--<div id="pixel" class="pixel"></div>-->\n    </div></script><script type=text/ng-template id=internalPlayerTemplate.html><div id="videoWrapper" class="video-wrapper" ssa-moat video-data="scope.videoData">\n        <video id="video" class="video-full-screen" preload="none"  webkit-playsinline playsinline>\n            <source id="mp4" ng-src="{{ videoDataUrlMp4 }}" type="video/mp4">\n            <p>Your user agent does not support the HTML5 Video element.</p>\n        </video>\n    </div></script><script type=text/ng-template id=ssaBannerInstallDefaultTemplate.html><div class="ssaBannerInstall fullHeight" ng-click="vm.postActionFunction();" ng-class="vm.deviceOs">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-link="vm.privacyLink"></ssa-privacy-link>\n        <ssa-install-clickable tpl="installClickableTemplate" post-action-function="vm.postActionFunction" text-clamp-config="vm.textClampConfig"\n               post-action-title="vm.postActionTitle" component-custom-config="vm.componentCustomConfig" app-data="vm.appData" is-wiggle="vm.isWiggle"\n               class="installClickableBannerLayout"></ssa-install-clickable>\n    </div></script><script type=text/ng-template id=ssaCarouselEndCardTemplate.html><div class="carouselWrapper">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink"></ssa-privacy-link>\n        <ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-close-button>\n        <ssa-replay-button click-action="vm.replayClick" ng-if="vm.showReplay"></ssa-replay-button>\n\n        <div class="topBlock"></div>\n        <div class="middleBottomSection">\n            <div class="middleBlock" stretch-to-fit stf-exceptions="ssa-close-button" stf-stretch-last="true"\n                 click-on-scrollable cos-on-click="vm.postActionFunction">\n                <div class="carouselBlock">\n                    <ssa-carousel carousel-images="vm.carouselImages"  on-load-action="vm.onLoadAction()" on-error-action="vm.onErrorAction()" class="carousel"></ssa-carousel>\n                </div>\n            </div>\n            <div class="bottomBlock">\n                <ssa-install-clickable tpl="installClickableTemplate" post-action-function="vm.postActionFunction" text-config="vm.textConfig"\n                                       post-action-title="vm.postActionTitle" app-data="vm.appData" is-wiggle="vm.isWiggle"\n                                       class="installClickable"></ssa-install-clickable>\n                <ssa-logo device-type="vm.deviceType"></ssa-logo>\n            </div>\n        </div>\n\n    </div></script><script type=text/ng-template id=ssaCustomAdContainerTemplate.html><ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" close-by-adunit="vm.closeClick" ng-hide="vm.usedCustomClose"></ssa-close-button>\n    <iframe class="customAdFrame" width="100%" height="100%" frameborder="0" scrolling="no"></iframe></script><script type=text/ng-template id=ssaEmvTemplate.html><div class="emvDefaultLayout {{::vm.deviceType}} {{::vm.layoutType}}" ng-click="vm.postActionFunction()">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink"></ssa-privacy-link>\n\n        <ssa-skip-in skip-in-data="vm.closeData" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-skip-in>\n\n        <div class="appDataSection">\n            <div class="appDataSectionWrapper">\n                <ssa-icon app-data="vm.appData" class="appDataRowItem"></ssa-icon>\n                <div class="wrapper appDataRowItem">\n                    <div class="appTitle">\n                        <div class="text">{{vm.appData.title}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="appStars rowItem" ssa-stars stars-data="vm.appData" stars-image-name="stars-gray-background"></div>\n                        <ssa-rate class="rowItem"></ssa-rate>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="videoSection">\n            <ssa-video-player video-data="vm.videoData" device-details="vm.deviceDetails" is-pre-cache="vm.isPreCache" is-preload="vm.isPreload"\n                              product-type="vm.productType" close-click="vm.closeClick" post-action="vm.postAction" hybrid="vm.hybrid"\n                              completion-countdown="vm.timerCompletionCountdown" features-model="vm.featuresModel" should-mute="vm.isVideoMute">\n            </ssa-video-player>\n            <ssa-mute-button ng-if="vm.muteBtnShouldDisplay" mute-btn-icon="vm.muteBtnIconOff" video-id="\'video\'"></ssa-mute-button>\n        </div>\n\n        <div class="installSection">\n            <ssa-install-button post-action-function="vm.postActionFunction"\n                                post-action-title="vm.postActionTitle"\n                                is-wiggle="vm.isWiggle">\n            </ssa-install-button>\n        </div>\n    </div></script><script type=text/ng-template id=ssaFullScreenEndCardTemplate.html><div class="ssaFullScreenEndCard" ng-click="vm.postActionFunction();">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink"></ssa-privacy-link>\n        <ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-close-button>\n        <ssa-replay-button ng-show="vm.showReplayButton" click-action="vm.replayClick"></ssa-replay-button>\n    </div></script><script type=text/ng-template id=ssaIncentBrandedActionTemplate.html><div ng-click="vm.click($event);" class="incentBrandedAction" ng-style="vm.postActionStyle">\n        <ssa-close-button close-data="vm.closeData" close-by-adunit="vm.closeClick"></ssa-close-button>\n        <div class="social-bottom">\n            <div class="ea-click-here-container">\n                <ssa-ea-click-here ng-if="vm.shouldShowEAClickHereButton"\n                                   ng-click="vm.click($event)"></ssa-ea-click-here>\n            </div>\n            <ssa-social-buttons ng-if="vm.shouldShowSocialButtons"\n                                ux-template="vm.uxTemplate"\n                                social-data="vm.socialData"\n                                on-click="vm.socialClick;"\n                                ng-click="vm.preventClick($event)">\n\n            </ssa-social-buttons>\n        </div>\n    </div></script><script type=text/ng-template id=ssaIncentVideoTemplate.html><div class="fullSize">\n\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink"></ssa-privacy-link>\n\n        <ssa-skip-in skip-in-data="vm.closeData" close-by-adunit="vm.closeClick"></ssa-skip-in>\n\n        <ssa-script-loader script-data="vm.scriptData"></ssa-script-loader>\n\n        <ssa-video-player video-data="vm.videoData" device-details="vm.deviceDetails"\n                          is-pre-cache="vm.isPreCache" is-preload="vm.isPreload"\n                          product-type="vm.productType" is-replay-video="vm.isReplayVideo"\n                          close-click="vm.closeClick" set-close-state="vm.setCloseState" post-action="vm.postAction" close-data="vm.closeData" timer-data="vm.timerData"\n                          completion-countdown="vm.timerCompletionCountdown" hybrid="vm.hybrid"\n                          features-model="vm.featuresModel" should-mute="vm.isVideoMute">\n        </ssa-video-player>\n\n        <ssa-time-progress timer-data="vm.timerData" replay-mode="vm.isReplayVideo"></ssa-time-progress>\n\n        <ssa-mute-button ng-if="vm.muteBtnShouldDisplay" mute-btn-icon="vm.muteBtnIconOff" video-id="\'video\'"></ssa-mute-button>\n\n    </div></script><script type=text/ng-template id=ssaMraidAdContainerTemplate.html><div class="mraidWrapper">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink"></ssa-privacy-link>\n        <ssa-skip-in skip-in-data="vm.closeData" close-by-adunit="vm.closeClick" ng-hide="vm.usedCustomClose"></ssa-skip-in>\n        <div id="rootNode">\n            <iframe id="adContainer" class="obfuscationIframe"></iframe>\n        </div>\n    </div></script><script type=text/ng-template id=ssaFrameManager.html><div ng-class="vm.transparentLayoutClass" class="viewableFrameComponent fullSize absolutePosReset {{::vm.transparentLayoutClass}} {{::vm.layoutType}} {{::vm.customFrameType}} template-{{vm.templateClass}}">\n        <div class="frameWrapper fullSize">\n            <div class="frameCell fullSize">\n                <div class="frameContentContainer">\n                    <div ng-show="vm.isPartialScreen" class="layoutAssetsContainer {{::vm.deviceType}}">\n                        <img ng-show="vm.showFrameLayoutPortrait" ng-src="{{::vm.frameLayoutImagePortrait}}" class="frameLayout" mandatory-asset on-load-success="vm.onElementLoaded()" on-load-error="vm.onElementFailedToLoad()"/>\n                        <img ng-show="vm.showFrameLayoutLandscape" ng-src="{{::vm.frameLayoutImageLandscape}}" class="frameLayout" mandatory-asset on-load-success="vm.onElementLoaded()" on-load-error="vm.onElementFailedToLoad()"/>\n                    </div>\n                    <div class="componentContainer">\n                        <div class="emptyDummyNode"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaCompletionOfferTemplate.html><div class="progressOffer" ng-click="vm.clickOffer()">\n        <div class="offerWrap">\n            <div class="offerLoader" ng-show="vm.loading"></div>\n            <div class="offer clearfix left">\n                <div class="offerIconWrap">\n                    <div class="iconWrapper">\n                        <div ng-class="vm.offer.iconClass" ng-if="vm.isIconAvailable === false"></div>\n                        <img class="offerIcon" ng-src="{{::(vm.offer.assets.icon || vm.defaultIcon)}}" fallback-src="{{::vm.defaultIcon}}" ng-hide="vm.loading" ng-if="vm.isIconAvailable">\n                        <img class="loaderIcon" ng-src="{{vm.offer.globalData.spinner}}" ng-if="vm.loading">\n                    </div>\n                </div>\n                <div class="offerDetails">\n                    <div class="offerDetailsWrap">\n                        <div class="offerTitle">\n                        <span class="offerTitleText" ssa-three-dots td-initial-text="{{::vm.offer.textData.title}}"></span>\n                        </div>\n\n                        <div class="offerEarn">\n                            <div class="callToAction" ssa-three-dots td-initial-text="{{::vm.offer.textData.callToAction}}"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="offerBarAndCreditsSection {{:: vm.offer.themeColor}}">\n                <div class="statusValue">{{:: vm.offer.statusText}}</div>\n                <div class="statusBarContainer tableItem">\n                    <ssa-status-bar progress-bar-config="vm.progressBarConfig"></ssa-status-bar>\n                </div>\n                <div class="tableItem rewardValue">{{::vm.offerRewardText}}</div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaCompletionOffersTemplate.html><ssa-offers-list-title offers-title-data="vm.offersTitleData" ng-if="vm.showOffersTitleElement"></ssa-offers-list-title>\n    <div class="ssaCompletionOffersWrapper">\n        <div ng-show="vm.showCompletionOffers" class="offersMainView">\n            <div class="offersWrapper">\n                <ssa-no-content-layout ng-if="!vm.offersToShow.length"></ssa-no-content-layout>\n                <ul class="offers">\n                    <li class="offerItem" ng-repeat="offer in vm.offersToShow | filter:vm.filterCompleted">\n                        <ssa-completion-offer general-data-offer="vm.generalDataOffer" offer="offer" offer-index="$index"></ssa-completion-offer>\n                    </li>\n                </ul>\n                <div ng-if="vm.showCompletedOffersList">\n                    <ssa-offers-list-title offers-title-data="vm.completedOffersTitleData"></ssa-offers-list-title>\n                    <ul class="offers">\n                        <li class="offerItem" ng-repeat="offer in vm.completedOffersToShow">\n                            <ssa-completion-offer general-data-offer="vm.generalDataOffer" offer="offer" offer-index="$index"></ssa-completion-offer>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <ssa-loader-animation ng-show="!vm.showCompletionOffers"></ssa-loader-animation>\n    </div></script><script type=text/ng-template id=ssaOWTemplate.html><div class="ssaOW {{vm.designName}} {{vm.deviceType}} landing_{{vm.landingId}}" ng-show="vm.showOW">\n        <ssa-ow-header header-data="vm.headerData"></ssa-ow-header>\n        <ssa-ow-tabs tabs-data="vm.tabsData"></ssa-ow-tabs>\n        <ssa-ow-footer footer-data="vm.linksData" stick-to-bottom></ssa-ow-footer>\n        <div id="hiddenPixel" ng-show="vm.showHiddenPixel"></div>\n    </div>\n    <ssa-close-button close-data="vm.closeData" ng-show="vm.shouldShowCloseButton" ng-class="vm.closeButtonAnimation"></ssa-close-button>\n    <div ui-view ng-class="{\'secondaryUiView\': !vm.showOW}"></div></script><script type=text/ng-template id=ssaMarqueeOfferTopBlockTemplate.html><div class="marqueeTopBlock">\n        <div class="tableItem marqueeIndication indication">\n            <div class="rewardedText">{{::vm.marqueeLabel}}</div>\n        </div>\n        <div class="tableItem marqueeStars">\n            <div class="sprite-images-ssaTransparentStar"></div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaNoContentLayoutTemplate.html><div class="ssaNoContentLayout">\n        <div class="noOffersContainer">\n            <div class="ssaNoContentIcon sprite-images-{{vm.posterClass}}"></div>\n            <div class="noOffersTitle" ng-bind-html="vm.title | trustAsHTML"></div>\n            <div class="noOffersText" ng-bind-html="vm.content | trustAsHTML"></div>\n            <div class="ssaRefreshButtonContainer" ng-show="vm.showRefreshButton">\n                <ssa-refresh-button refresh-button-title="vm.refreshButtonTitle"\n                                    refresh-action-function="vm.handleRefreshCompletionOffersData"></ssa-refresh-button>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOWFooterTemplate.html><div class="ssaOWFooter" ng-class="{\'true\': \'footerHorizontal\', \'false\': \'footerVertical\'}[vm.fitOneLine]">\n        <div ng-if="vm.shouldShowContactSupportLink" class="footerLinkWrapper"><a class="footerLink" id="contactSupport" ui-sref="OW.contactSupport" ng-click="vm.trackEventSP(\'contactSupport\')">{{::vm.footerData.contactSupport.label}}</a></div>\n        <div class="footerLinkWrapper"><a class="footerLink" id="privacyPolicy" ui-sref="OW.privacyPolicy" ng-click="vm.trackEventSP(\'privacyPolicy\')">{{::vm.footerData.privacyPolicy.label}}</a></div>\n        <div class="footerLinkWrapper"><a class="footerLink" id="termsOfUse" ui-sref="OW.termsOfUse" ng-click="vm.trackEventSP(\'termsOfUse\')">{{::vm.footerData.termsOfUse.label}}</a></div>\n    </div></script><script type=text/ng-template id=ssaOWHeaderTemplate.html><div class="ssaOWHeaderWithDoublePromotion">\n        <div class="ssaOWHeader">\n            <ssa-close-button close-data="vm.headerData.closeData" ng-show="vm.headerData.showStickToHeaderCloseButton" ng-class="vm.headerData.closeButtonAnimation"></ssa-close-button>\n            <div class="description ssaOWHeaderItem" ssa-simple-text-fill tf-text-config="vm.textConfig">\n                {{vm.headerData.headerTitle}}\n            </div>\n            <div class="OWHeaderLogoContainer">\n                <div class="OWHeaderLogo"></div>\n            </div>\n            <div ng-if="vm.headerData.shouldShowPromotionBanner" class="headerDoublePromotionContainer">\n                <div class="doublePromotionCircle">\n                    <div class="sprite-images-ssaLimitedTime limitedTime"></div>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOWPromotionBannerTemplate.html><div class="doublePromotionContainer">\n        <div class="leftBlock">\n            <div class="spriteImages sprite-images-ssaDoublePromotionTrophy"></div>\n        </div>\n        <div class="rightBlock">\n            <div class="spriteImages sprite-images-ssaDoublePromotionX2"></div>\n        </div>\n        <div class="bottomBlock">\n            <div class="doublePromotionText" ssa-simple-text-fill tf-text-config="vm.textConfig">{{vm.promotionData.doublePromotionAllOffersText}}</div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOWTabsTemplate.html><div class="ssaTabsWrapper">\n        <div class="ssaOWTabsContainer">\n            <div ng-click="vm.handleTabClick($event)" id="offersTab" class="ssaOWTabItem ssaOffersTab" ng-class="{\'selectedTab\': vm.selectedTab}">{{vm.tabs.offers.name}}</div>\n            <div class="selectedTabUnderline"></div>\n            <div ng-click="vm.handleTabClick($event)" id="completionOffersTab" class="ssaOWTabItem ssaCompletionOffersTab" ng-class="{\'selectedTab\': !vm.selectedTab}">{{vm.tabs.completionOffers.name}}</div>\n        </div>\n        <div class="ssaTabsContentContainer">\n            <ssa-offers class="ssaOffersContainer tabContentItem" offers-data="vm.tabsData.offersInventory.offers" settings-data="vm.tabsData.offersInventory.settings" text-data="vm.tabsData.offersInventory.textData" ></ssa-offers>\n            <ssa-completion-offers class="ssaCompletionOffersContainer tabContentItem"></ssa-completion-offers>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOffersListTitleTemplate.html><div class="ssaOffersListTitleContainer">\n        <div class="ssaOffersTitle">{{::vm.offersTitleData.name}}</div>\n    </div></script><script type=text/ng-template id=ssaIconTitleAndTextModalTemplate.html><div class="ssaIconTitleAndTextModalContainer">\n        <div class="closeContainerWrapper" ng-click="modal.cancel()" ng-if="shouldShowCloseButton">\n            <div class="sprite-images-ssaSmallXButton smallXButton"></div>\n        </div>\n        <div class="scrollableContainer">\n            <div class="modalHeader">\n                <div class="headerContainer">\n                    <div class="iconWrapper">\n                        <div class="genericIconContainer sprite-images-ssaGeneric" ng-class="modalArgs.iconClass" ng-if="!modalArgs.isIconAvailable"></div>\n                        <img fallback-src="{{modalArgs.defaultIcon}}" ng-src="{{modalArgs.iconUrl || modalArgs.defaultIcon}}" ng-if="modalArgs.isIconAvailable"/>\n                    </div>\n                    <div class="appTitleWrapper">\n                        <div class="appTitle" ssa-three-dots td-initial-text="{{::modalArgs.appTitle}}">{{ modalArgs.appTitle }}</div>\n                        <div class="actionDescription" ssa-three-dots td-initial-text="{{::modalArgs.actionDescription}}">{{ modalArgs.actionDescription }}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="modalBody">\n                <div class="modalTitleContainer">\n                    <ssa-generic-button class="genericButton" ng-if="modalArgs.navigationButtonData" button-data="modalArgs.navigationButtonData"></ssa-generic-button>\n                    <div class="modalTitle" ng-bind-html="modalArgs.title | trustAsHTML"></div>\n                </div>\n                <div class="modalBodyContainer bodyText" ng-bind-html="modalArgs.body | trustAsHTML"></div>\n            </div>\n        </div>\n        <div class="modalFooter">\n            <div ng-if=\'showScrollableIcon\' class="scrollWrapper">\n                <div class="scrollIcon triangleScrollIcon sprite-images-ssaModalGrayArrow"></div>\n            </div>\n            <ssa-contact-support ng-if="modalArgs.showContactSupportComponent" contact-support-config="modalArgs.contactSupportConfig"></ssa-contact-support>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOWIntermediate.html><div class="modalOWIntermediate">\n        <div class="modalHeader">\n            <div class="headerContainer">\n                <div class="iconWrapper borderRounded">\n                    <div class="genericIconContainer sprite-images-ssaGeneric" ng-class="modalArgs.headerData.iconClass" ng-if="!modalArgs.headerData.isIconAvailable"></div>\n                    <img fallback-src="{{modalArgs.headerData.defaultIcon}}" ng-src="{{modalArgs.headerData.iconUrl || modalArgs.headerData.defaultIcon}}" ng-if="modalArgs.headerData.isIconAvailable"/>\n                </div>\n                <div class="appTitleWrapper">\n                    <div class="appTitle" ssa-three-dots td-initial-text="{{::modalArgs.headerData.appTitle}}">{{ modalArgs.headerData.appTitle }}</div>\n                    <div class="actionDescription"  ssa-three-dots td-initial-text="{{::modalArgs.headerData.actionDescription}}">{{ modalArgs.headerData.actionDescription }}</div>\n                </div>\n                <div class="closeContainerWrapper" ng-click="modal.cancel()">\n                    <ssa-close-logo></ssa-close-logo>\n                    <div class="sprite-images-ssaSmallXButton smallXButton"></div>\n                </div>\n            </div>\n        </div>\n            <div class="modalBody">\n                <div class="instructionDescription">{{ modalArgs.instructionDescription }}</div>\n                <div class="headerStripe"></div>\n                <div class="bodyText">\n                    <div class="descriptionItem" ng-repeat="item in modalArgs.bodyText track by $index">\n                        <div class="descriptionText">\n                            <div class="descriptionIndex">{{$index + 1}}. </div>\n                            <div class="descriptionValue">{{item}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        <div class="modalFooter">\n            <ssa-generic-button ng-if="shouldShowMissingCoinsLink" button-data="modalArgs.navigationButtonData"></ssa-generic-button>\n            <div ng-if=\'showScrollableIcon\' class="scrollWrapper">\n                <div class="scrollIcon triangleScrollIcon sprite-images-ssaModalGrayArrow"></div>\n            </div>\n            <div ng-if="shouldShowInstallButton" class="modalIntermediateButton" ng-click="modal.ok()">{{ modalArgs.buttonText }}</div>\n        </div>\n   </div></script><script type=text/ng-template id=ssaOWPopup.html><div class="modalOWPopup">\n        <div class="popupHeader">\n            <div class="popupHeaderText">\n                <div class="sprite-images-ssaRewardedBlack"></div>\n                <div class="appOfTheDayTitle">Offer of The Day!</div>\n            </div>\n            <div class="popupCloseContainerWrapper" ng-click="modal.cancel()">\n                <ssa-close-logo></ssa-close-logo>\n            </div>\n        </div>\n        <div class="popupIconWrapper">\n            <div class="popupGenericIconContainer" ng-class="modalArgs.icon.iconClass" ng-if="!modalArgs.icon.isIconAvailable"></div>\n            <img fallback-src="{{modalArgs.icon.defaultIcon}}" ng-src="{{modalArgs.icon.iconUrl || modalArgs.icon.defaultIcon}}" ng-if="modalArgs.icon.isIconAvailable"/>\n        </div>\n        <div class="popupBody">\n            <div class="popupBannerWrapper">\n                <img ng-src="{{modalArgs.banner}}"/>\n            </div>\n        </div><div class="popupFooter">\n            <div class="appTitleSection">\n                <div class="popupAppTitleWrapper">\n                    <div class="popupTitle">{{ modalArgs.appTitle }}</div>\n                    <div>\n                        <div class="jellyBean">{{ modalArgs.userFlowShort }}</div>\n                        <div class="popupActionText">{{ modalArgs.actionDescription }}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="appDescSection">\n                <div class="popupBodyText">\n                    <div class="popupDescriptionItem" ng-repeat="item in modalArgs.bodyText track by $index">\n                        <div class="popupDescriptionText"><span class="popupDescriptionIndex">{{$index + 1}}. </span> {{item}}</div>\n                    </div>\n                </div>\n                <div class="buttonSection">\n                    <div ng-if=\'showScrollableIcon\' class="popupScrollWrapper"><div class="popupScrollIcon sprite-images-ssaOWModalScroll"></div></div>\n                    <div class="modalPopupButton" ng-click="modal.ok()">{{ modalArgs.buttonText }}</div>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaTitleAndTextModalTemplate.html><div class="ssaTitleAndTextModalContainer">\n        <div class="modalHeader">\n            <div class="modalTitle" ng-bind-html="modalArgs.title | trustAsHTML"></div>\n            <div ng-if="modalArgs.navigationButtonData" class="backContainerWrapper">\n                <ssa-generic-button button-data="modalArgs.navigationButtonData"></ssa-generic-button>\n            </div>\n            <div ng-if="modalArgs.shouldShowCloseButton" class="closeContainerWrapper" ng-click="modal.cancel()">\n                <ssa-close-logo></ssa-close-logo>\n            </div>\n        </div>\n        <div class="modalBody" ng-bind-html="modalArgs.body | trustAsHTML"></div>\n        <div class="modalFooter">\n            <ssa-contact-support ng-if="modalArgs.showContactSupportComponent" contact-support-config="modalArgs.contactSupportConfig"></ssa-contact-support>\n        </div>\n    </div></script><script type=text/ng-template id=contactSupport.html><div class="ssaOWSpecialPages">\n        <div class="ssaContactSupport" ng-hide="vm.shouldOpenSpecialPageOnExternal">\n            <iframe class="contactSupport" ng-src="{{vm.url}}"></iframe>\n        </div>\n        <ssa-close-button close-by-adunit="vm.closeSecondary" ng-show="vm.shouldShowCloseButton"></ssa-close-button>\n    </div></script><script type=text/ng-template id=privacyPolicy.html><div class="ssaOWSpecialPages">\n        <div class="ssaPrivacyPolicy">\n            <div ng-include="vm.url"></div>\n        </div>\n        <ssa-close-button close-by-adunit="vm.closeSecondary" ng-show="vm.shouldShowCloseButton"></ssa-close-button>\n    </div></script><script type=text/ng-template id=termsOfUse.html><div class="ssaOWSpecialPages">\n        <div class="ssaTermsOfUse">\n            <div ng-include="vm.url"></div>\n        </div>\n    </div>\n    <ssa-close-button close-by-adunit="vm.closeSecondary" ng-show="vm.shouldShowCloseButton"></ssa-close-button></script><script type=text/ng-template id=ssaOfferTemplate.html><div class="ssaOffer">\n        <div class="offerWrap">\n            <div class="marqueeOfferOverlay" ng-show="vm.offer.marqueeOffer && vm.offer.marqueeOffer.show"></div>\n            <div class="offerLoader" ng-show="vm.loading"></div>\n            <ssa-marquee-offer-top-block marquee-label="vm.offer.marqueeOffer.marqueeLabel" ng-show="vm.offer.marqueeOffer && vm.offer.marqueeOffer.show"></ssa-marquee-offer-top-block>\n            <div class="offer clearfix left" ng-click="vm.clickOffer()">\n                <div class="offerIconWrap">\n                    <div class="iconWrapper">\n                        <div ng-class="vm.offer.iconClass" ng-if="vm.isIconAvailable === false"></div>\n                        <img class="offerIcon" ng-src="{{::(vm.offer.assets.icon || vm.defaultIcon)}}" fallback-src="{{::vm.defaultIcon}}" ng-hide="vm.loading" ng-if="vm.isIconAvailable">\n                        <img class="loaderIcon" ng-src="{{vm.offer.globalData.spinner}}" ng-if="vm.loading">\n                    </div>\n                </div>\n                <div class="offerDetails">\n                    <div class="offerDetailsWrap">\n                        <div class="offerTitle">\n                            <span class="offerTitleText" ssa-three-dots td-initial-text="{{::vm.offer.textData.title}}"></span>\n                        </div>\n\n                        <div class="offerEarn">\n                            <div class="callToAction" ssa-three-dots td-initial-text="{{::vm.offer.textData.callToAction}}"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="offerBtnWrap">\n                    <div class="doublePromotionX2OnButton" ng-show="vm.offer.globalData.doublePromotion.show">\n                        <div class="sprite-images-ssaDoublePromotionX2"></div>\n                    </div>\n\n                    <div class="offerBtn">\n                        <div class="offerValue">\n                            <div class="offerValueText">\n                                {{::(vm.offer.rewards + (vm.offer.plusIndication ? \'+\' : \'\'))}}\n                            </div>\n                            <div class="credits" ssa-simple-text-fill tf-text-config="vm.textConfig">\n                                {{::vm.offer.globalData.currency}}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="doublePromotionOffer" ng-show="vm.offer.globalData.doublePromotion.show">\n                        {{::vm.offer.textData.previously}}\n                    </div>\n                </div>\n            </div>\n            <div class="marqueeBottomStroke" ng-show="vm.offer.marqueeOffer && vm.offer.marqueeOffer.show"></div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaOffersTemplate.html><ssa-offers-list-title ng-if="vm.shouldShowOffersTitle" offers-title-data="vm.offersTitleData"></ssa-offers-list-title>\n    <ssa-ow-promotion-banner promotion-data="vm.promotionData" ng-if="vm.shouldShowPromotionBanner"></ssa-ow-promotion-banner>\n    <div class="offersMainView">\n        <div class="offersWrapper">\n            <ssa-no-content-layout ng-if="!vm.offersData.length"></ssa-no-content-layout>\n             <ul class="offers">\n                <li class="offerItem" ng-repeat="offer in vm.offersToShow | filter:vm.filterCompleted"\n                    in-view="vm.offerInView(offer, $inview)" in-view-options="vm.viewOfferOptions" ng-class="offer.marqueeOfferClass">\n                    <ssa-offer offer="offer" offer-index="$index" general-data-offer="vm.generalDataOffer"></ssa-offer>\n                </li>\n            </ul>\n        </div>\n        <ssa-pagination text-data="vm.textData" pagination-data="vm.paginationData"></ssa-pagination>\n    </div></script><script type=text/ng-template id=ssaPaginationTemplate.html><div class=\'paginationWrapper\' ng-class="{\'paginationSingleLink\' : (vm.paginationData.nextPageAvailable && !vm.paginationData.prevPageAvailable) || (!vm.paginationData.nextPageAvailable && vm.paginationData.prevPageAvailable),\n   \'paginationNoWrap\' : (!vm.paginationData.nextPageAvailable && !vm.paginationData.prevPageAvailable)}" >\n       <div class="paginationButtons">\n           <div class="paginationButtonWrapper" ng-click="vm.paginationData.onPaginationBackClick()()" ng-if="vm.paginationData.prevPageAvailable">\n               <div id="paginationBack" class=\'paginationButton\'  ng-class="{\'false\': \'paginationExpanded\', \'true\': \'paginationCollapsed\'}[vm.paginationData.nextPageAvailable]" >\n                <span ssa-simple-text-fill tf-text-config="vm.textConfig">\n                    {{vm.textData.back}}\n                </span>\n               </div>\n           </div>\n           <div class="paginationButtonWrapper" ng-click="vm.paginationData.onPaginationNextClick()()" ng-if="vm.paginationData.nextPageAvailable">\n               <div id="paginationNext" class=\'paginationButton paginationExpanded\' >\n                <span  ssa-simple-text-fill tf-text-config="vm.textConfig">\n                    {{vm.textData.moreOffers}}\n                </span>\n               </div>\n           </div>\n       </div>\n   </div></script><script type=text/ng-template id=ssaRVTemplate.html><div ui-view class="secondaryUiView"></div></script>');
}]),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){c.log("ssaOffer: AdController.OfferClosed: "+JSON.stringify(a),c.logLevel.trace),g.trackEvent(i.adClosed,{campaignType:r.convertCampaignTypeForDB(H.flowType)}),g.unsetCustomData("bannerId")}function w(){c.log("click on offer OW. index:"+G.offerIndex+" bannerId:"+H.bannerId+" creativeId "+H.creativeId,c.logLevel.trace),G.isVideoOffer?(G.openVideoOffer(),G.emitCloseEvent()):(G.showSpinner(),G.subscribeToAdClosedFromSDKController(),G.openUrl(),G.emitClickEvent());var a;a=G.isVideoOffer?"video":H.clickData&&H.clickData.install?"install":"other",e.call({method:"OWOfferClicked",arguments:{type:a}})}function x(a,b){g.trackTimingStop(a,{eNameStart:b,campaignType:r.convertCampaignTypeForDB(G.offer.flowType)}),g.unsetCustomData("bannerId")}function y(){g.trackTimingStart(l.openIntermediate),g.trackEvent(l.openIntermediate,{})}function z(){var a=!0,b={isIconAvailable:G.isIconAvailable,defaultIcon:G.defaultIcon,shouldShowInstallButton:!0,currency:G.generalDataOffer.currency},c=u.getModalData(G.offer,b),d=angular.extend(c.modalArgs,{closeModalDelay:0});y(),n.openCustomModal(c.template,k.getScreenType(),n.getModalSize().large,d,a).then(function(){w(),g.trackEvent(l.intermediateClick,{campaignType:r.convertCampaignTypeForDB(G.offer.flowType)}),x(l.closeIntermediate,l.openIntermediate)},function(){x(l.closeIntermediate,l.openIntermediate)})}function A(){var a="";return H.popupOffer?a=2:H.marqueeOffer&&(a=1),{"{{Marquee}}":encodeURIComponent(a)}}function B(){return angular.extend(h.getScoreAlias(),A())}function C(a){var b=t.redirect;return a===s.store?b=t.forking:a===s.seamless?b=t.seamless:a!==s.secondary&&a!==s.externalBrowser||(b=t.redirect),b}function D(a){return!!a}function E(){var a=f.service(),c=a.getOSType();if(G.generalDataOffer=G.generalDataOffer||{},G.clickData=H.clickData,G.clickData.isSeamless=G.generalDataOffer.isSeamless&&H.clickData.install&&("ios"!==c||L.indexOf(H.campaignId)==-1),G.clickData.isVideo=G.isVideoOffer=H.videoOffer&&Object.keys(H.videoOffer).length>0,G.clickData.bannerId=H.bannerId,G.clickData.id=H.id,G.isIconAvailable=m.isIconAvailable(H),D(G.offer)&&(G.offer.iconClass=m.getIconClass(H)),H.popupOffer&&(H.assets.banner&&q(H.assets.banner),o.callOnVisible(function(){p.fireOWVisibleImpression(1)})),G.defaultIcon=m.getDefaultIconUrlAsString(),G.textConfig={maxFontSize:"10",minFontSize:"9",outerClass:"offerBtn"},G.isVideoOffer){var d=b.get("creativeService");H.videoOffer.ext.clickTags&&(H.videoOffer.ext.clickTags.externalBrowser=H.clickData.externalBrowser),d.addCreative(H.videoOffer)}}var F,G=this,H=G.offer||{},I=m.hasIntermediateData(H),J=!1,K=2e3,L=[303574,235365,326989];G.openUrl=function(){r.handleClickAction(G.clickData,B(),G.openedUrlSuccess,G.openUrlFailure),G.clickData.isSeamless&&e.call({method:"AdOpened",arguments:{bannerId:H.bannerId}})},G.openedUrlSuccess=function(){if(c.log("ssaOffer: opened url success",c.logLevel.trace),k.isOWCloseOnClick()){var a={currentFrame:"openedUrlSuccess"};j.notifyCloseClick(a)}d(G.hideSpinner)},G.openUrlFailure=function(){c.log("ssaOffer: open url failure",c.logLevel.trace),d(G.hideSpinner)},G.clickOffer=function(){var a=k.getRequestOpportunityData(H);a.bannerId=H.bannerId,a.creativeId=H.creativeId?H.creativeId:"0",g.setCustomData(a);var b=H.marqueeOffer?i.marqueeClicked:i.offerClicked,c=r.getOfferClickActionStrategy(H.clickData);g.trackEvent(b,{campaignType:r.convertCampaignTypeForDB(H.flowType),generalMessage:C(c)}),r.fireOfferClickPixel(G.clickData,B()),I?z():w()},G.openVideoOffer=function(){a.$emit("ssaOW.openVideoOffer",{id:H.bannerId,onClose:function(){v("Internal close"),e.call({method:"videoOfferClosed",arguments:{}})}})},G.showSpinner=function(){G.clickData.isSeamless||(G.loading=!0,F=d(function(){c.log("fallback hide offer loader spinner"),G.hideSpinner()},K))},G.emitClickEvent=function(){J||H.clickData.externalBrowser&&!I&&!G.clickData.isSeamless||(a.$emit("ssaOW.offerClicked"),J=!0)},G.emitPopupClickEvent=function(){a.$emit("ssaOW.popupClicked")},G.emitCloseEvent=function(){J&&(a.$emit("ssaOW.offerClosed"),J=!1)},G.hideSpinner=function(){G.clickData.isSeamless||(G.loading=!1),G.emitCloseEvent(),d.cancel(F)},G.releaseListener=function(a){a&&(a(),a=null)},G.subscribeToAdClosedFromSDKController=function(){var b=a.$on("AdController.OfferClosed",function(a,c){v(c),G.releaseListener(b),G.emitCloseEvent()})},E()}a.$inject=["$scope","$injector","LogService","$timeout","adapter","AdUnitDelivery","analytics","perimeterXService","OW_ANALYTICS_CATEGORIES","closeButtonService","productSettingsService","OW_MODAL_EVENTS","ssaOfferService","modalService","SSA_Utils","ssaOffersFireImpressions","loadImageAssetService","owClickService","OPEN_URL_STRATEGIES","DATA_CLICK_TYPE_STRATEGY","intermediatePageService"];var b=angular.module("ssaOffer",["ssaMarqueeOfferTopBlock"]);b.directive("ssaOffer",function(){var a={restrict:"E",templateUrl:"ssaOfferTemplate.html",scope:{},bindToController:{offer:"=",offerIndex:"=",generalDataOffer:"="},controllerAs:"vm",controller:"ssaOfferController"};return a}),b.controller("ssaOfferController",a)}(),function(){var a=angular.module("ssaOffer"),b={video:"sprite-images-ssaOfferPlay",app:"sprite-images-ssaDownloadApp",engage:"sprite-images-ssaDownloadApp",playable:"sprite-images-ssaMiniGame",survey:"sprite-images-ssaSurvey",signup:"sprite-images-ssaSignup",premium:"sprite-images-ssaPremium","default":"sprite-images-ssaGeneric"};a.factory("ssaOfferService",["assetsService",function(a){function c(){return a.getUrlToCdn()+"/common/images/ssaGenericIcon.png"}function d(a){return e(a)?"":f(a)}function e(a){return a&&a.hasOwnProperty("assets")&&a.assets.hasOwnProperty("icon")&&a.assets.icon.length>0}function f(a){var c="ssaOfferSpriteImageWrapper ";return c+(b[a.flowType]||b["default"])}function g(a){if(!a.intermediateData||!a.intermediateData.text)return!1;var b=a.intermediateData.text;return b.instructionDescription.length>0&&b.instructions.length>0&&b.actionButton.length>0}return{getIconClass:d,getDefaultIconUrlAsString:c,isIconAvailable:e,hasIntermediateData:g}}])}(),function(){function a(a){var b=this;b.textConfig={maxFontSize:"18",minFontSize:"11",outerClass:"paginationButton"}}a.$inject=["$scope"];var b=angular.module("ssaPagination",[]);b.directive("ssaPagination",function(){var a={restrict:"E",scope:{},templateUrl:"ssaPaginationTemplate.html",bindToController:{textData:"=",paginationData:"="},controllerAs:"vm",controller:"ssaPaginationCtrl"};return a}),b.controller("ssaPaginationCtrl",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){b(function(){angular.element(window).triggerHandler("checkInView")})}function q(){var a=x.offersToShow&&x.offersToShow.length;return 0===a}function r(){if(!B){var a=x.offersToShow&&x.offersToShow.length;e.fireOWVisibleImpression(a)}}function s(){v=!0}function t(){v=!1}function u(){A=!1,w=a.$on("AdController.viewableChange",function(a,b){b&&b.hasOwnProperty("isViewable")&&b.hasOwnProperty("webview")&&("true"!==b.isViewable&&b.isViewable!==!0||"main"!==b.webview||(A=!0,w(),p()))})}var v,w,x=this,y=[],z=[],A=!0,B=!1;x.offersData&&x.offersData[0]&&(x.offersData[0].firstImpressionFunction=function(a){var b=a?a:"";h.trackEvent(i.firstCampaignImpression,{generalMessage:b})}),x.viewOfferOptions={throttle:1e3,offset:["-0.5%","0%","-0.5%","0%"],alwaysFire:!0},x.offersTitleData={name:j["default"]+x.settingsData.currency};var C;x.init=function(){x.generateGeneralDataOffer(),x.setFirstPageBehavior(),x.promotionData=x.settingsData.doublePromotionData,x.shouldShowPromotionBanner=x.promotionData&&x.promotionData.doublePromotion===!0&&x.offersData.length>0,x.shouldShowOffersTitle=!x.shouldShowPromotionBanner,x.showNoOffersBar=0===x.offersData.length,m.callOnVisible(function(){p(),q()&&r()});var a=angular.extend({},x.settingsData.callbackData,x.settingsData.impressionsData);e.setImpressionsData(a),x.attachBackButtonBehavior(),x.attachPaginationFunctionality()},x.generateGeneralDataOffer=function(){x.generalDataOffer={currency:x.settingsData.currency,doublePromotion:{show:x.settingsData.doublePromotionData&&x.settingsData.doublePromotionData.doublePromotion},freeLabel:x.textData.freeLable,spinner:x.settingsData.spinner,externalBrowser:x.settingsData.externalBrowser,isSeamless:o.isSeamless()}},x.isOfferMarquee=function(a){return a.marquee&&(1===a.marquee||a.marquee===!0)},x.isOfferPopup=function(a){return"android"===m.getOSType()&&!o.isOWCloseOnClick()&&a.isPopup&&a.assets&&a.assets.banner},x.setFirstPageBehavior=function(){d.setPageProperties(x.offersData.length,x.settingsData.offersPerPage),x.offersToShow=d.getOffersToShow(x.offersData);var a=!1;if(x.offersToShow)for(var b=0;b<x.offersToShow.length;b++){var c=x.offersToShow[b];!a&&x.isOfferMarquee(c)&&(x.offersToShow[b]=x.setMarqueeOfferBehavior(c),a=!0),!B&&x.isOfferPopup(c)&&(x.offersToShow[b]=x.setPopupOfferBehavior(c),B=!0)}},x.setMarqueeOfferBehavior=function(a){return a.marqueeOffer={show:!0,marqueeLabel:l},a.marqueeOfferClass="marqueeOffer",a.freeIndication=!1,a},x.setPopupOfferBehavior=function(a){return a.popupOffer=!0,a},x.attachBackButtonBehavior=function(){a.$on("ssaOffers."+g.backButtonPressedEvent,function(a,b){x.onBackButtonPressed(b.parentBackAction)}),x.onBackButtonPressed=function(a){v||(d.hasPreviousPage()?x.paginationData.onPaginationBackClick():"function"==typeof a&&a())}},x.attachPaginationFunctionality=function(){function b(){x.offersToShow=d.getOffersToShow(x.offersData),x.setPaginationButtonsVisibility(),h.setCustomData({owPageNumber:d.getCurrentPage()}),h.trackEvent(i.owLoaded),c()}function c(){var b=!0;d.hasNextPage()&&(b=!1),a.$emit("ssaOW.paginationPressed",{movingToLastPage:b})}x.paginationData={},x.setPaginationButtonsVisibility=function(){x.paginationData.nextPageAvailable=d.hasNextPage(),x.paginationData.prevPageAvailable=d.hasPreviousPage()},x.paginationData.onPaginationNextClick=function(){d.moveToNextPage(),b()},x.paginationData.onPaginationBackClick=function(){d.moveToPreviousPage(),b()},x.setPaginationButtonsVisibility()},x.filterCompleted=function(a){return!a.completed},x.offerInView=function(a,d){a&&!c.is("OW.frameManager")&&m.isAdUnitVisible()&&!n.isModalOpen()&&A&&d&&z.indexOf(a.campaignId)===-1&&y.indexOf(a)==-1&&(y.push(a),C&&b.cancel(C),C=b(function(){var a=angular.copy(y);r(),e.fireImpressions(a),f.fireTrackingEvents(a);for(var b=0;b<a.length;b++){var c=a[b].campaignId;z.indexOf(c)===-1&&z.push(c);for(var d=-1,g=0;g<y.length;g++)if(y[g].campaignId==c){d=g;break}d>-1&&y.splice(d,1)}},50))},a.$on("ssaOW.offerClicked",s),a.$on("ssaOW.offerClosed",t),a.$on("ssaOW.popupClicked",u),x.init()}a.$inject=["$scope","$timeout","$state","ssaOffersService","ssaOffersFireImpressions","ssaOffersTrackingService","BACK_BUTTON_EVENTS","analytics","OW_ANALYTICS_CATEGORIES","OW_OFFERS_TITLE_BY_TYPE","OW_NO_CONTENT_MSG_HTML","OW_MARQUEE_TEXT","SSA_Utils","modalService","productSettingsService"];var b=angular.module("ssaOffers",["ssaOffer","ssaPagination"]);b.directive("ssaOffers",function(){var a={restrict:"E",scope:{},bindToController:{offersData:"=",settingsData:"=",textData:"="},templateUrl:"ssaOffersTemplate.html",controllerAs:"vm",controller:"ssaOffersCtrl"};return a}),b.controller("ssaOffersCtrl",a)}(),function(){var a=angular.module("ssaOWSpecialPages",[]);a.factory("specialPageService",["AdUnitDelivery","productSettingsService",function(a,b){function c(a){if(a)return g[a]?g[a].url:""}function d(){f=a.service(),g=b.getLinksData()}function e(){return!f.isInternalOW()}var f,g;return d(),{getUrlByPageName:c,isShouldShowCloseButton:e}}])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){c.trackEvent(f.adClosed,{}),c.unsetCustomData("bannerId")}function p(a,b){c.trackTimingStop(a,{eNameStart:b}),c.unsetCustomData("bannerId")}function q(a){c.trackTimingStart(a),c.trackEvent(a,{})}function r(){return C.hasOwnProperty(y.status)?C[y.status].start:i.openInProgressIntermediate}function s(){return C.hasOwnProperty(y.status)?C[y.status].stop:i.closeInProgressIntermediate}function t(){var a=!0,b=r(),c=s(),d={isIconAvailable:x.isIconAvailable,defaultIcon:x.defaultIcon,shouldShowInstallButton:!1,currency:x.offer.currency},e=m.getModalData(x.offer,d),f=angular.extend(e.modalArgs,{shouldShowInstallButton:!1,closeModalDelay:0});q(b),k.openCustomModal(e.template,h.getScreenType(),k.getModalSize().large,f,a).then(function(){p(c,b)},function(){p(c,b)})}function u(a){return!!a}function v(){x.generalDataOffer=x.generalDataOffer||{},x.clickData=y.clickData,x.clickData.bannerId=y.bannerId,x.clickData.id=y.id,x.isIconAvailable=j.isIconAvailable(y),x.offerRewardText=j.getOfferRewardText(y),u(x.offer)&&(x.offer.iconClass=j.getIconClass(y),x.offer.iconWrapperClass=j.getIconWrapperClass(y),x.offer.statusText=j.getStatusText(y),x.offer.themeColor=d.hasOwnProperty(y.status)?d[y.status]:d["default"],x.progressBarConfig={theme:x.offer.themeColor,progressValue:e.hasOwnProperty(y.status)?e[y.status]:e["default"]}),x.defaultIcon=j.getDefaultIconUrlAsString(),x.textConfig={maxFontSize:"13",minFontSize:"7",outerClass:"progressOfferBtn"}}var w,x=this,y=x.offer||{},z=j.hasIntermediateData(y),A=!1,B=2e3,C={};C[n.supportDenied]={start:i.openDeniedIntermediate,stop:i.closeDeniedIntermediate},C[n.supportPending]={start:i.openPendingSupportIntermediate,stop:i.closePendingSupportIntermediate},x.openUrl=function(){l.handleClickAction(x.clickData,{},x.openedUrlSuccess,x.openUrlFailure)},x.openedUrlSuccess=function(){if(h.isOWCloseOnClick()){var a={currentFrame:"openedUrlSuccess"};g.notifyCloseClick(a)}b(x.hideSpinner)},x.openUrlFailure=function(){b(x.hideSpinner)},x.clickOffer=function(){y.status!==n.completed&&y.status!==n.supportGranted&&t()},x.showSpinner=function(){x.loading=!0,w=b(function(){x.hideSpinner()},B)},x.emitClickEvent=function(){A||y.clickData.externalBrowser&&!z||(a.$emit("ssaOW.offerClicked"),A=!0)},x.emitPopupClickEvent=function(){a.$emit("ssaOW.popupClicked")},x.emitCloseEvent=function(){A&&(a.$emit("ssaOW.offerClosed"),A=!1)},x.hideSpinner=function(){x.loading=!1,x.emitCloseEvent(),b.cancel(w)},x.releaseListener=function(a){a&&(a(),a=null)},x.subscribeToAdClosedFromSDKController=function(){var b=a.$on("AdController.OfferClosed",function(a,c){o(c),x.releaseListener(b),x.emitCloseEvent()})},v()}a.$inject=["$scope","$timeout","analytics","OW_IN_PROGRESS_THEME_COLOR","OW_PROGRESS_BAR_VALUE_BY_STATUS","OW_ANALYTICS_CATEGORIES","closeButtonService","productSettingsService","OW_MODAL_EVENTS","ssaCompletionOfferService","modalService","owClickService","intermediatePageService","OW_STATUS_VALUES"];var b=angular.module("ssaCompletionOffer",[]);b.directive("ssaCompletionOffer",function(){var a={restrict:"E",templateUrl:"ssaCompletionOfferTemplate.html",scope:{},bindToController:{offer:"=",offerIndex:"=",generalDataOffer:"="},controllerAs:"vm",controller:"ssaCompletionOfferController"};return a}),b.controller("ssaCompletionOfferController",a)}(),function(){var a=angular.module("ssaCompletionOffer"),b={video:"sprite-images-ssaOfferPlay",app:"sprite-images-ssaDownloadApp",engage:"sprite-images-ssaDownloadApp",playable:"sprite-images-ssaMiniGame",survey:"sprite-images-ssaSurvey",signup:"sprite-images-ssaSignup",premium:"sprite-images-ssaPremium","default":"sprite-images-ssaGeneric"},c={video:"sprite-images-ssaOfferPlayWrapper",playable:"sprite-images-ssaMiniGameWrapper","default":""},d={started:"Started",completed:"Completed",supportDenied:"Denied",supportGranted:"Completed",supportPending:"Pending support"};a.factory("ssaCompletionOfferService",["assetsService",function(a){function e(){return a.getUrlToCdn()+"/common/images/ssaGenericIcon.png"}function f(a){return h(a)?"":i(a)}function g(a){return h(a)?j(a):""}function h(a){return a&&a.hasOwnProperty("assets")&&a.assets.hasOwnProperty("icon")&&a.assets.icon.length>0}function i(a){var c="ssaOfferSpriteImageWrapper ";return c+(b[a.flowType]||b["default"])}function j(a){var b="ssaOfferSpriteImageWrapper ";return b+(c[a.flowType]||c["default"])}function k(a){if(!a.intermediateData||!a.intermediateData.text)return!1;var b=a.intermediateData.text;return b.instructionDescription.length>0&&b.instructions.length>0&&b.actionButton.length>0}function l(a){return a&&a.status&&d.hasOwnProperty(a.status)?d[a.status]:""}function m(a){return a.rewards+" "+a.currency}return{getIconClass:f,getIconWrapperClass:g,getDefaultIconUrlAsString:e,isIconAvailable:h,hasIntermediateData:k,getStatusText:l,getOfferRewardText:m}}])}(),function(){function a(a,b,c,d,e,f,g,h,i,j){function k(a,b){return a.sort(function(a,c){return b.indexOf(a.status)-b.indexOf(c.status)})}function l(a,b){return a.filter(function(a,c,d){return b.indexOf(a.status)!==-1})}function m(a){t.offersToShow=a.hasOwnProperty("offers")?a.offers:[],t.completedOffersToShow=l(t.offersToShow,[j.completed,j.supportGranted]),t.settingsData=s.getSettings(),t.textData=s.getTextData(),t.textData.noOffersMessage=b.isEmptyOffers(t.offersToShow)?b.getNoOffersMessage(a):"",t.showOffersTitleElement=t.offersToShow.length>0,t.showCompletedOffersList=t.completedOffersToShow.length>0,t.generalDataOffer={currency:t.settingsData.currency,spinner:t.settingsData.spinner}}function n(a){var b={};b.emptyOWReason=!(a>0)&&"no offers",u?e.trackEvent(h.progressOffersLoaded,null,b):t.showCompletionOffers&&e.trackEvent(h.progressTabVisible,null,b)}function o(c){t.showCompletionOffers=!0,m(c),n(t.offersToShow.length),k(t.offersToShow,w),b.isEmptyOffers(t.offersToShow)&&a.$broadcast("ssaOWCompletionOffers.noCompletionOffers",{status:b.isServerError(c)?i.serverError:i.noOffers,noCompletionOffersMessage:t.textData.noOffersMessage})}function p(){v&&u&&t.showCompletionOffers&&(e.trackEvent(h.progressTabVisible,{}),v=!1),u||t.showCompletionOffers||q()}function q(){s.getCompletionOffers().then(o,o)}function r(){t.showCompletionOffers=!1,t.showOffersTitleElement=t.showCompletionOffers,t.showCompletedOffersList=!1,s=d.service(),u=c.shouldLoadCompletionOffersOnShowOW(),a.$on("ssaOWTab.showCompletionOffersTab",p),a.$on("ssaNoCompletionOffersBanner.retryGetCompletionOffersTab",q),g.callOnVisible(function(){u&&!t.showCompletionOffers&&q()})}var s,t=this,u=!1,v=!0,w=[j.started,j.supportPending,j.supportDenied,j.supportGranted,j.completed];t.offersTitleData={name:f.inProgress},t.completedOffersTitleData={name:f.completed},t.filterCompleted=function(a){return a.status!==j.completed&&a.status!==j.supportGranted},r()}a.$inject=["$scope","ssaCompletionOffersService","productSettingsService","AdUnitDelivery","analytics","OW_OFFERS_TITLE_BY_TYPE","SSA_Utils","COMPLETION_OFFERS_EVENTS","OW_NO_COMPLETION_OFFERS_STATUS","OW_STATUS_VALUES"];var b=angular.module("ssaCompletionOffers",["ssaCompletionOffer"]);b.directive("ssaCompletionOffers",function(){var a={restrict:"E",templateUrl:"ssaCompletionOffersTemplate.html",scope:{},bindToController:{},controllerAs:"vm",controller:"ssaCompletionOffersController"};return a}),b.controller("ssaCompletionOffersController",a)}(),function(){var a=angular.module("ssaCompletionOffers");a.factory("ssaCompletionOffersService",["OW_SERVER_ERROR_MSG","OW_NO_CONTENT_MSG_HTML",function(a,b){function c(a){return a&&0===a.length}function d(b){var c=!1,d=a;if(!b||!b.hasOwnProperty("errorMessage"))return c;for(var e in d)if(d[e]==b.errorMessage){c=!0;break}return c}function e(a){return d(a)?b.serverError:b.completionOffers}return{isEmptyOffers:c,isServerError:d,getNoOffersMessage:e}}])}(),function(){function a(a){}a.$inject=["$scope"];var b=angular.module("ssaMarqueeOfferTopBlock",[]);b.directive("ssaMarqueeOfferTopBlock",function(){var a={restrict:"E",templateUrl:"ssaMarqueeOfferTopBlockTemplate.html",scope:{},bindToController:{marqueeLabel:"="},controllerAs:"vm",controller:"ssaMarqueeOfferTopBlockController"};return a}),b.controller("ssaMarqueeOfferTopBlockController",a)}(),function(){function a(a,b,c,d,e,f,g){function h(){a.$emit("ssaNoCompletionOffersBanner.retryGetCompletionOffersTab",{retry:!0}),b.trackEvent(c.retryButtonClicked,{})}function i(a){k.title=a.title,k.content=a.content,k.posterClass=a.posterClass}function j(){i(e.defaultOffers),a.$on("ssaOWCompletionOffers.noCompletionOffers",function(a,b){k.showRefreshButton=!(!b||!b.hasOwnProperty("status")||b.status!=d.serverError);var c=b&&b.hasOwnProperty("noCompletionOffersMessage")?b.noCompletionOffersMessage:e.defaultOffers;i(c)}),k.showRefreshButton=!1,k.refreshButtonTitle="Retry",k.handleRefreshCompletionOffersData=g.getDebounceFunction(h,f)}var k=this;j()}a.$inject=["$scope","analytics","COMPLETION_OFFERS_EVENTS","OW_NO_COMPLETION_OFFERS_STATUS","OW_NO_CONTENT_MSG_HTML","DEBOUNCE_CLICK_DURATION","SSA_Utils"];var b=angular.module("ssaNoContentLayout",[]);b.directive("ssaNoContentLayout",function(){var a={restrict:"E",scope:{},templateUrl:"ssaNoContentLayoutTemplate.html",bindToController:{layoutConfig:"="},controllerAs:"vm",controller:"ssaNoContentLayoutCtrl"};return a}).filter("trustAsHTML",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),b.controller("ssaNoContentLayoutCtrl",a)}(),function(){function a(a,b,c,d,e,f,g){function h(){var a=0;return m++,!(m<3)&&(m=0,angular.forEach(b[0].getElementsByClassName("footerLink"),function(b){a+=b.offsetWidth}),a>b[0].getElementsByClassName("ssaOWFooter")[0].offsetWidth)}function i(a){c(function(){a.fontSize==n&&h()&&(l.fitOneLine=!1)},200)}function j(){f.hasNotch()&&b.addClass(g.customFooterMargin)}function k(){l.trackEventSP=function(a){d.unsetCustomData("bannerId"),o.hasOwnProperty(a)&&d.trackEvent(o[a])},l.fitOneLine=!0,l.shouldShowContactSupportLink=f.showContactSupportOnFooter(),l.textConfig={maxFontSize:"13",minFontSize:n,outerClass:"ssaOWFooter",onComplete:i},j()}var l=this,m=0,n=8,o={termsOfUse:e.termsOfUse,privacyPolicy:e.privacyPolicy,contactSupport:e.contactSupport};k()}a.$inject=["$state","$element","$timeout","analytics","OW_ANALYTICS_CATEGORIES","productSettingsService","OW_FOOTER_LAYOUT_STYLE"];var b=angular.module("ssaOWFooter",[]);b.directive("ssaOwFooter",function(){var a={restrict:"E",templateUrl:"ssaOWFooterTemplate.html",scope:{},bindToController:{footerData:"="},controllerAs:"vm",controller:"ssaOWFooterController"};return a}),b.controller("ssaOWFooterController",a)}(),function(){function a(a,b,c){var d=this;d.textConfig={maxFontSize:"24",minFontSize:"20",outerClass:"ssaOWHeader",heightOnly:!0}}a.$inject=["$scope","$element","productSettingsService"];var b=angular.module("ssaOWHeader",[]);b.directive("ssaOwHeader",function(){var a={restrict:"E",templateUrl:"ssaOWHeaderTemplate.html",scope:{},bindToController:{headerData:"="},controllerAs:"vm",controller:"ssaOWHeaderController"};return a}),b.controller("ssaOWHeaderController",a)}(),function(){function a(){var a=this;a.textConfig={minFontSize:"20",maxFontSize:"22",outerClass:"bottomBlock"}}var b=angular.module("ssaOWPromotionBanner",[]);b.directive("ssaOwPromotionBanner",function(){var a={restrict:"E",scope:{},templateUrl:"ssaOWPromotionBannerTemplate.html",bindToController:{promotionData:"="},controllerAs:"vm",controller:"ssaOWPromotionBannerCtrl"};return a}),b.controller("ssaOWPromotionBannerCtrl",a)}(),function(){function a(a,b,c,d,e,f,g,h){function i(a){a.removeClass(d.swipeLeft),a.removeClass(d.swipeRight)}function j(a){var b=angular.element(document.getElementsByClassName("selectedTabUnderline"));i(b),b.addClass("left"===a?d.swipeRight:d.swipeLeft)}function k(a){i(u),i(w),l(a)}function l(a){u.addClass("left"===a?d.swipeRight:d.swipeLeft),w.addClass("left"===a?d.swipeRight:d.swipeLeft)}function m(){u=angular.element(document.getElementsByClassName("ssaCompletionOffersContainer")),v=angular.element(document.getElementsByClassName("ssaTabsContentContainer")),w=angular.element(document.getElementsByClassName("ssaOffersContainer"))}function n(){y=f.getScreenWidth(),v.css({width:2*y+"px"}),u.css({width:y+"px"}),w.css({width:y+"px"})}function o(){m(),n(),p(z)}function p(a){var b=a==t.tabs.offers.name?u:w,c=a==t.tabs.offers.name?w:u;b.css({display:"none"}),c.css({display:"table-cell"}),v.css({width:y+"px"})}function q(b){var c,d,f={},i=b.target.innerHTML;i!==z&&(i==t.tabs.offers.name?(c=e.left,d=h.showOfferwallTab):(c=e.right,d=h.showProgressTab,a.$broadcast("ssaOWTab.showCompletionOffersTab",{})),b&&b.target&&x!==i&&(x=i,g.trackEvent(d,f||{})),z=i,r(),j(c),k(c),p(i))}function r(){t.showCompletionOffersTab=!t.showCompletionOffersTab,t.selectedTab=!t.selectedTab}function s(){t.selectedTab=!0,f.callOnVisible(o),b.addEventListener("resize",o)}var t=this;t.tabs={offers:{name:c.offers},completionOffers:{name:c.completionOffers}};var u,v,w,x,y,z=t.tabs.offers.name;t.handleTabClick=q,s(),a.$on("$destroy",function(){b.removeEventListener("resize",o)})}a.$inject=["$scope","$window","OW_TABS","OW_TAB_ANIM_CLASS","OW_TAB_ANIM_DIRECTIONS","SSA_Utils","analytics","COMPLETION_OFFERS_EVENTS"];var b=angular.module("ssaOWTabs",["ssaOffers","ssaCompletionOffers"]);b.directive("ssaOwTabs",function(){var a={restrict:"E",templateUrl:"ssaOWTabsTemplate.html",scope:{},bindToController:{tabsData:"="},controllerAs:"vm",controller:"ssaOWTabsController"};return a}),b.controller("ssaOWTabsController",a)}(),function(){function a(a,b,c){var d={name:c["default"]},e=this;e.offersTitleData=e.offersTitleData||d}a.$inject=["$scope","$element","OW_OFFERS_TITLE_BY_TYPE"];var b=angular.module("ssaOffersListTitle",[]);b.directive("ssaOffersListTitle",function(){var a={restrict:"E",templateUrl:"ssaOffersListTitleTemplate.html",scope:{},bindToController:{offersTitleData:"="},controllerAs:"vm",controller:"ssaOffersListTitleController"};return a}),b.controller("ssaOffersListTitleController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){a.$broadcast("stickToBottom.recalculate")}function u(){e(function(){U.showHiddenPixel=!U.showHiddenPixel,e(function(){U.showHiddenPixel=!U.showHiddenPixel})},10)}function v(){T.addClass("disableScroll"),T[0].scrollTop=0,T.removeClass("disableScroll")}function w(){if("ios"===N){var a=T[0].scrollTop;a>0&&v()}}function x(a){"ios"===N?(v(),a&&u(),H()):T[0].scrollTop=0}function y(){var a=q.getOWCloseDelayDuration()>0?1e3*q.getOWCloseDelayDuration():0,b=q.isOWCloseShouldStickToHeader()?U.headerData:U;a>0&&F()&&(b.closeButtonAnimation=Z,$=!0,e(function(){b.closeButtonAnimation=Y,$=!1},a))}function z(){var a=F();a&&q.isOWCloseShouldStickToHeader()?(U.shouldShowCloseButton=!1,U.headerData.showStickToHeaderCloseButton=!0,U.headerData.closeStyle=!0):U.shouldShowCloseButton=a}function A(){try{T[0].scrollHeight>T[0].clientHeight?T.addClass("allowNativeScroll"):T.removeClass("allowNativeScroll")}catch(a){return}}function B(){if(C()){var a=U.inventory.ext&&U.inventory.ext.emptyOWReason;V.isEmptyDB()&&!a&&(a="no offers");var b={};a&&(b.emptyOWReason=a),l.trackEvent(p.owLoaded,null,b),f.call({method:"adLoaded",arguments:X}),V.isInternalOW()&&e(function(){U.showOW=!U.showOW,e(function(){U.showOW=!U.showOW})},10),S(),e(function(){A()})}}function C(){return P?aa&&_:_}function D(){S=a.$on("$viewContentLoaded",function(a){l.setCustomData({owPageNumber:1}),_=!0,B()})}function E(){m.load(U.inventory.settings.pluginsData&&U.inventory.settings.pluginsData.perimeterX)}function F(){return!V.isInternalOW()}function G(){U.viewingSpecialPage||(A(),t())}function H(){e(function(){W.triggerHandler("checkInView")},250)}function I(){return d.document.styleSheets.length}function J(){R&&e.cancel(R),Q&&e.cancel(Q),aa=!0,B()}function K(a){var b=100;I()>a?J():R=e(function(){K(a)},b)}function L(a){var b=5e3;Q=e(function(){J()},b),K(a)}var M,N,O,P,Q,R,S,T,U=this,V=g.service(),W=angular.element(window),X={homePageLinks:{},title:"Supersonic"},Y="fadeInAnimation",Z="invisible",$=!1,_=!1,aa=!1;try{T=angular.element(c.children()[0])}catch(ba){T=c}U.isSpecialPage=function(a){return a&&a.isSpecialPage},U.backButtonPressed=function(){var b,c=angular.noop;if(s.isModalOpen())return void s.closeModal();if(!$){if(U.showOW)b="ssaOffers."+k.backButtonPressedEvent,c=h.notifySDKControllerToCloseAdunit;else if(U.viewingFrameManager)b="frameManager."+k.backButtonPressedEvent;else{if(!U.viewingSpecialPage)return;b="ssaOWSpecialPages."+k.backButtonPressedEvent}a.$broadcast(b,{parentBackAction:c})}},U.setOWBackBehavior=function(){h.setAdunitResponsibilityAndAction(U.backButtonPressed)},U.setEmptyOWBehavior=function(){U.headerData={},U.shouldShowPromotionBanner=!1,U.headerData.shouldShowPromotionBanner=!1},U.init=function(){function c(){T.addClass("disableScroll")}function f(){T.removeClass("disableScroll")}function g(a,c){M=c,b.go("OW.frameManager",{id:c.id})}if(N=V.getOSType(),O=V.getOSVersion(),U.viewingSpecialPage=!1,U.showHiddenPixel=!0,U.closeData={"class":n.smallX},U.inventory=V.getDBObj(),U.deviceType=q.getScreenType(),U.tabsData={},U.tabsData.offersInventory=U.inventory,U.emptyWall=V.isEmptyOW(),U.showOW=!U.isSpecialPage(b.current.data),U.designName=o["default"],U.emptyWall)U.setEmptyOWBehavior();else{if(U.headerData=V.getHeaderData(),U.headerData.closeData=U.closeData,U.linksData=q.getLinksData(),U.landingId=V.getLandingId(),U.promotionData=U.inventory.settings.doublePromotionData,U.shouldShowPromotionBanner=U.promotionData.doublePromotion===!0&&U.inventory.offers.length>0,U.headerData.shouldShowPromotionBanner=U.shouldShowPromotionBanner,P=q.getCustomCss()){var h=I();r.loadCustomCss(P),L(h)}a.$on("$stateChangeSuccess",function(a,c,d,e,f){U.viewingSpecialPage=U.isSpecialPage(c.data),U.showOW=!U.viewingSpecialPage,"OW"===e.name&&b.is("OW.frameManager")?(U.shouldShowCloseButton=!1,U.viewingFrameManager=!0):"OW.frameManager"===e.name&&b.is("OW")&&(U.viewingFrameManager=!1,U.setOWBackBehavior(),i.setAdapterCloseState(j.close),z(),M&&(M.onClose(),M=null))}),X={homePageLinks:{text:U.inventory.textData.pageTitle,links:U.inventory.settings.touchIcons},title:U.headerData.headerTitle},T.on("scroll",H),U.inventory.settings.preload?a.$on("AdController.adVisible",function(){E()}):E()}z(),y(),a.$on("ssaOW.paginationPressed",function(a,b){t(),x(b.movingToLastPage),e(function(){w(),H(),A()})}),a.$on("ssaOW.offerClicked",c),a.$on("ssaOW.offerClosed",f),a.$on("ssaModal.disableScroll",c),a.$on("ssaModal.enableScroll",f),a.$on("ssaOW.openVideoOffer",g),d.addEventListener("resize",G),D(),t(),U.setOWBackBehavior()},U.init(),a.$on("$destroy",function(){d.removeEventListener("resize",G)})}a.$inject=["$scope","$state","$element","$window","$timeout","adapter","AdUnitDelivery","BackButtonService","closeButtonService","CLOSE_BUTTON_STATES","BACK_BUTTON_EVENTS","analytics","perimeterXService","CLOSE_BUTTON_STYLES","OW_DESIGN_NAMES","OW_ANALYTICS_CATEGORIES","productSettingsService","loadExternalFileService","modalService"];var b=angular.module("ssaOW",["ssaOWHeader","ssaOffersListTitle","ssaOWFooter","ssaOWSpecialPages","ssaOWPromotionBanner","owServices","ssaNoContentLayout","ssaOWTabs"]);b.directive("ssaOw",function(){var a={restrict:"E",templateUrl:"ssaOWTemplate.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"ssaOWController"};return a}),b.controller("ssaOWController",a)}(),function(){var a=angular.module("ssaOW");a.factory("intermediatePageService",["productSettingsService","analytics","OW_INTERMEDIATE_PAGE_NAMES","OW_INTERMEDIATE_PAGE_LINKS","OW_INTERMEDIATE_PAGE_CONFIG","OW_MODAL_TEMPLATES","$sce","OW_STATUS_VALUES","modalService","OW_MODAL_EVENTS","analytics",function(a,b,c,d,e,f,g,h,i,j,b){function k(a,b){return{appTitle:a.textData.title,actionDescription:a.textData.callToAction,appDescription:a.appDescription,isIconAvailable:b.isIconAvailable,iconUrl:a.assets.icon,iconClass:a.iconClass,defaultIcon:b.defaultIcon}}function l(b,c){return{showContactSupportComponent:!0,shouldShowCloseButton:!1,contactSupportConfig:{clickTimestamp:b.clickTimestamp||0,title:b.textData.title,credits:b.rewards||0,callToAction:b.textData.callToAction,icon:c.isIconAvailable?b.assets.icon:c.defaultIcon,deviceType:a.getScreenType(),submitUrl:b.submitOpenTicketLink||null}}}function m(a){return a===h.supportDenied||a===h.supportPending||a===c.missingCoins?f.iconTitleText:f.intermediatePage;
}function n(a,b){a.title="<div class='missingCoinsTitle'>Missing "+b+"</div>"}function o(d,e){var f=!0,g=m(c.missingCoins),h=s(c.missingCoins,d,e);n(h,e.currency),h=angular.extend(h,r(d,e),l(d,e)),b.trackEvent(j.openMissingCoinsIntermediate,{}),i.openCustomModal(g,a.getScreenType(),i.getModalSize().large,h,f)}function p(b){return a.showMissingCoinsOnIntermediate()&&b&&b.status}function q(a,b){return p(a)?{title:d.missingCoins+b.currency+"?",clickAction:o.bind(!0,a,b),style:"missingCoinsLink"}:{}}function r(a,b){return{showMissingCoinsLink:!0,navigationButtonData:{clickAction:t.bind(!0,a,b),style:"leftArrowButton"}}}function s(a,b,c){var d=e.hasOwnProperty(a)?e[a]:{};return d=angular.extend(d,k(b,c))}function t(c,d){var e=!0,f=v(c,d),g=angular.extend(f.modalArgs,{shouldShowInstallButton:!1,closeModalDelay:0});b.trackEvent(j.returnFromMissingCoinsToProgressIntermediate,{}),i.openCustomModal(f.template,a.getScreenType(),i.getModalSize().large,g,e).then(null,function(){b.trackEvent(j.closeInProgressIntermediate,{})})}function u(a,b){return a&&b?{headerData:k(a,b),banner:a.assets.banner,instructionDescription:a.intermediateData.text.instructionDescription,bodyText:a.intermediateData.text.instructions,buttonText:a.intermediateData.text.actionButton,appTitle:a.textData.title,actionDescription:a.textData.callToAction,jellyBeanClass:a.jellybeanClass,userFlowShort:a.textData.userFlowShort,shouldShowInstallButton:b.shouldShowInstallButton,navigationButtonData:q(a,b)}:{}}function v(a,b){var c=f.basicPopup,d={};return a&&b?(c=m(a.status),d=a.status===h.supportDenied||a.status===h.supportPending?s(a.status,a,b):u(a,b),{template:c,modalArgs:d}):{template:c,modalArgs:d}}return{getModalData:v}}])}(),function(){var a=angular.module("internalServiceModule",[]);a.factory("eventHandlerService",["$q","$window",function(a,b){function c(a){var c={method:"adLoaded",arguments:a};b.parent.postMessage(JSON.stringify(c),"*")}function d(a){var c={method:"analytics",arguments:a};b.parent.postMessage(JSON.stringify(c),"*")}return{adLoaded:c,analytics:d}}])}(),function(){var a=angular.module("internalServiceModule");a.factory("generalFunctionService",["$q","$window",function(a,b){function c(c){var d=a.defer(),e=c.url;return d.resolve(),e&&b.open(e,"_blank"),d.promise}function d(a){var b=a.type;if("openUrl"==b)return c(a)}return{actionClick:d,openUrl:c}}])}(),function(){var a=angular.module("internalServiceModule");a.factory("internalMainService",["$timeout","$q","networkService","generalFunctionService","eventHandlerService",function(a,b,c,d,e){function f(a){if(!a||"function"!=typeof a.then)return!1;var c=String(b.defer().promise.then),d=String(a.then);return c===d}function g(b,c){if(b&&b.method&&h[b.method]){var d=h[b.method],e=b.id,g=d(b.arguments);return f(g)&&g.then(function(b){a(function(){c({data:b,id:e})},0)}),!0}return!1}var h={GetConfig:c.getConfig,OpenUrl:d.openUrl,ActionClick:d.actionClick,adLoaded:e.adLoaded,Analytics:e.analytics};return{call:g}}])}(),function(){var a=angular.module("internalServiceModule");a.factory("networkService",["$q","$http","$location","$window","ssaExternalParams",function(a,b,c,d,e){function f(){var a=e.getParamByName("baseUrl");if(a)return a;var b=c.protocol()+"://";return b+g()}function g(){var a=d.location.pathname.split("/"),b=a[a.length-2],c=m;return"prod"!==b&&(c=n),c}function h(a){return["mode","productType","callback","baseUrl","pScore"].indexOf(a)!==-1}function i(a){return angular.extend(a,{format:"openRTB"})}function j(a){for(var b in a)a.hasOwnProperty(b)&&("string"==typeof a[b]&&(a[b]=decodeURIComponent(a[b])),"object"==typeof a[b]&&a[b]&&j(a[b]))}function k(){var a=[],b=i(e.getParams());j(b);for(var c in b)b.hasOwnProperty(c)&&!h(c)&&a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]));return"?"+a.join("&")}function l(){var c=a.defer(),d=f(),e=d+k();return b.get(e).then(function(a){c.resolve(a.data)},function(a){var b={offers:[],settings:{},textData:{noOffers:"Sorry, we currently have no offers to display. Please try again later."},ext:{emptyOWReason:"Missing application info"}};c.resolve(b)}),c.promise}var m="ow-gateway.supersonicads.com/gateway/offerwall/request",n="staging-"+m;return{getConfig:l}}])}(),function(){var a=angular.module("owServices",[]);a.factory("owClickService",["$rootScope","placeholderManager","FIRE_PIXEL_STRATEGIES","OPEN_URL_STRATEGIES","productSettingsService","seamlessOpenStoreService","adapter",function(a,b,c,d,e,f,g){function h(a){return a.adClick?a.adClick.url:a.pixelURL}function i(a){return a.adClick||a.intermediateClick?a.intermediateClick&&a.intermediateClick.url?t(a)?a.storeClick:a.intermediateClick.url:a.adClick.url:a.url}function j(a){return!!a&&a.install}function k(a){return!!a&&a.isSeamless}function l(a){return a.intermediateClick}function m(a){return!!a&&a.isVideo}function n(a){return e.getIsSafeClick()&&"ios"===x.os&&x.sdkVersion>"5.35"}function o(a){var b=d.secondary;if(a)return b=a.forking?d.store:j(a)&&k(a)?d.seamless:a.externalBrowser?d.externalBrowser:b}function p(a){var b=c.none;return(a.forking||m(a)||l(a))&&(b=n(a)?c["native"]:c.pixel),b}function q(a){a=a.toLowerCase();var b={app:"APP",freetrial:"FRT",survey:"SUR",signup:"SUP",video:"VID",premium:"BUY",engage:"ENG",playable:"PLY","default":"DEF"};return b[a]||b["default"]}function r(a,c){if(a)return a=b.replaceAllConstPlaceholders(a),a=b.replacePlaceholderWithMap(a,c)}function s(b,c){if(b){var d=b;d=r(d,c);var e={type:"pixel",url:d};a.$broadcast("PixelDirective.FirePixel",e)}}function t(a){if(a.intermediateClick&&a.forking)return a.intermediateClick&&a.intermediateClick.url&&a.forking}function u(a,b){var c=h(a),d=p(a);c&&y.indexOf(d)!==-1&&s(c,b)}function v(a,b,c,e){var h=r(i(a),b),j=o(a);j===d.seamless?f.openStoreUrl(h,c,e):(t(a)&&s(a.intermediateClick.url,b),g.call({method:"ActionClick",arguments:{type:"openUrl",url:h,externalBrowser:a.externalBrowser,install:a.install},callback:c}))}function w(){x=e.getDeviceData()}var x,y=[c.pixel,c["native"]];[d.seamless,d.external_browser,d.secondary];return w(),{getOfferBannerClick:h,getOfferClickActionUrl:i,getOfferClickActionStrategy:o,fireOfferClickPixel:u,firePixelUrl:s,handleClickAction:v,replaceAllPlaceHolders:r,convertCampaignTypeForDB:q}}])}(),function(){function a(a,b,c,d,e,f,g,h){var i=this;i.shouldOpenSpecialPageOnExternal=!0,i.closeSecondary=function(){b.go("^")},i.init=function(){var f=b.current.data?b.current.data.pageName:"";if(f){var g=d.getUrlByPageName(f);i.externalUrl=g,i.url=c.trustAsResourceUrl(g)}a.$on("ssaOWSpecialPages."+e.backButtonPressedEvent,function(a,c){b.go("^")}),i.shouldShowCloseButton=d.isShouldShowCloseButton()},i.openUrl=function(){i.externalUrl&&(f.call({method:"ActionClick",arguments:{type:"openUrl",url:i.externalUrl,externalBrowser:!0},callback:i.openedUrlSuccess}),b.go("^"))},i.openedUrlSuccess=function(){h.log("special page: opened url success",h.logLevel.trace)},i.init(),i.shouldOpenSpecialPageOnExternal&&i.openUrl()}a.$inject=["$scope","$state","$sce","specialPageService","BACK_BUTTON_EVENTS","adapter","productSettingsService","LogService"];var b=angular.module("ssaOWSpecialPages");b.directive("contactSupport",function(){var a={restrict:"E",templateUrl:"contactSupport.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"contactSupportController"};return a}),b.controller("contactSupportController",a)}(),function(){function a(a,b,c,d,e){var f=this;f.closeSecondary=function(){b.go("^")},f.init=function(){var g=b.current.data?b.current.data.pageName:"";if(g){var h=d.getUrlByPageName(g);f.url=c.trustAsResourceUrl(h)}a.$on("ssaOWSpecialPages."+e.backButtonPressedEvent,function(a,c){b.go("^")}),f.shouldShowCloseButton=d.isShouldShowCloseButton()},f.init()}a.$inject=["$scope","$state","$sce","specialPageService","BACK_BUTTON_EVENTS"];var b=angular.module("ssaOWSpecialPages");b.directive("privacyPolicy",function(){var a={restrict:"E",templateUrl:"privacyPolicy.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"privacyPolicyController"};return a}),b.controller("privacyPolicyController",a)}(),function(){function a(a,b,c,d,e){var f=this;f.closeSecondary=function(){b.go("^")},f.init=function(){var g=b.current.data?b.current.data.pageName:"";if(g){var h=d.getUrlByPageName(g);f.url=c.trustAsResourceUrl(h)}a.$on("ssaOWSpecialPages."+e.backButtonPressedEvent,function(a,c){b.go("^")}),f.shouldShowCloseButton=d.isShouldShowCloseButton()},f.init()}a.$inject=["$scope","$state","$sce","specialPageService","BACK_BUTTON_EVENTS"];var b=angular.module("ssaOWSpecialPages");b.directive("termsOfUse",function(){var a={restrict:"E",templateUrl:"termsOfUse.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"termsOfUseController"};return a}),b.controller("termsOfUseController",a)}(),function(){var a=angular.module("ssaOffers");a.factory("ssaOffersFireImpressions",["$http","placeholderManager","analytics","OW_ANALYTICS_CATEGORIES",function(a,b,c,d){function e(a){return a&&a.impressionsUrl&&(a.impressionsUrl=b.replaceAllConstPlaceholders(a.impressionsUrl)),a&&a.owVisibleUrl&&(a.owVisibleUrl=b.replaceAllConstPlaceholders(a.owVisibleUrl)),a&&a.adVisibleUrl&&(a.adVisibleUrl=b.replaceAllConstPlaceholders(a.adVisibleUrl)),r=a,r||{}}function f(a){var b=this,c=this._filterAlreadyFiredCampaigns(a),d=this._sliceVisibleOffersUniqueData(c);if(r.impressionsUrl&&"object"==typeof d&&d.length>0){for(var e,f=l(d),g=r.impressionsUrl,h=0;h<c.length;h++)c[h].firstImpressionFunction&&(e=c[h],g+=g.indexOf("?")>-1?"&":"?",g+="isFirst=true");var j=i(g);j.onreadystatechange=function(){4==j.readyState&&(b._markPhpImpressions(c),p(e,j.status))},j.ontimeout=function(a){p(e,-1)},j.onerror=function(a){p(e,-2)},j.send(JSON.stringify(f))}if(r.adVisibleUrl&&(f=this._createAdVisibleResponse(c))){var k=i(r.adVisibleUrl);k.onreadystatechange=function(){4==k.readyState&&b._markScalaImpressions(c)},k.send(JSON.stringify(f))}}function g(a){for(var b=[],c=a.length,d=0;d<c;d++)(r.impressionsUrl&&!a[d].phpImpression||r.adVisibleUrl&&!a[d].scalaImpression)&&b.push(a[d]);return b}function h(a){if(r.owVisibleUrl&&!s){s=!0;var c=b.replacePlaceholderWithMap(r.owVisibleUrl,{"{{displayedBanners}}":a}),d=i(c);d.onreadystatechange=function(){4==d.readyState&&q(d.status)},d.ontimeout=function(a){q(-1)},d.onerror=function(a){q(-2)},d.send()}}function i(a){var b=new XMLHttpRequest;return b.open("POST",a,!0),b.setRequestHeader("Content-Type","text/plain"),b.timeout=3e4,b}function j(a){var b=[];if("object"==typeof a&&a.length>0&&"object"==typeof r.uniqueData&&r.uniqueData.length>0)for(var c=r.uniqueData.length,d=a.length,e=0;e<c;e++)for(var f=parseInt(Object.keys(r.uniqueData[e].postImpressionData)[0]),g=0;g<d;g++)r.impressionsUrl&&!a[g].phpImpression&&f===a[g].campaignId&&b.push(r.uniqueData[e]);return b}function k(){return r}function l(a){var b=angular.copy(r);return delete b.impressionsUrl,b.owVisibleUrl&&delete b.owVisibleUrl,b.adVisibleUrl&&delete b.adVisibleUrl,b.uniqueData=a,b}function m(a){for(var b=[],c=a.length,d=0;d<c;d++)r.adVisibleUrl&&!a[d].scalaImpression&&a[d].adVisibleData&&b.push(a[d].adVisibleData);return b}function n(a){for(var b=0;b<a.length;b++)a[b].phpImpression=!0}function o(a){for(var b=0;b<a.length;b++)a[b].scalaImpression=!0}function p(a,b){a&&b&&a.firstImpressionFunction(b)}function q(a){a&&c.trackEvent(d.owPageImpression,{generalMessage:a})}var r={},s=!1;return{setImpressionsData:e,fireImpressions:f,_sliceVisibleOffersUniqueData:j,_getData:k,_filterAlreadyFiredCampaigns:g,_markPhpImpressions:n,_markScalaImpressions:o,_createAdVisibleResponse:m,fireOWVisibleImpression:h}}])}(),function(){var a=angular.module("ssaOffers");a.factory("ssaOffersService",function(){function a(a,b){m=b||m||r,n=a||n||q}function b(a){o=parseInt(a),(o<p||isNaN(o))&&(o=p)}function c(a){return a=a||[],a.slice(this._getFirstOfferPosition(),this._getLastOfferPosition()+1)}function d(){return this._getLastOfferPosition()+1<n}function e(){return o>1}function f(){this.hasNextPage()&&this.setPageAndGo(o+1)}function g(){this.hasPreviousPage()&&this.setPageAndGo(o-1)}function h(){return n>0?m*(o-1):-1}function i(){return Math.min(m*o-1,n-1)}function j(){return o}function k(){return m}function l(){return n}var m,n,o=1,p=1,q=0,r=16;return{setPageProperties:a,setPageAndGo:b,getOffersToShow:c,hasNextPage:d,hasPreviousPage:e,moveToNextPage:f,moveToPreviousPage:g,getCurrentPage:j,_getFirstOfferPosition:h,_getLastOfferPosition:i,_getNumOfOffersPerPage:k,_getNumOfOffers:l}})}(),function(){var a=angular.module("ssaOffers");a.factory("ssaOffersTrackingService",["$rootScope",function(a){function b(a){for(var b=this._sliceVisibleOffersTrackingCallbacks(a),c=this._filterAlreadyFiredTrackingCallback(b),d=0;d<c.length;d++)this._fireTrackingCallback(c[d]);this._markFiredTrackingCallbacks(c)}function c(b){a.$broadcast("PixelDirective.FirePixel",b)}function d(a){var b=[];if("object"==typeof a&&a.length>0)for(var c=a.length,d=0;d<c;d++)if("object"==typeof a[d].callbacks&&a[d].callbacks.length>0)for(var e=a[d].callbacks,f=e.length,g=0;g<f;g++)b.push(e[g]);return b}function e(a){for(var b=[],c=0;c<a.length;c++)g.indexOf(a[c])===-1&&b.push(a[c]);return b}function f(a){if(a&&a.length>0)for(var b=0;b<a.length;b++)g.push(a[b])}var g=[];return{fireTrackingEvents:b,_sliceVisibleOffersTrackingCallbacks:d,_filterAlreadyFiredTrackingCallback:e,_markFiredTrackingCallbacks:f,_fireTrackingCallback:c}}])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){var b={crid:a.getCRID(),id:a.getCombinedBannerAndCreativeId(),adUnitType:a.getAdUnitType(),productType:a.getProductType(),inventoryId:a.getInventoryId()},c=a.getDemandSourceName();return c&&(b.demandSourceName=c),b}function q(){var c=f.service();a.securedProtocol=c.isSecuredProtocol(),s.isloaded=!0,r=i.getProduct(),s.notificationData=k.get(),s.showNotificationData=!(!s.notificationData||!s.notificationData.showNotificationData)&&s.notificationData.showNotificationData,b.mainControllerLoadTime=(new Date).getTime(),b.productType=m.getProductType(),a.$emit("ssaSpinner.hide",""),a.isPreCache=m.isPreCache(),n.extendConstAliasesMap(m.getSupportedPlaceholderAliasesMap()),s.templateClass=c.getTemplateId();var d=c.getLandingId();1002!==d&&1003!==d||"android"===j.getOSType()&&(4===j.getMajorAndroidVersion()&&j.getMinorAndroidVersion()<1?d=0:j.getMajorAndroidVersion()<4&&(d=0)),s.landingClass=d,c.isRingerMutedOnStart()&&j.setDefaultRingerSwitchOn(!0),t(c),m.shouldWarmupUrls()&&angular.isDefined(c.getPostActionsData)&&o.startWarmupUrls(c.getUrlsToWarmup())}var r,s=this,t=function(a){var b=p(a);g.setEventDefaults(b)},u=function(){a.$on("AdController.adVisible",function(a,c){null!==s.notificationData&&h(function(){b.$broadcast("ssaNotification.show",{state:"during"})},300)}),a.$on("AdController.updateAd",function(a,b){e.db=b.param,f.service().init(e.db),q(),c.go("AD",{},{reload:!0})})};s.isloaded=!1,s.showNotificationData=!1,g.init(),f.getConfig().then(function(){q(),g.initEvents(),u()})}a.$inject=["$scope","$rootScope","$state","$element","$window","AdUnitDelivery","AdControllerService","$timeout","productFactory","SSA_Utils","notifications","creativeService","productSettingsService","placeholderManager","urlWarmUpService"];var b=angular.module("AdUnit",["ui.router","angular-inview","templates-adunit","adunitDirectives","adUnitProductFactory","communicationModule","services.ssaCloseButton","ssaFrameManager","creativeModule","ssaBannerInstall","externalDataModule","ssaOW","ssaRV","ssaStatusBar","ssaModal","ssaLogo","ssaContactSupport","ssaGenericButton","ssaPrivacyLink","ssaCarousel","ssaInstallClickable","ssaRate","ssaIcon","ssaInstallButton","ssaSpinner","ssaLoaderAnimation","ssaSocialButtons","ssaNotification","ssaBackButton","ssaSkipIn","ssaCloseLogo","ssaCloseButton","ssaMuteButton","ssaReplayButton","ssaEaClickHere","ssaStars","ssaVideo","ssaRefreshButton","ssaTimeProgress"]);b.controller("MainController",a),b.config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]),b.run(["$templateCache","$rootScope","$compile","ssaExternalParams","SSA_Utils","analytics","ADUNIT_BUILD","ADUNIT_VERSION","visibilityService",function(a,b,c,d,e,f,g,h,i){d.retrieveParamsFromUrl();var j=a.get("ssa-templates");c(j)(b),f.setCustomData({adunitVersion:h,adUnitBuild:g}),e.initListenToAdVisible(),i.initListeners()}])}(),function(){var a=angular.module("AdUnit"),b={firstLoad:["$state","$rootScope","AdUnitDelivery","PRODUCT_TYPES",function(a,b,c,d){return c.getConfig().then(function(){var b=c.service(),e=b.getProductType();e===d.BrandConnect||e===d.RewardedVideo||e===d.Banner||e===d.Interstitial?a.go("AD"):e===d.OfferWall&&a.go("OW",{pageNum:1})},function(a){b.$emit("AdUnit.AdLoaded",{errMsg:a.errMsg})})}]};a.config(["$stateProvider","$urlRouterProvider",function(a,c){a.state("AD",{url:"/AD",template:"<ssa-rv></ssa-rv>"}).state("AD.frameManager",{url:"/frameManager/:id",template:"<ssa-frame-manager></ssa-frame-manager>"}).state("OW",{url:"/OW",template:"<ssa-ow></ssa-ow>"}).state("OW.contactSupport",{url:"/contactSupport",template:"<contact-support></contact-support>",data:{isSpecialPage:!0,pageName:"contactSupport"}}).state("OW.termsOfUse",{url:"/termsOfUse",template:"<terms-of-use></terms-of-use>",data:{isSpecialPage:!0,pageName:"termsOfUse"}}).state("OW.privacyPolicy",{url:"/privacyPolicy",template:"<privacy-policy></privacy-policy>",data:{isSpecialPage:!0,pageName:"privacyPolicy"}}).state("OW.frameManager",{url:"/frameManager/:id",template:"<ssa-frame-manager></ssa-frame-manager>",data:{isSpecialPage:!0}}).state("home",{url:"/",resolve:b}),c.otherwise("/")}])}();var ssaCarousel=angular.module("ssaCarousel",[]);ssaCarousel.directive("ssaCarousel",["$window",function(a){function b(){return a.innerHeight>a.innerWidth}var c=function(a,b,c){a&&b&&c&&(c=c<=1&&c>0?c:1,a.css({height:b*c+"px"}))},d=function(a,d){var e=a.getCarouselHeight();b()||d.css({height:.9*e}),c(d,e,.9)},e=function(a){if(b()){var e=a.getCarouselHeight(),f=a.getCarouselWidth(),g=.84;angular.forEach(a.sharedData.landscapeImages,function(b){var d=b.attr("original-width")/f,h=b.attr("original-height")/d;c(b,h,g),e===a.getCarouselHeight()&&(e=h)}),angular.forEach(a.sharedData.portraitImages,function(a){c(a,e,g)}),a.$emit("Carousel.heightLimit",{heightLimit:e})}else angular.forEach(a.sharedData.landscapeImages.concat(a.sharedData.portraitImages),function(b){d(a,b)})};return{restrict:"E",scope:{carouselImages:"=",onLoadAction:"&",onErrorAction:"&"},templateUrl:"carouselTemplate.html",link:function(a,b,c){"function"!=typeof a.onLoadAction&&(a.onLoadAction=angular.noop),"function"!=typeof a.onErrorAction&&(a.onErrorAction=angular.noop),a.getCarouselHeight=function(){return b.parent()[0].clientHeight},a.getCarouselWidth=function(){return b.parent()[0].clientWidth},a.carouselLoaded="hidden"},controller:["$scope",function(a){a.sharedData={portraitImages:[],landscapeImages:[],imagesSuccessCounter:0,imagesErrorCounter:0},a.$on("Carousel.recalculate",function(){e(a),a.$emit("Carousel.loaded")}),a.stretchImages=e.bind(this,a),a.$on("$destroy",function(){var b;for(b=0;b<a.sharedData.landscapeImages.length;b++)a.sharedData.landscapeImages[b]=null;for(b=0;b<a.sharedData.portraitImages.length;b++)a.sharedData.portraitImages[b]=null;a.sharedData.landscapeImages=a.sharedData.portraitImages=[]})}]}}]),ssaCarousel.directive("imageonload",function(){return{restrict:"A",scope:!1,link:function(a,b,c){function d(){b[0].clientHeight>=b[0].clientWidth?a.sharedData.portraitImages.push(b):a.sharedData.landscapeImages.push(b),b.attr("original-width",b[0].clientWidth),b.attr("original-height",b[0].clientHeight)}function e(){b.unbind("load"),b.unbind("error")}function f(){var b=a.sharedData.imagesSuccessCounter===h,c=a.sharedData.imagesErrorCounter+a.sharedData.imagesSuccessCounter===h,d=b||c;d&&(a.sharedData.imagesSuccessCounter=0,a.sharedData.imagesErrorCounter=0,a.stretchImages(),a.$emit("Carousel.loaded")),b&&a.onLoadAction()}function g(){b.bind("load",function(){d(),e(),a.sharedData.imagesSuccessCounter++,f()}),b.bind("error",function(c){e(),b.css("display","none"),0===a.sharedData.imagesErrorCounter&&a.onErrorAction(b),a.sharedData.imagesErrorCounter++,f()})}var h=a.carouselImages.length;g()}}}),ssaCarousel.directive("ssaScrollPosition",["$window","$timeout",function(a,b){return{restrict:"EA",link:function(b,c,d){function e(a){var b,c=a.getBoundingClientRect();return b=c.width?Math.ceil(c.width):Math.ceil(c.right-c.left)}var f,g,h,i=c[0],j=function(){var d=b.carouselImages.length;switch(d){case 0:break;case 1:angular.element(c).addClass("singleGaleryItem");var j=a.document.querySelector(".adUnitGalleryItem").clientWidth;angular.element(a.document.querySelector(".adUnitGallery")).css({width:j+"px"}),b.$apply(function(){b.carouselLoaded="visible"});break;default:for(var k=angular.element(i).find("img"),l=0,m=0;m<d;m++)l+=e(k[m]);l+=10,l+=15*(d-1),angular.element(document.querySelector(".adUnitGallery")).css({width:l+"px"}),f=i.scrollWidth,g=i.offsetWidth,h=f-g,b.$apply(function(){i.scrollLeft=h/2,b.carouselLoaded="visible"})}};b.$on("Carousel.loaded",j)}}}]);var ssaCloseButton=angular.module("ssaCloseButton",[]);ssaCloseButton.directive("ssaCloseButton",function(){return{templateUrl:"closeButton.html",restrict:"E",scope:{closeData:"=",addCurrentFrameName:"=",layoutShowsPrivacyLink:"=",closeByAdunit:"="},controller:["$scope","$stateParams","$timeout","closeButtonService","LogService",function(a,b,c,d,e){function f(){return a.closeData&&a.closeData.endCardFlags&&a.closeData.endCardFlags.X2S&&!(a.closeData.isOfferClicked&&a.closeData.isOfferClicked())}function g(){a.$watch("closeData.hideClose",function(b,c){b!==c&&"boolean"==typeof b&&a.$emit("CloseBtn.isHidden",b)})}function h(){if(g(),a.closeData&&a.closeData.endCardFeatures&&a.closeData.endCardFlags){var b=a.closeData.endCardFlags.DEC,e=a.closeData.endCardFlags.LEB;e&&!a.layoutShowsPrivacyLink&&(a.isRightButton=!1,a.closeData.leftButton=!0,d.setForceClose(!0,"top-left")),b>0&&(a.closeData.setBackButtonBehavior&&a.closeData.setBackButtonBehavior(!0),a.closeData.hideClose=!0,a.fadeMode=!0,c(function(){a.closeData.setBackButtonBehavior&&a.closeData.setBackButtonBehavior(!1),a.fadeInMode=!0,a.fadeMode=!1,a.closeData.hideClose=!1},1e3*b))}}var i="function"==typeof a.closeByAdunit;a.isRightButton=!0,a.closeAdUnit=function(b){var c={};a.addCurrentFrameName&&(c.currentFrame=a.addCurrentFrameName),a.closeData.hideClose||b.stopPropagation(),e.log("close button clicked",e.logLevel.trace);var g=f();g||i||a.closeData.hideClose?(c.ignoreClick=!0,d.notifyCloseClick(c),a.closeData.hideClose||(a.closeByAdunit(g),g&&(a.closeData.endCardFlags.X2S=!1))):d.notifyCloseClick(c)},h()}]}}),function(){var a=angular.module("ssaCloseLogo",[]);a.directive("ssaCloseLogo",["CLOSE_BUTTON_STYLES",function(a){var b={hideClose:!1,"class":a["default"]};return{restrict:"E",templateUrl:"closeSimple.html",scope:{closeData:"="},link:function(a,b,c){var d=b.children();a.closeData.closeUrl&&a.closeData.closeUrl.portrait&&d.css({"background-image":"url("+a.closeData.closeUrl.portrait+")","background-repeat":"no-repeat"}),a.closeData.leftButton&&d.css({"float":"left"})},controller:["$scope","$element","productSettingsService",function(a,c,d){var e=c.children();a.closeData=a.closeData||b,d.shouldRemoveTranslateZOnCloseButton()&&e.addClass("noTranslateZ")}]}}])}(),function(){var a=angular.module("ssaContactSupport",[]);a.directive("ssaContactSupport",function(){return{restrict:"E",templateUrl:"ssaContactSupportTemplate.html",scope:{contactSupportConfig:"="},controller:["$scope","$element","productSettingsService","specialPageService","adapter","OW_CONTACT_SUPPORT_PAGE_URL","OW_ANALYTICS_CATEGORIES","OW_INTERMEDIATE_PAGE_LINKS","OW_CONTACT_SUPPORT_AVAILABLE_TIME","analytics","COMPLETION_OFFERS_EVENTS",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.valueInHours=i.valueInHours,a.contactSupportAvailable=q(),a.userApplicationKey=c.getApplicationKey(),a.userDeviceId=c.getDeviceId(),a.contactSupportConfig=a.contactSupportConfig||{},a.contactSupportLinkData={title:h.contactSupport,style:a.contactSupportAvailable?r.enabled:r.disabled,clickAction:o},a.contactSupportUrl=m()}function m(){return c.shouldOpenNewContacSupportPage()&&a.contactSupportConfig.submitUrl?f.prod+"?title="+encodeURIComponent(a.contactSupportConfig.title)+"&icon="+encodeURIComponent(a.contactSupportConfig.icon)+"&callToAction="+encodeURIComponent(a.contactSupportConfig.callToAction)+"&credits="+encodeURIComponent(a.contactSupportConfig.credits)+"&deviceType="+encodeURIComponent(a.contactSupportConfig.deviceType)+"&submitUrl="+encodeURIComponent(a.contactSupportConfig.submitUrl):d.getUrlByPageName("contactSupport")}function n(){a.contactSupportUrl&&e.call({method:"ActionClick",arguments:{type:"openUrl",url:a.contactSupportUrl,externalBrowser:!0},callback:null})}function o(){a.contactSupportAvailable&&(j.trackEvent(g.contactSupport,{}),n())}function p(a){return Math.floor(a/36e5)}function q(){var b=(new Date).getTime(),c=b-a.contactSupportConfig.clickTimestamp;return p(c)>=a.valueInHours}var r={enabled:"contactSupportLinkEnabled",disabled:"contactSupportLinkDisabled"};l()}]}})}(),function(){var a=angular.module("ssaEaClickHere",[]);a.directive("ssaEaClickHere",function(){return{restrict:"E",templateUrl:"ssaEaClickHere.html"}})}(),function(){var a=angular.module("ssaGenericButton",[]);a.directive("ssaGenericButton",function(){return{restrict:"E",replace:!0,scope:{buttonData:"="},templateUrl:"ssaGenericButtonTemplate.html",controller:["$scope",function(a){a.title=a.buttonData&&a.buttonData.title?a.buttonData.title:"",a.clickAction=a.buttonData&&a.buttonData.clickAction?a.buttonData.clickAction:angular.noop,a.style=!(!a.buttonData||!a.buttonData.style)&&a.buttonData.style}]}})}(),function(){var a=angular.module("ssaIcon",[]);a.directive("ssaIcon",function(){return{restrict:"E",replace:!0,scope:{appData:"=",componentCustomConfig:"="},templateUrl:"ssaIconTemplate.html",controller:["$scope","loadImageAssetService",function(a,b){a.imageVisibilityHidden=!(a.appData.hasOwnProperty("icon")&&""!==a.appData.icon&&null!==a.appData.icon);var c=function(){a.$apply(function(){a.componentCustomConfig&&(a.imageVisibilityHidden=!!a.componentCustomConfig.hideIconIfFailed,"function"==typeof a.componentCustomConfig.onIconFailedCallback&&a.componentCustomConfig.onIconFailedCallback())})};a.componentCustomConfig&&a.componentCustomConfig.hasOwnProperty("validateIcon")&&b(a.appData.icon,null,c)}]}})}(),function(){var a=angular.module("ssaInstallButton",[]);a.directive("ssaInstallButton",function(){return{restrict:"E",replace:!0,scope:{postActionFunction:"=",postActionTitle:"=",isWiggle:"="},templateUrl:"ssaInstallButtonTemplate.html",controller:["$scope",function(a){a.postActionFunction=a.postActionFunction||angular.noop}]}})}(),function(){var a=angular.module("ssaInstallClickable",[]);a.directive("ssaInstallClickable",function(){return{restrict:"E",scope:{postActionFunction:"=",postActionTitle:"=",appData:"=",componentCustomConfig:"=",isWiggle:"=",textClampConfig:"="},templateUrl:function(a,b){return b.tpl+".html"},controller:["$scope",function(a){a.postActionFunction=a.postActionFunction||angular.noop,a.appData.starsImageName=a.appData.starsImageName||"stars-bright-background"}]}})}(),function(){function a(a){function b(){d=angular.element(document.getElementsByClassName("spinnerAnimationContainer")),d.removeClass("absPosElement")}function c(){a.callOnVisible(b)}var d;c()}a.$inject=["SSA_Utils"];var b=angular.module("ssaLoaderAnimation",[]);b.directive("ssaLoaderAnimation",function(){var a={restrict:"E",templateUrl:"ssaLoaderAnimationTemplate.html",scope:{},bindToController:{},controllerAs:"vm",controller:"ssaLoaderAnimationController"};return a}),b.controller("ssaLoaderAnimationController",a)}(),function(){var a=angular.module("ssaLogo",[]);a.directive("ssaLogo",function(){return{restrict:"E",scope:{deviceType:"="},replace:!0,templateUrl:"ssaLogoTemplate.html",controller:["$scope",function(a){}]}})}(),function(){var a=angular.module("ssaModal",[]);a.directive("ssaModal",["modalService","$timeout","$window","adapter","productSettingsService","OW_DESIGN_NAMES",function(a,b,c,d,e,f){return{restrict:"E",scope:!0,templateUrl:"modalTemplate.html",controller:["$scope","$rootScope","$timeout","$window",function(b,c,e,g){function h(){e(function(){var a=document.getElementsByClassName("modalBody"),c=document.getElementsByClassName("bodyText"),d=document.getElementsByClassName("scrollableContainer"),e=d&&d[0]?d[0]:null,f=a&&a[0]?a[0]:null;if(f){g.addEventListener("resize",function(){b.wrapperHeight=f.clientHeight?f.clientHeight:0,b.$apply(b.wrapperHeight)}),angular.element(a).on("scroll",function(a){i(a.target,b.wrapperHeight)}),angular.element(d).on("scroll",function(a){i(a.target,e.clientHeight)});var h=c?c[0]:null,j=h?h.clientHeight:0;b.wrapperHeight=f.clientHeight?f.clientHeight:0,b.showScrollableIcon=j-b.wrapperHeight>0}})}function i(a,c){b.showScrollableIcon=a.scrollTop+c!=a.scrollHeight,b.$apply(b.showScrollableIcon)}function j(a){d.call({method:"SetForceClose",arguments:{isEnable:a}})}function k(a){b.shouldShowInstallButton=!a.hasOwnProperty("shouldShowInstallButton")||a.shouldShowInstallButton,b.shouldShowMissingCoinsLink=!!a.hasOwnProperty("navigationButtonData"),b.shouldShowCloseButton=!a.hasOwnProperty("shouldShowCloseButton")||a.shouldShowCloseButton,b.showContactSupportLink=!!a.hasOwnProperty("showContactSupportLink")&&a.showContactSupportLink}function l(){c.$on("ssaModal.openModal",function(a,c,d,e,g,i,l){b.modalArgs=g,b.showOverlay=0!=i||i,b.size=e||"",b.customClass=l||"",b.contentTemplateUrl=c||"modalDefaultContent.html",b.mode=d||m,b.designName=f["default"],k(g),h(),j(!1)}),c.$on("ssaModal.closeModal",function(){b.showOverlay=!1,b.modalArgs=null,j(!0)})}b.modal=a.modal,b.contentTemplateUrl="";var m="phone";l()}]}}]).filter("trustAsHTML",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}])}();var ssaMuteButton=angular.module("ssaMuteButton",[]);ssaMuteButton.directive("ssaMuteButton",["analytics","VIDEO_EVENTS",function(a,b){return{templateUrl:"muteButton.html",restrict:"E",scope:{muteBtnIcon:"=",videoId:"="},link:function(c,d,e){c.muteClassName="sprite-images-ssaMuteBtnImg",c.unMuteClassName="sprite-images-ssaUnmuteBtnImg",c.muteClick=function(d){d&&(d.stopPropagation(),d.preventDefault()),c.muteBtnIcon=!c.muteBtnIcon,c.$emit("MuteButton.Clicked",{shouldMute:c.muteBtnIcon}),a.trackEvent(b.clickVideoSound,{isMute:c.muteBtnIcon})}}}}]);var ssaNotification=angular.module("ssaNotification",[]);ssaNotification.controller("ssaNotificationController",["$scope","AdUnitDelivery",function(a,b){a.textConfig={minFontSize:"12",notificationData:a.notificationData};var c=a.defaultColor||"#efefef",d=a.defaultOverlayColor||"#000",e={};a.notificationColor=a.notificationData&&a.notificationData.textColor&&""!==a.notificationData.textColor?a.notificationData.textColor:c,a.notificationBGColor=a.notificationData&&a.notificationData.backgroundColor&&""!==a.notificationData.backgroundColor?a.notificationData.backgroundColor:d;var f=[4,34,5,35],g=function(a){var c=b.service,d=c().getTemplateId();return!(f.indexOf(d)!==-1&&"after"===a)};a.updateNotificationDataText=function(){a.notificationData&&(e={"default":a.notificationData.duringData,during:a.notificationData.duringData,after:a.notificationData.afterData})},a.notificationData&&(a.notificationData.show=!1,a.updateNotificationDataText()),a.$on("ssaNotification.show",function(b,c){c&&a.notificationData&&(a.notificationData.data="undefined"!==e[c.state]?e[c.state]:e["default"],a.notificationData.show=!!a.notificationData.data,a.notificationData.useAnimation=g(c.state))}),a.$on("ssaNotification.hide",function(){a.notificationData.show=!1})}]).directive("ssaNotification",["$timeout",function(a){var b=null;return{templateUrl:"notificationTemplate.html",restrict:"E",replace:!0,scope:{notificationData:"=",defaultColor:"@",defaultOverlayColor:"@"},link:function(c,d,e){c.$watch("notificationData",function(e,f){a.cancel(b),
null===c.notificationData||null===c.notificationData.data||""===c.notificationData.data?d.css("display","none"):d.css("display","block"),c.updateNotificationDataText&&c.updateNotificationDataText()}),c.$watch("notificationData.show",function(e,f){return a.cancel(b),null!==c.notificationData&&c.notificationData.hasOwnProperty("useAnimation")&&c.notificationData.useAnimation===!1?(d.removeClass("move-out").addClass("noAnimationNotification"),void(c.notificationData.show=!0)):void(null!==c.notificationData&&c.notificationData.hasOwnProperty("show")&&c.notificationData.show===!1?d.removeClass("move-in").addClass("move-out"):(d.removeClass("move-out").addClass("move-in"),null!==c.notificationData&&"undefined"!=typeof c.notificationData.fadeout&&null!==c.notificationData.fadeout&&0!==c.notificationData.fadeout&&(b=a(function(){c.notificationData.show=!1},1e3*c.notificationData.fadeout))))})},controller:"ssaNotificationController"}}]),function(){var a=angular.module("ssaPrivacyLink",[]);a.directive("ssaPrivacyLink",function(){return{restrict:"E",replace:!0,scope:{privacyLink:"=",privacyCircleText:"="},templateUrl:"ssaPrivacyLinkTemplate.html",controller:["$scope","$window","$timeout","productSettingsService","adapter","analytics","PRIVACY_CLICKED_EVENT",function(a,b,c,d,e,f,g){function h(){var b=d.getAdContainerInfoText();a.privacyCircleText=b,a.privacyCircleClassName=i(b)}function i(a){return a.length>1?"privacyCircleDivSmall":"privacyCircleDivDefault"}function j(){var b=a.privacyLink||d.getPrivacyLinkUrl();if(!b)return!1;b=b.replace(r,k());var c={type:"openUrl",url:b,method:"external_browser"};f.trackEvent(g),e.call({method:"ActionClick",arguments:c,callback:function(){}})}function k(){var a={},b="";try{a.bannerid=""+d.getCRID(),a.campaignid=""+d.getCID(),a.creativeid=""+d.getCreativeId(),a.opportunityid=""+d.getRequestOpportunityData().opportunityId,a.requestid=""+d.getRequestOpportunityData().requestId,a.bundleid=""+d.getBundleId(),b=btoa(JSON.stringify(a))}catch(c){}return b}function l(){return q.hasClass(o)}function m(a){a&&(a.stopPropagation(),a.preventDefault()),q.hasClass(o)||(q.removeClass(p),q.addClass(o),c(function(){q.removeClass(o),q.addClass(p)},n))}var n=2e3,o="showPrivacyLinkAnim",p="hidePrivacyLinkAnim",q=angular.element(document.querySelector(".privacyFlach")),r="[data]";h(),a.handlePrivacyLink=function(a){a&&(a.stopPropagation(),a.preventDefault()),l()?j():m()}}]}})}(),function(){var a=angular.module("ssaRate",[]);a.directive("ssaRate",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"ssaRateTemplate.html",controller:["$scope",function(a){var b;a.generateBigRandomNumber=function(){if(!b){var a=999999,c=399999*Math.random();b=a-c}return b}}]}})}(),function(){var a=angular.module("ssaRefreshButton",[]);a.directive("ssaRefreshButton",function(){return{restrict:"E",replace:!0,scope:{refreshActionFunction:"=",refreshButtonTitle:"="},templateUrl:"ssaRefreshButtonTemplate.html",controller:["$scope",function(a){a.refreshActionFunction=a.refreshActionFunction||angular.noop}]}})}();var ssaReplayButton=angular.module("ssaReplayButton",[]);ssaReplayButton.directive("ssaReplayButton",["LogService","analytics","VIDEO_EVENTS",function(a,b,c){return{templateUrl:"replayButton.html",restrict:"E",scope:{clickAction:"="},link:function(d,e,f){function g(e){e.stopPropagation(),a.log("replay button clicked",a.logLevel.trace),b.trackEvent(c.clickReplay),"function"==typeof d.clickAction&&d.clickAction()}d.replay=g}}}]);var ssaSkipIn=angular.module("ssaSkipIn",[]);ssaSkipIn.directive("ssaSkipIn",function(){var a,b;return{templateUrl:"skipInTemplate.html",restrict:"E",scope:{skipInData:"=",closeByAdunit:"=",layoutShowsPrivacyLink:"="},controller:["$scope","SSA_Utils","adapter","placeholderManager",function(c,d,e,f){function g(){e.call({method:"SetForceClose",arguments:{isEnable:!1}})}function h(){c.skipInData&&(a=c.skipInData.skipInTime,b=c.skipInData.skipInText,a&&a>0?(d.addHandlerToAdVisible(g),l(b)):c.hideCloseButton=!1)}function i(){c.skipInClass="skipInFadeIn",c.skipInRemainingTime=f.replacePlaceholderWithMap(b,{"{{skip-in}}":a})}function j(a){c.skipInData.isSkipButtonFlow||(c.skipInData.allowBackButton=!0),a&&(c.skipInClass="skipInFadeOut"),c.xButtonClass="skipInFadeIn"}function k(b){b&&i(),a--,0===a&&(j(b),c.$emit("skipIn.skipInTimeEnded"))}function l(b){c.skipInClass="invisible",c.xButtonClass="invisible",c.skipInData.allowBackButton=!1;var d=c.$on("SkipIn.Tick",function(c,e){isNaN(parseInt(e))||(a>0?k(b):d())})}h()}]}}),function(){function a(a){return{restrict:"E",scope:{socialData:"=",onClick:"=",uxTemplate:"="},templateUrl:"socialButtonsTemplate.html",link:function(b,c,d){function e(){var b=19,d="dropShadowRound",e="borderRadiusRound",f=a.getDeviceData(),g=f.apiLevel?f.apiLevel:f.osVersion;"android"===f.os&&g<=b?c.addClass(e):c.addClass(d)}function f(){var a=b.uxTemplate.getTemplateId();a===g&&e()}var g=5;f()}}}a.$inject=["productSettingsService"];var b=angular.module("ssaSocialButtons",[]);b.directive("ssaSocialButtons",a)}();var ssaSpinner=angular.module("ssaSpinner",[]);ssaSpinner.directive("ssaSpinner",["LogService",function(a){return{scope:!1,templateUrl:"spinnerTemplate.html",restrict:"E",controller:["$scope",function(b){b.$on("ssaSpinner.show",function(c,d){b.showSpinner=!0,b.showOverlay=d&&d.showOverlay,a.log("Show Spinner",a.logLevel.trace)}),b.$on("ssaSpinner.hide",function(){b.showSpinner=!1,a.log("Hide Spinner",a.logLevel.trace)}),b.closeData={hideClose:!0}}]}}]);var ssaStars=angular.module("ssaStars",[]);ssaStars.directive("ssaStars",[function(){return{restrict:"EA",scope:{starsData:"="},link:function(a,b,c){var d=a.starsData.numOfStars;d%1===0?d+="-0":d=d.toString().replace(".","-"),b.addClass("sprite-images-"+c.starsImageName+"-"+d)}}}]),function(){var a=angular.module("ssaStatusBar",[]);a.directive("ssaStatusBar",function(){return{restrict:"E",replace:!0,scope:{progressBarConfig:"="},templateUrl:"ssaStatusBarTemplate.html",controller:["$scope",function(a){var b={usingAnimation:!0,color:"red",progressValue:"almostFull"};a.barConfig=a.progressBarConfig||b}]}})}();var ssaProgressBar=angular.module("ssaProgressBar",[]);ssaProgressBar.directive("ssaProgressBar",["$window",function(a){return{templateUrl:"progressBarTemplate.html",link:function(b,c,d){function e(){j(),l()}function f(){if(b.timerData){t=b.timerData.timeUntilTimer,b.timerData.countTo=b.timerData.completionCountdown,g(),v=p.getContext("2d"),w=q.getContext("2d"),n=x(v),o=x(w),1.5===n&&(n=1),1.5===o&&(o=1),v.setTransform(n,0,0,n,0,0),w.setTransform(o,0,0,o,0,0),h(),i(b);b.$watch(function(a){return a.timerData.showTimer},function(a,c){"undefined"!=typeof a&&c!==a&&i(b)})}}function g(){p=document.getElementsByClassName("timer-canvas")[0],q=document.getElementsByClassName("progress-bar-canvas")[0],r=document.getElementsByClassName("sprite-images-ssaRisGift")[0],s=document.getElementsByClassName("sprite-images-ssaRisGiftBlue")[0]}function h(){p.style.zIndex=15,r.style.zIndex=15,s.style.zIndex=15,y.timerColor="rgba(0,0,0,1)",y.textColor="rgba(255,255,255,1)",y.arcColor="rgba(16,198,227,1)",b.timerData.isPreCache?b.timerData.isSecured?y.fontFace="eas_briemsemibold_preCache_secured":y.fontFace="eas_briemsemibold_preCache":y.fontFace="eas_briemsemibold_nonPreCache",angular.element(a.document.querySelector(".fontLoader")).css({"font-family":y.fontFace})}function i(a){y.min=0,y.sec=a.timerData.countTo,y.inc=360/a.timerData.countTo,y.show=a.timerData.showTimer,z.colored=0,z.counter=0,z.watchedColor="rgba(16,198,227,1)",z.unwatchedColor="rgba(255,255,255,1)",z.time=a.timerData.countTo}function j(){var a=p.clientWidth,b=p.width=a*n,c=p.height=a*n;p.style.width=a+"px",p.style.height=a+"px",v.beginPath(),v.lineWidth=2*n,v.fillStyle=y.timerColor,v.strokeStyle=y.arcColor,v.arc(b/2,c/2,12*n,0,2*Math.PI,!1),v.fill(),v.stroke(),v.closePath()}function k(a){var b=u||document.documentElement.clientWidth-2*A,c=q.clientHeight,d=q.width=b*o;q.height=c*o;var e=d*a/(z.time-1);z.colored=e,z.uncolored=d-z.colored,1===o&&(c=q.height/2),q.style.left=A+"px",q.style.right=b-A+"px",w.fillStyle=z.unwatchedColor,w.fillRect(z.colored,0,z.uncolored,c),w.fillStyle=z.watchedColor,w.fillRect(0,0,z.colored,c)}function l(){if(0!==y.min||0!==y.sec){v.fillStyle=y.textColor;var a=12*n+"px "+y.fontFace;v.font=a,y.sec>99?(a=10*n+"px "+y.fontFace,v.font=a,v.fillText(y.sec,6*n+1,19*n)):y.sec<20&&y.sec>9?v.fillText(y.sec,8*n,19*n):y.sec<10?v.fillText("0"+y.sec,8*n+1,19*n):v.fillText(y.sec,8*n+1,19*n),y.sec<=0&&y.min>0?(y.min--,y.sec=59):y.sec--}}function m(){u=document.documentElement.clientWidth-2*A,k()}var n,o,p,q,r,s,t,u,v,w,x=function(b){var c,d;return c=a.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,c/d},y={},z={},A=36;f(),b.$on("Component.PartialTick",function(a,c){if(!isNaN(parseInt(c))&&(y.show===!0||"true"===y.show)){if(t>0)return;b.timerData.countTo>=1?k(c):(k(z.time-1),b.replayMode||(angular.element(r).removeClass("timerFadeIn").addClass("invisible"),angular.element(s).addClass("rewarded")))}}),b.$on("Component.Tick",function(a,c){isNaN(parseInt(c))||y.show!==!0&&"true"!==y.show||(t>0?t--:b.timerData.countTo>=0&&(angular.element(p).addClass("timerFadeIn"),angular.element(q).addClass("timerFadeIn"),b.replayMode?angular.element(s).addClass("timerFadeIn"):angular.element(r).addClass("timerFadeIn"),e(),0===b.timerData.countTo&&(b.$emit("TimerUI.Completed",""),y.sec=0,y.min=0,angular.element(p).removeClass("timerFadeIn").addClass("timerFadeOut"),angular.element(q).removeClass("timerFadeIn").addClass("timerFadeOut"),b.replayMode&&angular.element(s).removeClass("timerFadeIn").addClass("timerFadeOut")),b.timerData.countTo--))}),a.addEventListener("resize",m)}}}]);var ssaTimeProgress=angular.module("ssaTimeProgress",["ssaProgressBar","ssaTimer"]);ssaTimeProgress.directive("ssaTimeProgress",["$compile",function(a){return{replace:!0,scope:{timerData:"=",replayMode:"="},link:function(b,c,d){var e="<div "+b.timerData.timerClass+"></div>",f=angular.element(a(e)(b));c.replaceWith(f)}}}]);var ssaTimer=angular.module("ssaTimer",[]);ssaTimer.directive("ssaTimer",["$window",function(a){var b,c,d,e,f=function(b){var c,d;return c=a.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,c/d},g={};return{templateUrl:"timerTemplate.html",link:function(a,h,i){function j(){l(),m()}function k(){if(a.timerData){d=a.timerData.timeUntilTimer,a.timerData.countTo=a.timerData.completionCountdown,c=h.find("canvas")[0],e=c.getContext("2d"),b=f(e),1.5===b&&(b=1),e.setTransform(b,0,0,b,0,0),g.timerColor="rgba(255,255,255,0.1)",g.textColor="rgba(255,255,255,0.8)",g.arcColor="rgba(255,255,255,0.8)",g.fontFace="helvetica light, roboto light, arial, sans-serif",n(a);a.$watch(function(a){return a.timerData.showTimer},function(b,c){"undefined"!=typeof b&&c!==b&&n(a)})}}function l(){var a=c.clientWidth,d=c.width=a*b,f=c.height=a*b;c.style.width=a+"px",c.style.height=a+"px",e.beginPath(),e.lineWidth=2*b,e.fillStyle=g.timerColor,e.arc(d/2,f/2,12*b,0,2*Math.PI,!1),e.fill(),e.closePath(),e.beginPath(),e.lineWidth=2*b,e.strokeStyle=g.arcColor,e.arc(d/2,f/2,12*b,-90*Math.PI/180,Math.PI/180*g.angle,!1),e.stroke(),e.closePath()}function m(){if(0!==g.min||0!==g.sec){e.fillStyle=g.textColor;var a=12*b+"px "+g.fontFace;e.font=a,g.sec>99?(a=10*b+"px "+g.fontFace,e.font=a,e.fillText(g.sec,6*b+1,19*b)):g.sec<20&&g.sec>9?e.fillText(g.sec,8*b,19*b):g.sec<10?e.fillText("0"+g.sec,8*b+1,19*b):e.fillText(g.sec,8*b+1,19*b),g.sec<=0&&g.min>0?(g.min--,g.sec=59,g.angle-=g.inc):(g.angle-=g.inc,g.sec--)}}function n(a){g.min=0,g.sec=a.timerData.countTo,g.inc=360/a.timerData.countTo,g.angle=270,g.show=a.timerData.showTimer}k(),a.$on("Component.Tick",function(b,e){isNaN(parseInt(e))||g.show!==!0&&"true"!==g.show||(d>0?d--:a.timerData.countTo>=0&&(angular.element(c).addClass("timerFadeIn"),j(),0===a.timerData.countTo&&(a.$emit("TimerUI.Completed",""),g.sec=0,g.min=0,g.angle=-90,angular.element(c).removeClass("timerFadeIn").addClass("timerFadeOut")),a.timerData.countTo--))})}}}]);var ssaInternalVideo=angular.module("ssaVideoTest.internal",[]);ssaInternalVideo.directive("ssaInternalVideoPlayerTest",["$window","$timeout","LogService","SSA_Utils","ADUNIT_EVENTS","productSettingsService","analytics","adapter",function(a,b,c,d,e,f,g,h){return{templateUrl:"internal360PlayerTemplate.html",replace:!0,restrict:"E",link:function(f,i,j){function k(a){var b=0,c=function(a){l(a[b],function(){b++,b<a.length?c(a):n()})};c(a)}function l(a,b){var c=document.createElement("script");c.onload=function(){b()},c.onerror=function(){f.$emit("Video.LoadedError","video loaded error","test error loading script")},c.src=a,i.append(c)}function m(b){var c=a.document.createElement("link");c.rel="stylesheet",c.type="text/css",c.href=b,a.document.getElementsByTagName("head")[0].appendChild(c)}function n(){f.$emit("Video.Loaded","video loaded"),c.log(I+'all scripts loaded"',c.logLevel.trace),H||(H=!0)}function o(a){f.$evalAsync(function(){f.$emit("Video.TimeTick",a)})}function p(){return f.videoData.hasOwnProperty("clickThrough")&&(o("click"),f.videoData.clickThrough&&("ended"!==J&&N[0].pause(),h.call({method:"ActionClick",arguments:{type:"openUrl",url:f.videoData.clickThrough,method:"external_browser"}}))),!1}function q(){return f.videoData.hasOwnProperty("clickThrough")&&f.videoData.clickThrough||K!==!0&&b(function(){t()},100),!1}function r(){var a=document.getElementById("overlayContent");a.style.top=Math.max(0,(window.outerHeight-a.clientHeight)/2)+"px",a.style.left=Math.max(0,(window.outerWidth-a.clientWidth)/2)+"px",a.style.visibility="visible"}function s(){var a=document.getElementById("overlay"),b=document.getElementById("overlayContent");a.style.display="none",b.style.display="none",document.getElementById("watermark360").style.visibility="visible"}function t(){if(c.log("PlayVideo method - playVideoCalled="+V,c.logLevel.trace),!V){if(r(),!H)return void f.$emit("ssaSpinner.show","");V=!0,f.$apply(function(){u(a,a.videojs)})}}function u(a,b){f.$emit("ssaSpinner.hide","");var c=b("videojs-panorama-player",{},function(){a.addEventListener("resize",function(){var a=c.getChild("Canvas");a&&a.handleResize()})}),d=document.getElementById("videojs-panorama-player"),e=d.offsetWidth,h=d.offsetHeight;c.width(e),c.height(h),c.panorama({clickToToggle:!1,autoMobileOrientation:!0,initFov:100,showNotice:!1,callback:function(){c.play(),c.pause(),setTimeout(function(){c.play();var a=F();a||W||(W=!0,g.trackEvent(U.error))},600)}})}function v(){N[0].pause()}function w(){b(t,50)}function x(){s()}function y(a){f.$emit("Video.BufferEnd",{success:a})}function z(){Q<=T?(t(),Q++):(v(),y(!1))}function A(){d.addHandlerToAdVisible(w),y(!0),O.currentTime=0,P=!1}function B(){return!1}function C(){f.isReplayVideo&&w(),!f.isPreCache&&!f.isPreload||d.isAdUnitVisible()?w():d.addHandlerToAdVisible(w)}function D(){b(function(){R=(O.buffered.end(0)/O.duration*100).toFixed(2),c.log("setCheckBuffer loaded "+R+"% bufferCount: "+Q,c.logLevel.trace),R>=f.videoData.videoBufferPercentage?(c.log("setCheckBuffer - we have required buffer",c.logLevel.trace),A()):z()},S)}function E(){d.callOnVisible(function(){G=!0,t()}),P?w():C()}function F(a){if(window.WebGLRenderingContext){for(var b=document.createElement("canvas"),c=["webgl","experimental-webgl","moz-webgl","webkit-3d"],d=!1,e=0;e<4;e++)try{if(d=b.getContext(c[e]),d&&"function"==typeof d.getParameter)return!a||{name:c[e],gl:d}}catch(f){}return!1}return!1}var G,H=!1,I="Video JS event : ",J=null,K=!1,L=-1,M=!1,N=i.find("video"),O=N[0],P=B(),Q=0,R=0,S=100,T=1200,U={error:{name:"360_WebGl_error",id:116}},V=!1,W=!1;m("https://networksdk.ssacdn.com/test/360/dist/video.js/video-js.css"),m("https://networksdk.ssacdn.com/test/360/dist/videojs-panorama.css");var X=["https://networksdk.ssacdn.com/test/360/dist/video.js/video.js","https://networksdk.ssacdn.com/test/360/dist/three.js/three.js","https://networksdk.ssacdn.com/test/360/dist/videojs-panorama.v5.js"];k(X),N.bind("ended",function(){if(0===N[0].currentTime)return void c.log(I+"ended returned (time = 0)",c.logLevel.trace);b(function(){f.$emit("ssaSpinner.hide","")},0),J="ended",K=!0,c.log(I+"ended",c.logLevel.trace);var a={type:"internal",videoDuration:f.videoData.videoTime||f.completionCountdown,isReplayVideo:f.isReplayVideo};H=!1,f.$emit("Video.Ended",a)}),N.bind("error",function(a){c.log(I+"error: "+JSON.stringify(a),c.logLevel.trace)}),N.bind("abort",function(){c.log(I+"abort",c.logLevel.trace)}),N.bind("stalled",function(){c.log(I+"stalled",c.logLevel.trace)}),N.bind("loadeddata",function(){J="loadstart"}),N.bind("loadstart",function(){c.log("Video: event - loadstart ",c.logLevel.trace),P&&(f.$emit("Video.BufferStart","internal"),z())}),N.bind("canplay",function(){J="canplay",c.log(I+"canplay",c.logLevel.trace)}),N.bind("pause",function(){if(!P){if(N[0].currentTime===N[0].duration||"ended"===J||K===!0)return void c.log(I+"pause returned",c.logLevel.trace);J="pause",c.log(I+"pause",c.logLevel.trace),f.$emit("Video.Paused","internal")}}),N.bind("waiting",function(){J="waiting",c.log(I+"waiting",c.logLevel.trace)}),N.bind("seeking",function(){c.log(I+"seeking",c.logLevel.trace)}),N.bind("fullscreenchange",function(){c.log(I+"fullscreenchange",c.logLevel.trace)}),N.bind("playing",function(){P?(v(),D()):(J="playing",f.$emit("Video.Playing","playing"),M||(M=!0,f.$emit("Video.Started",{videoDuration:N[0].duration||0}),c.log("Internal Video: event - started playing",c.logLevel.debug),x()),c.log("Internal Video: event - playing: |"+N[0].currentTime,c.logLevel.debug))}),N.bind("click",q),N.bind("timeupdate",function(){var a=parseInt(N[0].currentTime);N[0].currentTime>0&&(L===-1&&N.bind("touchend",function(a){return c.log("internal video event: touchstart",c.logLevel.debug),a.stopPropagation(),a.preventDefault(),p(),!1}),a>L&&(L=a,o(a)))}),f.$on("AdController.viewableChange",function(a,d){if(d&&"object"==typeof d){c.log("AdController.viewableChange: "+JSON.stringify(d),c.logLevel.trace),G=d.isViewable;var e=!0;d.hasOwnProperty("webview")&&(e="main"===d.webview),"true"!==G&&G!==!0||!e?"false"!==G&&G!==!1||!e||"android"===f.deviceDetails.os&&N.css("display","none"):("android"===f.deviceDetails.os&&N.css("display","block"),"ended"!==J&&null!==J&&"loadstart"!==J&&K===!1?b(function(){c.log("AdController resume event received (internal video).",c.logLevel.debug),H&&"canplay"===J?t():H&&"pause"===J&&N[0].play()},200):"ended"!==J&&K!==!0||(N[0].currentTime-=1))}}),f.$on("AdController.deviceStatusChanged",function(a,d){c.log("AdController event received in internal video: "+JSON.stringify(d),c.logLevel.trace),!angular.isDefined(d.earphonesConnected)||"false"!==d.earphonesConnected&&d.earphonesConnected!==!1||!G||K||b(function(){t()},100)}),f.$on("AdController.Play",function(a,b){c.log("AdController event received (internal video)",c.logLevel.debug),t()}),f.$on("AdController.Pause",function(a,b){c.log("internal video event triggered: pause",c.logLevel.trace),N[0].pause()}),f.$on("AdController.Mute",function(a,b){c.log("internal video event triggered: mute ="+b,c.logLevel.trace),N.prop("muted",b)}),f.$on(e.VIDEO_STOP,function(){c.log("Internal Video: video stop event",c.logLevel.trace),v()}),f.$on("$destroy",function(){}),E()},controller:["$scope","$sce",function(a,b){function c(a){var b=a.substring(a.lastIndexOf("/")+1);return"https://networksdk.ssacdn.com/test/360/assets/"+b}var d=a.videoData.videoSource;a.videoDataUrlMp4=b.trustAsResourceUrl(c(d.videoformat_mp4)),a.$on("$destroy",function(){a.$emit("ssaSpinner.hide","")})}]}}]),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){W=a.videoData.videoSource.mraid||a.videoData.videoSource.html,T=e.find("iframe")[0],S=T.contentWindow,g.injectExternalAPIScript(T,a.videoData.videoSource.htmlURL,D,E),X=o.initModel().getDapiModel(),Y=o.initModel().getMraidModel(),L(),M(),a.$on("frame."+v.backButtonPressedEvent,O),a.$on("ssaExternalPlayerProgress.videoEnded",K),a.$on("ssaExternalUnifiedComponent.externalAPIConnected",I),U=q.init({adFrame:T,element:S,callbacks:$,generalCallbacks:_,adData:{closeData:a.closeData,isVpaid:H()}}),V=p.init({adFrame:T,element:S,callbacks:Z.callbacks,thirdPartyLibsConfigs:Z.thirdPartyLibsConfigs,duration:a.videoData.videoTime,isCloseButtonVisible:!a.hideClose})}function D(){}function E(){G()}function F(){a.$emit("Video.Loaded","video loaded")}function G(){a.$emit("Video.LoadedError","Failed to inject external API script")}function H(){1378027==k.getCRID()||ea.test(W)}function I(a,b){b&&(b.type==l.mraid&&(ca=!0),b.type==l.dapi&&(da=!0),ca&&da&&F())}function J(){ba||(ba=!0,r.sendMessage({name:s.adRewarded,data:X.getState()},S,w),a.$emit("ssaIncentVideo.externalAd",{action:"reward"}),K())}function K(){aa||(aa=!0,J(),a.$emit("Video.Ended",{type:"external",videoDuration:a.timerData.completionCountdown,isReplayVideo:a.isReplayVideo}))}function L(){_={vpaidLoaded:function(a){F()},vpaidLoadedError:function(a){G(a&&a.errMsg||"vpaidLoadedError")},moatStartTracking:function(){A.notifyStartTracking()},moatStopTracking:function(){A.notifyStopTracking()},omidStartSession:function(a){B.startSession(a)},omidFinishSession:function(){B.finishSession()},omidImpressionOccurred:function(){B.impressionOccurred()}},$={connected:function(){a.$emit("ssaExternalUnifiedComponent.externalAPIConnected",{type:l.mraid})},getMraidData:function(){r.sendMessage({name:y.updateMraidData,data:Y.getDataObject()},S,x)},open:function(a){return Y.isInLoadingState()?void r.sendError("Call to open in loading state","open"):void R(a)},openStoreUrl:function(){return Y.isInLoadingState()?void r.sendError("Call to openStoreUrl in loading state","openStoreUrl"):void P().call(null,arguments)},expand:function(a){if(j.trackEvent(u.expand,{generalMessage:a||""}),Y.isInLoadingState())return void r.sendError("Call to expand in loading state","expand")},setExpandProperties:function(a){j.trackEvent(u.setExpandProperties,{generalMessage:JSON.stringify(a)||""}),"object"==typeof a&&(delete a.isModal,angular.extend(Y.getExpandProperties(),a),"undefined"!=typeof a.useCustomClose&&this.useCustomClose(a.useCustomClose),r.sendMessage({name:y.updateMraidData,data:Y.getDataObject()},S,x))},useCustomClose:function(b){"boolean"!=typeof b||Y.notAllowedToUseCustomClose()||(a.usedCustomClose=b,a.$apply())},close:function(){return Y.isInLoadingState()?void r.sendError("Call to close in loading state","close"):(Y.updateCurrentState(Y.getStates().hidden),r.sendMessage({name:y.updateMraidData,data:Y.getDataObject()},S,x),r.sendMessage({name:y.stateChange,data:Y.getCurrentState()},S,x),a.setCloseState(t.close),void a.closeClick())},setResizeProperties:function(a){j.trackEvent(u.setResizeProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(Y.getResizeProperties(),a),r.sendMessage({name:y.updateMraidData,data:Y.getDataObject()},S,x)},resize:function(){if(j.trackEvent(u.resize),Y.isInLoadingState())return void r.sendError("Call to resize in loading state","resize")},setOrientationProperties:function(a){j.trackEvent(u.setOrientationProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(Y.getOrientationProperties(),a),r.sendMessage({name:y.updateMraidData,data:Y.getDataObject()},S,x)},supports:function(a){j.trackEvent(u.supports,{generalMessage:a||""})},log:function(a){j.trackEvent(u.log,{generalMessage:a})},reward:J}}function M(){Z={thirdPartyLibsConfigs:{supportAF:a.postAction.shouldSupportAF()},callbacks:{connected:function(){a.$emit("ssaExternalUnifiedComponent.externalAPIConnected",{type:l.dapi})},open:function(a){R(a.url,a.callback)},openStoreUrl:P.call(null,arguments),close:function(){return h.isStoreKitVisible()?(j.trackEvent(m.closeAdBlockedStoreKit,{}),void r.sendMessage({name:s.failToCloseAd,data:z.storeKitVisible},S,w)):(X.updateState(X.getStates().hidden),X.updateViewability(!1),r.sendMessage({name:s.stateChange,data:X.getState()},S,w),r.sendMessage({name:s.updateDapiData,data:X.getDataObject()},S,w),void a.closeClick())},replay:function(){return!0},reward:J,useCustomClose:function(){return!0},interaction:function(b){a.postAction.updateEngagementUrlWithPlacement(k.getInteractionAlias(!0))},getDapiData:function(){r.sendMessage({name:s.getDeviceData,data:X.getDeviceData()},S,w)}}}}function N(){a.postAction.setAFToken(arguments[0].token?arguments[0].token:null),c.call({method:"AdClicked",arguments:{}}),a.postAction.isUrlExist()&&n.handlePostActionClick(a.postAction,a.hybrid,Q,Q)}function O(b,c){a.usedCustomClose||c&&c.parentBackAction&&c.parentBackAction()}function P(){return f.getDebounceFunction(N,k.getDebounceClickConfig())}function Q(){}function R(a,b){a&&c.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"external_browser"},callback:b})}var S,T,U,V,W,X,Y,Z,$,_,aa,ba=!1,ca=!1,da=!1,ea=/ironSrc vpaid hack/;a.$on("$destroy",function(){U.destroy(),V.destroy()}),C()}a.$inject=["$scope","$timeout","adapter","$rootScope","$element","SSA_Utils","externalScriptsService","storeKitService","EXTERNAL_ANALYTICS_CATEGORIES","analytics","productSettingsService","EXTERNAL_API_TYPE","GENERAL_EVENTS","endCardService","externalDataService","dapiService","mraidService","iframeMessageService","DAPI_CONNECTION_EVENTS","CLOSE_BUTTON_STATES","MRAID_ANALYTICS_CATEGORIES","BACK_BUTTON_EVENTS","DAPI_MSG_PREFIXES","MRAID_MSG_PREFIXES","MRAID_COMMUNICATION_EVENTS","CLOSE_FAIL_REASON","moatService","omidService"];var b=angular.module("ssaVideo.externalUnified",[]);b.directive("ssaExternalUnifiedVideoPlayer",function(){var a={templateUrl:"externalUnifiedPlayerTemplate.html",replace:!0,restrict:"E",controller:"ssaExternalUnifiedController"};return a}),b.controller("ssaExternalUnifiedController",a)}(),function(){var a=angular.module("ssaVideo.external",[]);a.directive("ssaExternalVideoPlayer",["$interval","$rootScope","analytics","CLOSE_FAIL_REASON","adUnitObfuscationService","GENERAL_EVENTS","externalDataService","$sce","DAPI_MSG_PREFIXES","DAPI_CONNECTION_EVENTS","iframeMessageService","LogService","SSA_Utils","dapiService","adapter","endCardService","productSettingsService","storeKitService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return{templateUrl:"externalPlayerTemplate.html",replace:!0,restrict:"E",link:function(a,b,h){function s(){a.postAction.setAFToken(arguments[0].token?arguments[0].token:null),o.call({method:"AdClicked",arguments:{}}),a.postAction.isUrlExist()&&p.handlePostActionClick(a.postAction,a.hybrid,t,t)}function t(){}function u(){return m.getDebounceFunction(s,q.getDebounceClickConfig())}function v(){a.postAction.updateEngagementUrlWithPlacement(q.getInteractionAlias(!0))}function w(){var c=0;e.init(a.videoData.obfuscationSettings);var d=e.getObfuscationIframe();b.append(d),d.on("load",function(){a.videoData.isUnrulyCarousel?e.inject(a.videoData.unrulyData):(y(d[0]),e.inject())}),a.$on("AdController.hideFrame",function(){c=d.css("top"),d.css({top:"100%"})}),a.$on("AdController.showFrame",function(){d.css({top:c})})}function x(){G||(G=!0,k.sendMessage({name:j.adRewarded,data:E.getState()},F,i),a.$emit("ssaIncentVideo.externalAd",{action:"reward"}),A())}function y(b){if(!D&&"contentWindow"in b){var c=document.getElementsByClassName("video-wrapper")[0];F=b.contentWindow,D=n.init({adFrame:c,element:F,callbacks:I.callbacks,thirdPartyLibsConfigs:I.thirdPartyLibsConfigs,duration:a.videoData.videoTime,isCloseButtonVisible:!a.closeData.hideClose,requestDapiUrl:!0})}}function z(){a.$emit("Video.Loaded","video loaded")}function A(){C||(C=!0,x(),a.$emit("Video.Ended",{type:"external",videoDuration:a.completionCountdown,isReplayVideo:a.isReplayVideo}))}function B(){w(),z(),a.$on("ssaExternalPlayerProgress.videoEnded",A),E=g.initModel().getDapiModel(),a.$on("$destroy",function(){D.destroy()})}var C,D,E,F,G=!1,H=function(a,b){a&&o.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"external_browser"},callback:b})},I={thirdPartyLibsConfigs:{supportAF:a.postAction.shouldSupportAF()},callbacks:{connected:function(){return!0},open:function(a){H(a.url,a.callback)},openStoreUrl:u.call(null,arguments),close:function(){return r.isStoreKitVisible()?(c.trackEvent(f.closeAdBlockedStoreKit,{}),void k.sendMessage({name:j.failToCloseAd,data:d.storeKitVisible},F,i)):(E.updateState(E.getStates().hidden),E.updateViewability(!1),k.sendMessage({name:j.stateChange,data:E.getState()},F,i),k.sendMessage({name:j.updateDapiData,data:E.getDataObject()},F,i),void a.closeClick())},replay:function(){return!0},reward:x,useCustomClose:function(a){return!0},interaction:function(a){l.log("EXTERNAL | interaction was called "+JSON.stringify(a),l.logLevel.trace),v()},getDapiData:function(){k.sendMessage({name:j.getDeviceData,data:E.getDeviceData()},F,i)}}};B()}}}])}();var ssaInternalVideo=angular.module("ssaVideo.internal",[]);ssaInternalVideo.directive("ssaInternalVideoPlayer",["$timeout","LogService","analytics","SSA_Utils","ADUNIT_EVENTS","AD_STARTED_TIMER_LENGTH","RV_ANALYTICS_CATEGORIES","OPERATING_SYSTEMS","moatService","VIDEO_EVENTS","dialogBoxService","hybridService","storeKitService","productSettingsService","AFService","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{templateUrl:"internalPlayerTemplate.html",replace:!0,restrict:"E",link:function(j,l,m){function o(){return j.deviceDetails.os===h.ios&&Math.abs(S[0].currentTime-$)>_}function q(){S[0].currentTime=Q}function r(){var a=0;S[0].duration>0&&S[0].currentTime>0&&(a=S[0].currentTime/S[0].duration*100);try{a=parseInt(a)}catch(b){a=-1}return(P||a>100)&&(a=100),a}function s(a){j.$evalAsync(function(){j.$emit("Video.TimeTick",a)})}function t(a){j.$evalAsync(function(){j.$emit("Video.PartialTimeTick",a)})}function u(){return j.videoData.hasOwnProperty("clickThrough")&&j.videoData.clickThrough||P!==!0&&a(function(){v()},100),!1}function v(){b.log("PlayVideo method",b.logLevel.trace),j.isPreCache||"playing"===O||j.$emit("ssaSpinner.show",""),j.$apply(function(){S[0].play()})}function w(){S[0].pause()}function x(){a(v,50)}function y(a){j.$emit("Video.BufferEnd",{success:a})}function z(){W<=Z?(v(),W++):(w(),y(!1))}function A(){d.addHandlerToAdVisible(x),y(!0),U.currentTime=0,V=!1}function B(){return!1}function C(){j.$emit("Video.Loaded","video loaded"),j.isReplayVideo&&x(),!j.isPreCache&&!j.isPreload||d.isAdUnitVisible()?x():d.addHandlerToAdVisible(x)}function D(){a(function(){X=(U.buffered.end(0)/U.duration*100).toFixed(2),b.log("setCheckBuffer loaded "+X+"% bufferCount: "+W,b.logLevel.trace),X>=j.videoData.videoBufferPercentage?(b.log("setCheckBuffer - we have required buffer",b.logLevel.trace),A()):z()},Y)}function E(){M=a(function(){var a=F().protocol||null;c.trackEvent(g.videoFailedToPlay,null,{generalmessage:a})},f)}function F(){var a=S[0]&&S[0].children.length>0&&S[0].children[0].src;return!!a&&G(a)}function G(a){var b=document.createElement("a");return b.href=a,{host:b.hostname,port:b.port,path:b.pathname,protocol:b.protocol}}function H(){return P===!0&&"ended"===O}function I(){N=k.init({onDialogBoxOpen:function(){H()||w()},onDialogBoxClose:function(a){H()||!a||"true"!==a.shouldResume&&a.shouldResume!==!0||v()}})}function J(){b.log("isBufferMode is "+V,b.logLevel.trace),d.callOnVisible(function(){L=!0,E()}),V?x():C(),I()}function K(){var a=j.$on("StoreKitService.StoreKitOpened",function(b,c){a(),H()||w()}),b=j.$on("StoreKitService.StoreKitClosed",function(a,c){b(),H()||v()})}var L,M,N,O=null,P=!1,Q=-1,R=!1,S=l.find("video"),T=l.find("source"),U=S[0],V=B(),W=0,X=0,Y=100,Z=1200,$=0,_=.5;j.fireClickOnVideoEndsFlag=!1,j.clickOnVideoEndsProgress=0,U.setAttribute("poster",j.videoData.transparentPoster),S.bind("ended",function(){if(0===S[0].currentTime)return void b.log("Video event (internal): ended returned (time = 0)",b.logLevel.trace);a(function(){j.$emit("ssaSpinner.hide","")},0),O="ended",P=!0,b.log("Video event (internal): ended",b.logLevel.debug),j.fireClickOnVideoEndsFlag&&(b.log("Video clicked after video ends",b.logLevel.debug),
j.videoClicked(j.clickOnVideoEndsProgress,P));var c={type:"internal",videoDuration:j.videoData.videoTime||j.completionCountdown,isReplayVideo:j.isReplayVideo};j.$emit("Video.Ended",c)}),T.bind("error",function(a){b.log("Source event (internal): error "+JSON.stringify(a)+" "+T.src,b.logLevel.trace),c.trackEvent(g.videoSourceFailed,null,{generalmessage:document.getElementById("mp4").src,rvnomoreoffersreason:"source:error"}),p.$broadcast("AdUnit.AdSourceError","")}),S.bind("error",function(a){var d=JSON.stringify(a);b.log("Video event (internal): error "+d,b.logLevel.debug),'{"isTrusted":true}'===d&&(c.trackEvent(g.videoSourceFailed,null,{generalmessage:document.getElementById("mp4").src,rvnomoreoffersreason:"video:error",callfailreason:parseInt(S[0].currentTime)}),S[0].currentTime<1&&p.$broadcast("AdUnit.AdSourceError",""))}),S.bind("abort",function(){b.log("Video event (internal): abort",b.logLevel.trace)}),S.bind("stalled",function(){b.log("Video event (internal): stalled",b.logLevel.trace)}),S.bind("loadeddata",function(){O="loadstart"}),S.bind("loadstart",function(){b.log("Video: event - loadstart ",b.logLevel.trace),V&&(j.$emit("Video.BufferStart","internal"),z())}),S.bind("canplay",function(){("pause"===O||"waiting"===O)&&S[0].currentTime>0&&v(),O="canplay",b.log("Video event (internal): canplay",b.logLevel.trace)}),S.bind("pause",function(){if(!V){if(S[0].currentTime===S[0].duration||"ended"===O||P===!0)return void b.log("Video event (internal): pause returned",b.logLevel.trace);O="pause",b.log("Video event (internal): pause",b.logLevel.trace),j.$emit("Video.Paused","internal")}}),S.bind("waiting",function(){O="waiting",b.log("internal video event: waiting",b.logLevel.trace)}),S.bind("seeking",function(){b.log("Internal Video: event - seeking",b.logLevel.trace)}),S.bind("playing",function(){j.isPreCache||a(function(){j.$emit("ssaSpinner.hide","")},0),V?(w(),D()):(O="playing",j.$emit("Video.Playing","playing"),R||(R=!0,a.cancel(M),j.$emit("Video.Started",{videoDuration:S[0].duration||0}),b.log("Internal Video: event - started playing",b.logLevel.debug)),b.log("Internal Video: event - playing: |"+S[0].currentTime,b.logLevel.debug))}),S.bind("click",u),S.bind("timeupdate",function(){var a=parseInt(S[0].currentTime);S[0].currentTime>0&&(Q===-1&&S.bind("touchend",function(a){b.log("internal video event: touchstart",b.logLevel.debug),a.stopPropagation(),j.hybrid.isHybridDisplay()||a.preventDefault();var c=r();return!j.featuresModel.isVideoClickableOnVideoEnds()||P||j.fireClickOnVideoEndsFlag||(b.log("set video click when video ends flag with progress: "+c,b.logLevel.debug),j.fireClickOnVideoEndsFlag=!0,j.clickOnVideoEndsProgress=c),j.videoClicked(c,P),!1}),t(S[0].currentTime),a-Q==1&&(Q=a,s(a)))}),S.bind("volumechange",function(){if(b.log("HTMLVideoPlayer volumechange | volume = "+S[0].volume,b.logLevel.debug),b.log("HTMLVideoPlayer volumechange | muted = "+S[0].muted,b.logLevel.debug),!n.shouldReportMOATVolumeOne()){var a=S[0].volume;j.deviceDetails.os===h.android&&(a=S[0].muted?0:1),b.log("HTMLVideoPlayer volumechange | Report to MOAT Volume = "+a,b.logLevel.debug),i.volumeChange(a)}}),j.$on("AdController.viewableChange",function(c,d){if(d&&"object"==typeof d&&(b.log("AdController.viewableChange: "+JSON.stringify(d),b.logLevel.trace),"false"!==d.isViewable&&d.isViewable!==!1||($=S[0].currentTime),!N.isDialogBoxOpen())){L=d.isViewable;var e=!0;d.hasOwnProperty("webview")&&(e="main"===d.webview),"true"!==L&&L!==!0||!e?"false"!==L&&L!==!1||!e||"android"===j.deviceDetails.os&&S.css("display","none"):(o()&&q(),j.deviceDetails.os===h.android&&S.css("display","block"),"ended"!==O&&null!==O&&"loadstart"!==O&&P===!1?a(function(){b.log("AdController resume event received (internal video).",b.logLevel.debug),S[0].play()},200):"ended"!==O&&P!==!0||(S[0].currentTime-=1))}}),j.$watch("shouldMute",function(a){S.prop("muted",!!a)}),j.$on("AdController.deviceStatusChanged",function(c,d){b.log("AdController event received in internal video: "+JSON.stringify(d),b.logLevel.trace),!angular.isDefined(d.earphonesConnected)||"false"!==d.earphonesConnected&&d.earphonesConnected!==!1||!L||P||a(function(){v()},100)}),j.$on("AdController.Play",function(a,c){b.log("AdController event received (internal video)",b.logLevel.debug),v()}),j.$on("AdController.Pause",function(a,c){b.log("internal video event triggered: pause",b.logLevel.trace),"ended"!==O&&"pause"!==O&&S[0].pause()}),j.$on("AdController.Mute",function(a,c){b.log("internal video event triggered: mute ="+c,b.logLevel.trace),S.prop("muted",c)}),j.$on(e.VIDEO_STOP,function(){b.log("Internal Video: video stop event",b.logLevel.trace),w()}),j.$on("$destroy",function(){S[0].pause(),S[0].src="",S[0].load(),N.destroy()}),j.handleStoreKit=K,J()},controller:["$scope","$sce","videoPlayerService","CLICK_ACTION","CLICK_TYPE",function(a,b,c,d,e){function f(){return!k.vastVideoClickLimit||p>=k.vastVideoClickLimit}function g(){return a.featuresModel&&a.featuresModel.isVideoClickable()||a.postAction&&a.postAction.isSmartVideoClickable()||l&&l.showHybridOnClick()}function h(b){return k.isVast?!!b||!f():a.featuresModel.isVideoClickableOnVideoEnds()?g()&&b:g()}function i(b,f){h(f)&&a.postAction.getClickActionUrl(d.VIDEO,{"{{clickType}}":e.VIDEO})&&(p++,m.isStoreKitLoaded()&&a.handleStoreKit(),l&&l.showHybridOnClick()?l.handleShowHybridOnClick():c.handleClick(a.postAction,b))}function j(){g()&&a.postAction&&a.postAction.shouldSupportAF()&&o.init()}var k=a.videoData,n=k.videoSource,p=0;a.videoDataUrlMp4=b.trustAsResourceUrl(n.videoformat_mp4),a.$on("$destroy",function(){a.$emit("ssaSpinner.hide","")}),j(),a.videoClicked=i}]}}]);var ssaVideo=angular.module("ssaVideo",["ssaVideo.internal","ssaVideo.external","ssaVideo.externalUnified","ssaVideoTest.internal"]);ssaVideo.directive("ssaVideoPlayer",["$compile","EXTERNAL_VIDEO_TYPE",function(a,b){return{restrict:"E",replace:!0,scope:{videoData:"=",deviceDetails:"=",isPreCache:"=",isReplayVideo:"=",completionCountdown:"=",isPreload:"=",closeClick:"=",setCloseState:"=",postAction:"=",hybrid:"=",featuresModel:"=",shouldMute:"=",closeData:"=",timerData:"="},link:function(b,c,d){var e="<"+b.videoData.videoType+"><"+b.videoData.videoType+">",f=angular.element(a(e)(b));c.replaceWith(f)}}}]),function(){"use strict";angular.module("AdUnit").constant("ADUNIT_EVENTS",Object.freeze({VIDEO_STOP:"videoStop"})).constant("X_BUTTON_ACTIONS",{hide:"Hide",show:"Show",showNext:"ShowNext",confirmNext:"confirmNext",moveToEndCard:"moveToEndCard",openConfirmDialog:"openConfirmDialog",buttonHidden:"buttonHidden",buttonClose:"buttonClose"}).constant("CLOSE_BUTTON_STYLES",{"default":"sprite-images-ssaCloseBtnImgDark",whiteRound:"sprite-images-ssaCloseBtnImgBright",smallX:"sprite-images-ssaSmallXButton",skipButton:"sprite-images-skipButton"}).constant("PAGINATION_ACTIONS",{next:"next",back:"back"}).constant("LAYOUT_TYPE",{partialScreen:"partialScreen",fullScreen:"fullScreen",bannerLayout:"bannerLayout"}).constant("OW_FOOTER_LAYOUT_STYLE",{customFooterMargin:"customFooterMargin"}).constant("CLOSE_BUTTON_STATES",{close:"close",confirm:"confirm",back:"back",confirmNextFrame:"confirmNextFrame",nextFrame:"nextFrame",ignore:"ignore"}).constant("PRODUCT_TYPES",{BrandConnect:"BrandConnect",RewardedVideo:"RewardedVideo",Interstitial:"Interstitial",Banner:"Banner",OfferWall:"OfferWall"}).constant("LAYOUT_CLASS",{transparentLayout:"transparentLayout","default":"default"}).constant("GENERAL_EVENTS",{adUnitException:{name:"adUnitException",id:134},emptySSAWindow:{name:"emptySSAWindow",id:207},resizeTimeout:{name:"resizeTimeout",id:208},closeAdBlockedStoreKit:{name:"closeAdBlockedStoreKit",id:202}}).constant("VIDEO_SOURCE_RESPONSE_KEYS",{html:"html",video:"videoformat_mp4",mraid:"mraid",htmlURL:"htmlURL"}).constant("VIDEO_EVENTS",{videoStarted:{name:"videoStarted",id:9},videoCompleted:{name:"videoCompleted",id:10},clickReplay:{name:"clickReplay",id:111},clickVideoSound:{name:"clickVideoSound",id:112},videoExternallyTracked:{name:"videoExternallyTracked",id:201}}).constant("HYBRID_ANALYTICS_CATEGORIES",{hybridVideoSkip:{name:"hybridVideoSkip",id:119},hybridStoreEngaged:{name:"hybridStoreEngaged",id:121}}).constant("STORE_KIT_EVENTS",{nativeEndCardFail:{name:"nativeEndCardFail",id:312}}).constant("NATIVE_END_CARD_EVENTS",{nativeEndCardOpened:{name:"nativeEndCardOpened",id:313},nativeEndCardClosed:{name:"nativeEndCardClosed",id:314},endCardDisplayed:{name:"endCardDisplayed",id:11}}).constant("OW_MODAL_EVENTS",{openIntermediate:{name:"openIntermediate",id:101},closeIntermediate:{name:"closeIntermediate",id:102},openPopup:{name:"openPopup",id:148},closePopup:{name:"closePopup",id:149},popupClick:{name:"popupClick",id:150},intermediateClick:{name:"intermediateClick",id:152},openInProgressIntermediate:{name:"openInProgressIntermediate",id:172},closeInProgressIntermediate:{name:"closeInProgressIntermediate",id:173},clickInProgressIntermediate:{name:"clickInProgressIntermediate",id:174},openPendingSupportIntermediate:{name:"openPendingSupportIntermediate",id:179},closePendingSupportIntermediate:{name:"closePendingSupportIntermediate",id:180},openDeniedIntermediate:{name:"openDeniedIntermediate",id:181},closeDeniedIntermediate:{name:"closeDeniedIntermediate",id:182},openMissingCoinsIntermediate:{name:"openMissingCoinsIntermediate",id:176},returnFromMissingCoinsToProgressIntermediate:{name:"returnFromMissingCoinsToProgressIntermediate",id:177}}).constant("COMPLETION_OFFERS_EVENTS",{showProgressTab:{name:"showProgressTab",id:166},progressTabVisible:{name:"progressTabVisible",id:167},progressOfferClicked:{name:"progressOfferClicked",id:168},showOfferwallTab:{name:"showOfferwallTab",id:169},retryButtonClicked:{name:"retryButtonClicked",id:175},progressOffersLoaded:{name:"progressOffersLoaded",id:183}}).constant("OW_ANALYTICS_CATEGORIES",{adClosed:{name:"adClosed",id:100},offerClicked:{name:"offerClicked",id:19},owLoaded:{name:"owLoaded",id:15},termsOfUse:{name:"termsOfUse",id:125},privacyPolicy:{name:"privacyPolicy",id:123},contactSupport:{name:"contactSupport",id:124},endCardDisplayed:{name:"endCardDisplayed",id:11},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},clickDownloadNow:{name:"clickDownloadNow",id:12},firstCampaignImpression:{name:"firstCampaignImpression",id:103},owPageImpression:{name:"owPageImpression",id:203},owVisible:{name:"owVisible",id:18},marqueeClicked:{name:"marqueeClicked",id:130}}).constant("RV_ANALYTICS_CATEGORIES",{engagementClickFired:{name:"engagementClickFired",id:117},failedOpenStoreWithSeamless:{name:"failedOpenStoreWithSeamless",id:132},exitBeforeStoreOpened:{name:"exitBeforeStoreOpened",id:133},seamlessSuccess:{name:"seamlessSuccess",id:131},handlePostActionClick:{name:"handlePostActionClick",id:213},videoClicked:{name:"videoClicked",id:110},videoFailedToPlay:{name:"videoFailedToPlay",id:204},videoSourceFailed:{name:"videoSourceFailed",id:266}}).constant("IS_ANALYTICS_CATEGORIES",{timeFromStartedToCompleted:{name:"fromStartedToCompleted",id:-15},clickDownloadNow:{name:"clickDownloadNow",id:12},videoDimensionsUnavailable:{name:"videoDimensionsUnavailable",id:261},endCardDisplayed:{name:"endCardDisplayed",id:11}}).constant("BN_ANALYTICS_CATEGORIES",{bannerVisibleToBannerClicked:{name:"fromStartedToCompleted",id:-16},bannerVisible:{name:"bannerVisible",id:28},bannerClicked:{name:"bannerClicked",id:29},bannerIconFailedToLoad:{name:"bannerIconFailedToLoad",id:165}}).constant("DOMAIN_OPTIONS",{production:"www.supersonicads.com",develop:"local.supersonicads.com"}).constant("VIDEO_TYPES",{internal:"ssa-internal-video-player",external:"ssa-external-video-player"}).constant("OPEN_URL_STRATEGIES",{CS:"CS",S2S:"S2S",S2SStoreKit:"S2SStoreKit",seamless:"seamless",redirect:"redirect",externalBrowser:"external_browser",secondary:"secondary",store:"store"}).constant("FIRE_PIXEL_STRATEGIES",{"native":"native",pixel:"pixel",none:"none"}).constant("ORIENTATIONS",{PORTRAIT:"portrait",LANDSCAPE:"landscape",UNDEFINED:"undefined"}).constant("FRAMES_IMGS",{PHONE:"../../../common/images/Kiloo/frameBorderPhone_new.png",TABLET:"../../../common/images/Kiloo/frameBorderTablet_new.png"}).constant("SCREEN_TYPES",{PHONE:"phone",TABLET:"tablet"}).constant("OW_TABS",{offers:"Earn more",completionOffers:"In progress"}).constant("ENV_OPTIONS",{production:"prod",develop:"dev",stage:"stage"}).constant("DEBOUNCE_CLICK_EVENT",{name:"debounceClick",id:122}).constant("PRIVACY_CLICKED_EVENT",{name:"privacyLinkClicked",id:236}).constant("CCVAF_CLICK",{name:"ccvafClick",id:267}).constant("TEMPLATES",{RIS:4,RISFullScreen:34}).constant("ADUNIT_VERSION","3.0.28").constant("ADUNIT_BUILD","546").constant("CLICK_ACTION",{VIDEO:"video",END_CARD:"endCard"}).constant("CLICK_TYPE",{VIDEO:"videoClick",END_CARD:"endCardClick",HYBRID:"hybridClick",NATIVE:"NEC"}).constant("AF_LIB",{url:"https://fvalid.appsflyer.com/ironsource/cp.sdk.1.2.5.js"}).constant("AF_TOKEN_TYPE",{TOKEN:"TOKEN",EMPTY_TOKEN:"EMPTY_TOKEN",NOT_INITIATED:"NOT_INITIATED",API_NOT_SUPPORTED:"API_NOT_SUPPORTED"}).constant("WARMUP_STRATEGY",{HTML_TAG:"htmlTag",FIRE_PIXEL:"firePixel"}).constant("HTML_TAG_WARMUP_ATTRIBUTE",{dnsPrefetch:"dns-prefetch",preconnect:"preconnect",prefetch:"prefetch",prerender:"prerender"}).constant("OW_MARQUEE_TEXT","Today's Best!").constant("DEBOUNCE_CLICK_DURATION",800).constant("AD_STARTED_TIMER_LENGTH",5e3).constant("OPERATING_SYSTEMS",{ios:"ios",android:"android"}).constant("CLOSE_FAIL_REASON",{storeKitVisible:"storeKitVisible"}).constant("PROTOCOL_TYPES",{secured:"https"}).constant("END_CARD_FRMAES",{partialScreen:"partialScreenEndCard",fullScreen:"fullScreenEndCard",carousel:"carouselEndCard",custom:"customEndCard",brand:"brandedEndCard",mraid:"mraidEndCard",embeddedVideo:"embeddedVideo",bannerInstall:"bannerInstall","native":"nativeEndCard"}).constant("WEBVIEW_TYPES",{ui:"ui",wk:"wk"}).constant("BANNER_SIZE",{standart:50,large:90}).constant("BANNER_TYPE",{standart:"standart",large:"large"}).constant("STORE_KIT_ERROR_REASONS",{notLoaded:"storeKit is not loaded"}).constant("HYBRID_SHOW_TYPE",{hybridOnShow:"hybridOnShow",hybridOnClick:"hybridOnClick"}).constant("MOAT_EVENTS",{start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",volumeChange:"AdVolumeChange"}).constant("CACHE_FOLDERS_PATHS",{libs:"../libs/",graphicAssets:"../graphicAssets/"}).constant("OW_TAB_ANIM_CLASS",{swipeLeft:"swipeLeftAnim",swipeRight:"swipeRightAnim"}).constant("OW_SERVER_ERROR_MSG",{failFetching:"Error fetching inventory. Error data: error",timeout:"Error fetching inventory. Error data: timeout",invalidAPI:"Invalid API response"}).constant("OW_NO_COMPLETION_OFFERS_STATUS",{noOffers:"noOffers",serverError:"serverError"}).constant("OW_NO_COMPLETION_OFFERS_MSG",{noOffers:"Start completing offers and earn rewards",serverError:"Oops! It looks like something went wrong. Please try again",general:"Sorry! It looks like we have no offers available at the moment. Please try again later"}).constant("OW_NO_CONTENT_MSG_HTML",{defaultOffers:{title:"Sorry!",content:"It looks like we have no offers available at the moment. <br/>Please try again later.",posterClass:"ssaNoOffersPoster"},completionOffers:{title:"Hi there!",content:"Start completing offers and earn rewards",posterClass:"ssaNoCompOffersPoster"},serverError:{title:"Oops!",content:"It looks like something went <br/>wrong. Please try again.",posterClass:"ssaServerErrorPoster"}}).constant("OW_STATUS_VALUES",{started:"started",completed:"completed",supportDenied:"supportDenied",supportGranted:"supportGranted",supportPending:"supportPending"}).constant("OW_IN_PROGRESS_THEME_COLOR",{"default":"blue",started:"blue",completed:"green",supportDenied:"red",supportGranted:"green",supportPending:"gray"}).constant("OW_PROGRESS_BAR_VALUE_BY_STATUS",{"default":"full",started:"almostFull",completed:"full",supportDenied:"full",supportGranted:"full",supportPending:"full"}).constant("OW_TAB_ANIM_DIRECTIONS",{left:"left",right:"right"}).constant("OW_INTERMEDIATE_PAGE_CONFIG",{supportDenied:{shouldShowCloseButton:!0,title:"Why was my offer denied?",body:'<div>There are a few possible explanations as to why your reward may have been denied:</div><br/>\r\n        <div class="rowTable"><div>1.</div><div class="rowText">You already had the app installed on your device (i.e. this wasn’t the first installation of the app).</div></div>\r\n        <div class="rowTable"><div>2.</div><div class="rowText">You did not meet the offer requirements. Please make sure to read the instructions carefully.</div></div>\r\n        <div class="rowTable"><div>3.</div><div class="rowText">The reward did not come from this offerwall. There is a chance that you started the offer on another channel or through another sponsored ad. </div></div>\r\n  '},supportPending:{shouldShowCloseButton:!0,title:"Pending support offer",body:"<div>We are currently reviewing your request and you will receive an email once our review is complete.</div><br/>\r\n            <div>Thanks for your patience!</div>"},missingCoins:{shouldShowCloseButton:!1,title:'<div class="missingCoinsTitle">Missing coins?</div>',body:"<div>Most of our offers take approximately 15 minutes to process, however some require a little bit more time.</div><br/>\r\n            <div>Please ensure that you have followed all of the instructions and that you have completed the offer as requested in order to receive the reward. </div><br/>\r\n"}}).constant("OW_DESIGN_NAMES",{"default":"ssaNewBasicDesign"}).constant("OW_INTERMEDIATE_PAGE_NAMES",{missingCoins:"missingCoins",intermediate:"intermediate"}).constant("EXTERNAL_AD_VIEW_PRODUCTS",{externalAdViewProductTypeArray:["Banner"]}).constant("OW_INTERMEDIATE_PAGE_LINKS",{missingCoins:"Missing ",contactSupport:"Contact support"}).constant("OW_CONTACT_SUPPORT_AVAILABLE_TIME",{valueInHours:24}).constant("OW_CONTACT_SUPPORT_PAGE_URL",{stage:"https://networksdk.ssacdn.com/users/customerSupport/index.html",prod:"https://networksdk.ssacdn.com/customerSupport/index.html"}).constant("OW_MODAL_TEMPLATES",{intermediatePage:"ssaOWIntermediate.html",basicPopup:"ssaOWPopup.html",basicTitleText:"ssaTitleAndTextModalTemplate.html",iconTitleText:"ssaIconTitleAndTextModalTemplate.html"}).constant("OW_OFFERS_TITLE_BY_TYPE",{"default":"Earn ",inProgress:"Rewards in Progress",completed:"Rewards Earned"}).constant("DATA_CLICK_TYPE_STRATEGY",{forking:"S2S",seamless:"Seamless",redirect:"Redirect"}).constant("AD_CONTAINER_PRIVACY",{defaultText:"i"})}(),function(){var a=angular.module("AdUnit"),b="connection.",c="mraid.";a.constant("DAPI_CALLBACK_NAMES",{connected:"connected",close:"close",replay:"replay",open:"open",openStoreUrl:"openStoreUrl",useCustomClose:"useCustomClose",reward:"reward",interaction:"interaction",getDapiData:"getDapiData"}).constant("MRAID_CALLBACK_NAMES",{getMraidData:"getMraidData",mraidAdLoaded:"mraidAdLoaded",open:"open",openStoreUrl:"openStoreUrl",expand:"expand",setExpandProperties:"setExpandProperties",useCustomClose:"useCustomClose",close:"close",setResizeProperties:"setResizeProperties",resize:"resize",setOrientationProperties:"setOrientationProperties",supports:"supports",log:"log",reward:"reward",generalMessage:"generalMessage"}).constant("DAPI_STATES",{connected:"connected:"}).constant("EXTERNAL_MESSAGE_CONFIGS",{communicationPrefix:"communicationPrefix:"}).constant("EXTERNAL_MISMATCH_SOURCE",{supportHTMLUrlFlowOffWithMissingKey:"supportPlayableHTMLUrlFlow is OFF, missing html/mraid key",supportHTMLUrlFlowWithMissingKey:"supportPlayableHTMLUrlFlow with missing htmlURL key"}).constant("MRAID_STATES",{connected:"connected",mraidAdLoaded:"mraidAdLoaded"}).constant("EXTERNAL_API_TYPE",{mraid:"MRAID",dapi:"DAPI"}).constant("DAPI_MSG_PREFIXES",{send:"DAPI_SERVICE:",receive:"DAPI_AD:"}).constant("MRAID_MSG_PREFIXES",{send:"MRAID_SERVICE:",receive:"MRAID_AD:"}).constant("EXTERNAL_VIDEO_TYPE",{internal:"ssa-internal-video-player",external:"ssa-external-video-player",externalUnified:"ssa-external-unified-video-player"}).constant("MRAID_COMMUNICATION_EVENTS",{stateChange:b+"stateChange",error:b+"error",ready:b+"ready",sizeChange:b+"sizeChange",viewableChange:b+"viewableChange",audioVolumeChange:b+"audioVolumeChange",updateMraidData:b+"updateMraidData",getMraidData:b+"getMraidData",mraidAdLoaded:b+"mraidAdLoaded",open:b+"open",openStoreUrl:b+"openStoreUrl",expand:b+"expand",setExpandProperties:b+"setExpandProperties",useCustomClose:b+"useCustomClose",close:b+"close",setResizeProperties:b+"setResizeProperties",resize:b+"resize",setOrientationProperties:b+"setOrientationProperties",supports:b+"supports",log:b+"log",reward:b+"reward",generalMessage:b+"generalMessage"}).constant("DAPI_CONNECTION_EVENTS",{viewableChange:b+"viewableChange",adResized:b+"adResized",adRewarded:b+"adRewarded",stateChange:b+"stateChange",timeUpdate:b+"timeUpdate",closeButtonVisibilityChange:b+"closeButtonVisibilityChange",ready:b+"ready",getDapiData:b+"getDapiData",getDapiUrl:b+"getDapiUrl",getDeviceData:b+"getDeviceData",updateDapiData:b+"updateDapiData",handleFunctionCallback:b+"handleFunctionCallback",audioVolumeChange:b+"audioVolumeChange",failToCloseAd:b+"failToCloseAd",open:b+"open",openStoreUrl:b+"openStoreUrl",close:b+"close",replay:b+"replay",useCustomClose:b+"useCustomClose",reward:b+"reward",triggerEvent:b+"triggerEvent"}).constant("EXTERNAL_ANALYTICS_CATEGORIES",{endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},clickDownloadNow:{name:"clickDownloadNow",id:12},playableHTMLUrlSourceMismatch:{name:"playableHTMLUrlSourceMismatch",id:316},invalidExternalMessage:{name:"invalidExternalMessage",id:275}}).constant("MRAID_ANALYTICS_CATEGORIES",{expand:{name:c+"expand",id:143},setExpandProperties:{name:c+"setExpandProperties",id:138},setOrientationProperties:{name:c+"setOrientationProperties",id:141},setResizeProperties:{name:c+"setResizeProperties",id:144},resize:{name:c+"resize",id:145},supports:{name:c+"supports",id:140},unknownFunction:{name:c+"unknownFunction",id:146},error:{name:c+"error",id:139},adVisibleButNotReady:{name:c+"adVisibleButNotReady",id:142},log:{name:c+"log",id:147}}).constant("DAPI_ANALYTICS_CATEGORIES",{unknownFunction:{name:"unknownFunction",id:218},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},clickDownloadNow:{name:"clickDownloadNow",id:12},endCardDisplayed:{name:"endCardDisplayed",id:11}})}(),function(){function a(a){function b(){return d.scrollHeight-e>d.clientHeight}var c=this,d=a[0],e=1;c.threeDots=function(){if(d.innerText=c.tdInitialText,b()){for(var a=d.innerText,e=[],f=0;f<a.length;f++)" "===a[f]&&e.push(f);var g=e.length;do a=d.innerText,d.innerText=a.substring(0,e[g--])+"...";while(b()&&g>=0)}}}function b(a,b,c,d){function e(){var b=a.vm.runResize();angular.isFunction(i.options.complete)&&i.options.complete(b)}var f,g,h,i=this,j=a.vm.tfTextConfig;i.options={outerClass:j.outerClass||null,minFontPixels:parseInt(j.minFontSize)||4,maxFontPixels:parseInt(j.maxFontSize)||40,explicitHeight:j.maxHeight||null,explicitWidth:j.maxWidth||null,changeLineHeight:j.changeLineHeight||!0,heightOnly:j.heightOnly||!1,widthOnly:j.widthOnly||!1,complete:j.onComplete||null},i.getOuterElement=function(a,b){return b&&a?a.hasClass(b)?a:i.getOuterElement(a.parent(),b):null},f=i.getOuterElement(b,i.options.outerClass),i.updateSizeLimits=function(){f?(g=f[0].clientHeight,h=f[0].clientWidth):(g=i.options.explicitHeight,h=i.options.explicitWidth)},i.resizeUp=function(){var a=parseInt(b[0].style.fontSize);b.css("font-size",a+1+"px"),i.options.changeLineHeight&&b.css("line-height",a+2+"px")},i.resizeDown=function(){var a=parseInt(b[0].style.fontSize);b.css("font-size",a-1+"px"),i.options.changeLineHeight&&b.css("line-height",a+"px")},i.isOverFlow=function(){var a,b,c;return f?(b=f[0].scrollHeight,c=f[0].scrollWidth):(b=i.element[0].offsetHeight,c=i.element[0].offsetWidth),a=!i.options.widthOnly&&b>g||!i.options.heightOnly&&c>h},i.resize=function(){var a;if(""===b[0].style.fontSize&&b.css("font-size",i.options.maxFontPixels+"px"),a=parseInt(b[0].style.fontSize),i.isOverFlow())for(;i.isOverFlow()&&a>i.options.minFontPixels;)i.resizeDown(),a=parseInt(b[0].style.fontSize);else{do i.resizeUp(),a=parseInt(b[0].style.fontSize);while(!i.isOverFlow()&&a<i.options.maxFontPixels+1);i.resizeDown()}return b[0].style.fontSize},i.runResize=function(){var a;return i.updateSizeLimits(),a=parseInt(i.resize()),{fontSize:a}},i.updateSizeLimits(),c(e),angular.element(d).bind("resize",e)}a.$inject=["$element"],b.$inject=["$scope","$element","$timeout","$window"];var c=angular.module("adunitDirectives",[]);c.directive("ssaLineClamp",["$timeout",function(a){return{scope:{text:"=",textClampConfig:"="},link:function(a,b,c){function d(a){return a[0].scrollHeight-i>a[0].clientHeight||a[0].scrollWidth-i>a[0].clientWidth}function e(){k.length>n&&(j.style["font-size"]=m+"px",j.style["line-height"]=m+2+"px",angular.element(j).removeClass("alignTitleToTop"),angular.element(j).addClass("alignTitleToBottom"))}function f(){for(var a=[],c=b[0].innerText,d=0;d<c.length;d++)" "===c[d]&&a.push(d);return a}function g(){var a=f(),c=a.length,e=b[0].innerText.trim();if(0===c)for(b[0].innerText+="...";d(b)&&e.length>0;)e=b[0].innerText.trim(),b[0].innerText=e.substring(0,e.length-4)+"...";else do e=b[0].innerText.trim(),b[0].innerText=e.substring(0,a[c--])+"...";while(d(b)&&c>0)}function h(){l&&e(),d(b)&&g(),b[0].clientHeight>b[0].style.height&&(b[0].style.height="auto")}var i=1,j=b[0],k=a.text,l=a.textClampConfig&&a.textClampConfig.enableFontSizeTransformation||!1,m=a.textClampConfig&&a.textClampConfig.smallFontSize||0,n=a.textClampConfig&&a.textClampConfig.maxCharsEnabled||0;a.$watch(function(){return b[0].scrollHeight},function(){h()});a.$on("ssaLineClamp.recalculate",function(){b[0].style.height=null,b[0].innerText=a.text,h()})}}}]),c.directive("ssaMobileClick",[function(){return function(a,b,c){b.bind("touchend",function(b){b.preventDefault(),b.stopPropagation(),a.$apply(c.ssaMobileClick)})}}]),c.directive("ssaScriptLoader",["LogService",function(a){var b=function(b,c,d){var e=document.createElement("script");e.src=b;var f=document.getElementsByTagName("script")[0],g=!1;document.getElementById(c)||(e.onload=e.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,a.log("External script loaded: "+(new Date).getTime(),a.logLevel.trace),d(),e.onload=e.onreadystatechange=null,f.parentNode.removeChild(e))},f.parentNode.insertBefore(e,f))};return{restrict:"EA",scope:{scriptData:"="},link:function(a,c,d){"undefined"!=typeof a.scriptData&&null!==a.scriptData&&b(a.scriptData.url,a.scriptData.id,a.scriptData.callback)}}}]),c.directive("ssaDynamicController",["$compile",function(a){return{link:function(b,c,d){var e=b[d.ssaDynamicController];null!==e&&(c.attr("ng-controller",e),c.removeAttr("ssa-dynamic-controller"),a(c)(b))}}}]),c.directive("ssaTextFill",[function(){return{scope:{maxFontSize:"@",minFontSize:"@",maxHeight:"@",maxWidth:"@",tfTextConfig:"="},link:function(a,b,c){var d,e,f=a.tfTextConfig.maxFontSize,g=b.find("span",this);do g.css("font-size",f+"px"),d=g[0].offsetHeight,e=g[0].offsetWidth,f-=1;while(d>a.tfTextConfig.maxHeight||e>a.tfTextConfig.maxWidth&&f>a.tfTextConfig.minFontSize)}}}]),c.directive("fallbackSrc",function(){var a={restrict:"A",link:function(a,b,c){b.one("error",function(){c.src!=c.fallbackSrc&&c.$set("src",c.fallbackSrc)})}};return a}),c.directive("ssaThreeDots",["$timeout","$window",function(a,b){return{scope:{},restrict:"A",bindToController:{tdInitialText:"@"},controllerAs:"vm",controller:"ssaThreeDotsController",link:function(c,d,e){a(c.vm.threeDots),angular.element(b).bind("resize",c.vm.threeDots)}}}]),c.controller("ssaThreeDotsController",a),c.directive("reduceNotificationFontSize",["$timeout","$window",function(a,b){return{scope:{},restrict:"A",bindToController:{tfTextConfig:"="},controllerAs:"vm",controller:"reduceNotificationFontSizeController",link:function(a,c,d){c[0].style.visibility="hidden",a.$watch("vm.tfTextConfig.notificationData.data",function(c,d){c&&(a.vm.reduceFont(),angular.element(b).bind("resize",a.vm.reduceFont))})}}}]),c.controller("reduceNotificationFontSizeController",["$element",function(a){function b(){return f.innerHTML&&f.scrollHeight>e.clientHeight}var c=this;config=c.tfTextConfig;var d,e=a.parent()[0],f=a[0];c.reduceFont=function(){if(d=d?d:parseFloat(window.getComputedStyle(a[0],null).getPropertyValue("font-size")),f.style.fontSize=d+"px",b()){var c=d;do c--,f.style.fontSize=c+"px";while(b()&&c>=config.minFontSize)}a[0].style.visibility="visible"}}]),c.directive("ssaSimpleTextFill",function(){return{scope:{},restrict:"A",bindToController:{tfTextConfig:"="},controllerAs:"vm",controller:"ssaSimpleTextFillController"}}),c.controller("ssaSimpleTextFillController",b)}(),function(){function a(a,b){return a&&a.touches&&a.touches[0]&&a.touches[0][b]}function b(b,c){function d(){return Math.abs(k-i)<m&&Math.abs(l-j)<m}function e(){i=j=k=l=null,n=!1}function f(b){i=a(b,"clientX"),j=a(b,"clientY"),n||d()||(n=!0)}function g(d){k=a(d,"clientX"),l=a(d,"clientY"),c.one("touchend",function(a){i&&j&&n||(a.preventDefault(),b.cosOnClick()),c.unbind("touchcancel"),e()}),c.one("touchcancel",function(a){c.unbind("touchend"),e()})}function h(){c.bind("touchmove",f),c.bind("touchstart",g),b.$on("$destroy",function(){c.unbind("touchstart"),c.unbind("touchmove")})}var i,j,k,l,m=20,n=!1;h()}b.$inject=["$scope","$element"];var c=angular.module("adunitDirectives");c.directive("clickOnScrollable",function(){var a={restrict:"A",controller:"clickOnScrollable",scope:{cosOnClick:"="}};return a}),c.controller("clickOnScrollable",b)}(),function(){function a(a,b,c,d,e,f,g){function h(a){"true"===a||a===!0?(s=!1,g.log("External video timer freeze flag turned to false",g.logLevel.trace)):"false"!==a&&a!==!1||(s=!0,g.log("External video timer freeze flag turned to true",g.logLevel.trace))}function i(){return w===!0}function j(){s=!0,w=!0}function k(){s=!1,w=!1}function l(){return s!==!0}function m(){a.$on("AdController.viewableChange",function(a,b){g.log("AdController.viewableChange: "+b,g.logLevel.trace),i()||b&&b.hasOwnProperty("isViewable")&&h(b.isViewable)}),u=c.$on("AdController.dialogBoxAboutToClose",k),v=c.$on("AdController.dialogBoxAboutToOpen",j)}function n(b){a.$evalAsync(function(){a.$emit("Video.TimeTick",b)})}function o(){var b=a.$on("StoreKitService.StoreKitOpened",function(a,c){b(),s=!0}),c=a.$on("StoreKitService.StoreKitClosed",function(a,b){c(),s=!1})}function p(){e.callOnVisible(function(){a.videoData.currentTime=0,a.$emit("Video.Started",{videoDuration:a.timerData.completionCountdown}),t=f(function(){l()&&(a.videoData.currentTime<=a.videoData.videoTime?(n(a.videoData.currentTime),a.videoData.currentTime++):(a.$emit("Video.Ended",{type:"external",videoDuration:a.timerData.completionCountdown,isReplayVideo:a.isReplayVideo}),f.cancel(t)))},1e3)})}function q(){u&&u(),v&&v()}function r(){m(),p(),o(),a.$on("$destroy",function(){f.cancel(t),q()})}var s,t,u,v,w=!1;r()}a.$inject=["$scope","$element","$rootScope","storeKitService","SSA_Utils","$interval","LogService"];var b=angular.module("adunitDirectives");b.directive("ssaExternalPlayerProgress",function(){var a={restrict:"A",controller:"ssaExternalPlayerProgressController",scope:{videoData:"=",isReplayVideo:"=",timerData:"="}};return a}),b.controller("ssaExternalPlayerProgressController",a)}(),function(){var a=angular.module("adunitDirectives");a.directive("ssaPixel",["$rootScope","$timeout","$q","LogService","adapter",function(a,b,c,d,e){return{template:"<div class='pixel'></div>",link:function(b,f,g){function h(b){var c="function"==typeof b.cb?b.cb:null;if("htmlElement"!==b.type&&("undefined"==typeof b.url||""===b.url))return d.log("Missing callback data. At: directive ssaPixel"+(new Date).getTime(),d.logLevel.error),void(c&&c());var g="";if("pixel"===b.type){
var h=new Image;null!=c&&(h.onload=h.onerror=function(b){return function(){a.$apply(b)}}(c)),""===b.at||isNaN(parseInt(b.at))?h.src=b.url:(h.src=b.url,h.time=b.at)}else"native"===b.type?e.call({method:"nativePixel",arguments:{url:b.url}}):"iframe"===b.type?g='<iframe style="width: 1px; height: 1px; border: 0px solid white; background:transparent;" frameborder="0" scrolling="no" src="'+b.url+'" data-time="'+b.at+'"></iframe>':"htmlElement"===b.type&&(g=b.htmlElement);""!==g&&(f.append(g),c&&c())}a.$on("PixelDirective.FirePixel",function(a,b){h(b)}),a.$on("PixelDirective.FireMultiplePixels",function(a,b){function d(a){g[a].resolve()}var e,f,g=[],i=[];if(b.cb){for(e=0;e<b.multiplePixels.length;e++){g[e]=c.defer(),i[e]=g[e].promise,f=function(a){return function(){d(a)}}(e);var j={cb:f};angular.extend(j,b.multiplePixels[e]),h(j)}c.all(i).then(function(){b.cb()})}else for(e=0;e<b.multiplePixels.length;e++)h(b.multiplePixels[e])})}}}])}(),function(){function a(a,b,c){function d(){f=b.parent(),a.$on("stickToBottom.recalculate",e),e()}function e(){b.removeClass("fixedToViewportBottom"),b.addClass("hidden"),c(function(){b.removeClass("hidden"),f[0].scrollHeight<=f[0].clientHeight?b.addClass("fixedToViewportBottom"):b.removeClass("fixedToViewportBottom")})}var f;d()}a.$inject=["$scope","$element","$timeout"];var b=angular.module("adunitDirectives");b.directive("stickToBottom",function(){var a={restrict:"A",controller:"stickToBottomController"};return a}),b.controller("stickToBottomController",a)}(),function(){var a=angular.module("adunitDirectives");a.directive("stretchToFit",["$window",function(a){function b(){return a.innerHeight<a.innerWidth}var c=function(a,b){for(var c=[],d=0;d<a.length;d++)a[d]!==b[0]&&c.push(a[d]);return c};return{link:function(a,d,e){function f(a){var b=0,c=h[h.length-1];c.style.height="",angular.forEach(h,function(a,c){b+=a.clientHeight});var f=a||g[0].clientHeight-b;a&&e.stfStretchLast&&(c.style.height=g[0].clientHeight-f+"px"),d.css({height:f+"px"})}var g=d.parent(),h=c(g.children(),d);if(e.stfStretchLast=!!e.stfStretchLast,e.stfExceptions){"string"==typeof e.stfExceptions&&(e.stfExceptions=[e.stfExceptions]);for(var i=0;i<e.stfExceptions.length;i++){var j=g.find(e.stfExceptions[i]);h=c(h,j)}}a.$on("stretchToFit.recalculate",function(a,b){f(b&&b.limit),b.cb&&b.cb()}),b()&&f()}}}])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a,b,c,d){e.trackTimingStart(f.handlePostActionClick),r(a,b,function(){a.setPixelFired(j.END_CARD,!0),s(a,c,d)})}function r(c,d,f){f=angular.isFunction(f)?f:angular.noop();var g=c.getFirePixelStrategy();if(g===h.none||d.isHybridDisplay()&&c.isPixelFired())f();else{var i=c.createPixelUrlWithPlaceholderReplaced(u);if(c.shouldSupportAF()){var j=c.getAFToken()||p.getToken();i=c.createPixelUrlWithPlaceholderReplaced(angular.extend({},u,{"{{ccvaf}}":j})),e.trackEvent(l,{generalMessage:p.getTokenType(j)})}var k={url:i,type:g};b.$broadcast("PixelDirective.FirePixel",k),c.shouldDelayFirePixel()?a(f,c.getForkingDelay()):f()}}function s(a,b,e){if(a.getOpenStrategy()===c.seamless)i.openStoreUrl(a.createUrlWithPlaceholderReplaced(u),b,e);else{var f={type:"openUrl"};angular.extend(f,t(a)),d.call({method:"ActionClick",arguments:f,callback:b})}}function t(a){var b,d,e=a.createUrlWithPlaceholderReplaced(u),f=a.getPostActionAppID();o.isStoreKitLoaded()&&(b=a.getViewIdentifier(),d=a.getViewUniqueId());var h={url:e};if(a.getOpenStrategy()===c.S2S&&"android"===g.getOSType()){var i=n.convertGooglePlayToMarketUrl(e);i&&(h.method="external_browser",h.url=i)}return f&&(h.appId=f),d&&(h.viewUniqueId=d),b&&(h.viewIdentifier=b),a.shouldOpenInExtBrowser()&&(h.method="external_browser"),h}var u={"{{clickType}}":k.END_CARD};return{handlePostActionClick:q}}function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a){return a.isSmartVideoClickable()?"smartClick":a.getOpenStrategy()}function s(a,b,c,d){e.trackTimingStop(f.videoClicked,{videoProgress:b,eNameStart:g.timeFromStartedToCompleted,generalMessage:r(a)}),t(a,function(){a.setPixelFired(w,!0),u(a,c,d)})}function t(c,d){d=angular.isFunction(d)?d:angular.noop();var f=c.getFirePixelStrategy(w);if(f!==i.none&&c.shouldFirePixel(w)){if(c.shouldSupportAF()){var g=q.getToken();e.trackEvent(m,{generalMessage:q.getTokenType(g)})}var h,j=c.getPixelUrls(w,angular.extend({},x,{"{{ccvaf}}":g}));if("object"==typeof j)for(var k=0;k<j.length;k++)h={url:j[k],type:f},b.$broadcast("PixelDirective.FirePixel",h);else h={url:j,type:f},b.$broadcast("PixelDirective.FirePixel",h);c.shouldDelayFirePixel(w)?a(d,c.getForkingDelay()):d()}else d()}function u(a,b,e){if(a.getOpenStrategy(w)===c.seamless)j.openStoreUrl(a.createUrlWithPlaceholderReplaced(x),b,e);else{var f={type:"openUrl"};angular.extend(f,v(a)),d.call({method:"ActionClick",arguments:f,callback:b})}}function v(a){var b,d,e=a.getClickActionUrl(w,x),f=a.getPostActionAppID();p.isStoreKitLoaded()&&(b=a.getViewIdentifier(),d=a.getViewUniqueId());var g={url:e};if(a.getOpenStrategy(w)===c.S2S&&"android"===h.getOSType()){var i=o.convertGooglePlayToMarketUrl(e);i&&(g.method="external_browser",g.url=i)}return f&&(g.appId=f),d&&(g.viewUniqueId=d),b&&(g.viewIdentifier=b),a.shouldOpenInExtBrowser()&&(g.method="external_browser"),g}var w=k.VIDEO,x={"{{clickType}}":l.VIDEO};return{handleClick:s}}a.$inject=["$timeout","$rootScope","OPEN_URL_STRATEGIES","adapter","analytics","RV_ANALYTICS_CATEGORIES","SSA_Utils","FIRE_PIXEL_STRATEGIES","seamlessOpenStoreService","CLICK_ACTION","CLICK_TYPE","CCVAF_CLICK","productSettingsService","androidOpenStoreService","storeKitService","AFService"],b.$inject=["$timeout","$rootScope","OPEN_URL_STRATEGIES","adapter","analytics","RV_ANALYTICS_CATEGORIES","IS_ANALYTICS_CATEGORIES","SSA_Utils","FIRE_PIXEL_STRATEGIES","seamlessOpenStoreService","CLICK_ACTION","CLICK_TYPE","CCVAF_CLICK","productSettingsService","androidOpenStoreService","storeKitService","AFService"];var c=angular.module("frameComponentsServices",[]);c.factory("endCardService",a),c.factory("videoPlayerService",b)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){x.deviceOs=m.getDeviceData().os,x.appData=z.get(),x.appData.numOfStars=4.5,x.appData.starsImageName="stars-orange-background",x.shouldShowPrivacyLink=!0,x.postActionTitle=A.getPostActionTitle(),x.isWiggle=!1,x.deviceType=m.getScreenType(),x.postActionFunction=l.getDebounceFunction(q,m.getDebounceClickConfig()),x.addCurrentFrameName=x.fmFunctions.getCurrentFrameName(),x.privacyLink="http://www.ironsource.mobi/privacypolicy.html",x.componentCustomConfig={validateIcon:!0,hideIconIfFailed:!0,templateName:"installClickableTemplate",onIconFailedCallback:function(){e.trackEvent(h.bannerIconFailedToLoad,{generalmessage:x.appData.icon})}},x.textClampConfig={smallFontSize:p()===g.standart?y.smallFont.standart:y.smallFont.large,maxCharsEnabled:p()===g.standart?y.maxCharsEnabled.standart:y.maxCharsEnabled.large,enableFontSizeTransformation:!0}}function p(){return document.getElementsByTagName("body")[0].clientHeight===f.standart?g.standart:g.large}function q(){j.log("DEBOUNCE_TEST perform click",j.logLevel.trace),e.trackTimingStop(h.bannerClicked,{eNameStart:h.bannerVisibleToBannerClicked,currentFrame:n.bannerInstall,generalMessage:A.getOpenStrategy(null)}),i.call({method:"AdClicked",arguments:{}}),k.handlePostActionClick(A,B,r,s)}function r(){x.fmFunctions.setBackButtonFrameResponsibility(!1),j.log("ssaCarouselEndCard: opened url success",j.logLevel.trace)}function s(){x.fmFunctions.setBackButtonFrameResponsibility(!1)}function t(){x.onErrorAction=function(a){var b=a&&a[0]&&a[0].src||"",c="carouselEndCard | error loading image "+b;x.fmFunctions.frameLoadedError(c)},x.onLoadAction=function(){x.fmFunctions.frameLoaded(),b(function(){x.fmFunctions.frameEnded("")},300)}}function u(){e.trackEvent(h.bannerVisible,{currentFrame:n.bannerInstall}),e.trackTimingStart(h.bannerVisibleToBannerClicked),l.removeOnVisibleListener()}function v(){a.$broadcast("ssaLineClamp.recalculate")}function w(){o(),t(),l.callOnVisible(u),t(),x.onLoadAction()}var x=this,y=(c.children(),{smallFont:{standart:11,large:13},maxCharsEnabled:{standart:22,large:20}}),z=x.data.getAppInstallModel(),A=x.data.getPostActionModel(),B=x.data.getHybridModel();w(),d.addEventListener("orientationchange",v),a.$on("$destroy",function(){d.removeEventListener("resize",v)})}a.$inject=["$scope","$timeout","$element","$window","analytics","BANNER_SIZE","BANNER_TYPE","BN_ANALYTICS_CATEGORIES","adapter","LogService","endCardService","SSA_Utils","productSettingsService","END_CARD_FRMAES"];var b=angular.module("ssaBannerInstall",[]);b.directive("ssaBannerInstallDefault",function(){var a={restrict:"E",templateUrl:"ssaBannerInstallDefaultTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaBannerInstallController"};return a}),b.controller("ssaBannerInstallController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){return c.innerHeight<c.innerWidth}function n(){return z.closeData.endCardFlags&&z.closeData.endCardFlags.LEB}function o(){z.closeData=angular.copy(A.get()),z.closeData["class"]=A.getCloseDataWhite(),z.closeData.hideClose=!1,z.closeData.endCardFlags=A.getEndCardFlags(),z.closeClick=q,z.appData=B.get(),z.appData.numOfStars=4.5,z.appData.starsImageName="stars-bright-background",z.shouldShowPrivacyLink=z.fmFunctions.shouldShowPrivacyLink(),z.carouselImages=B.getAppImages(),z.postActionTitle=C.getPostActionTitle(),z.isWiggle=D.getShowWiggleFlag(),z.deviceType=j.getScreenType(),z.postActionFunction=i.getDebounceFunction(s,j.getDebounceClickConfig()),z.closeData.endCardFeatures=!0,z.replayClick=z.fmFunctions.replayClicked,z.showReplay=E.hasReplayFrame()&&z.fmFunctions.getHasReplayFrame()&&!n(),z.addCurrentFrameName=z.fmFunctions.getCurrentFrameName(),z.closeData.setBackButtonBehavior=r,z.closeData.isOfferClicked=p,z.textConfig={enableFontSizeTransformation:!1},z.isAFAd=C.shouldSupportAF(),z.isAFAd&&l.init()}function p(){return C.isOfferClicked()}function q(a){a?z.postActionFunction():z.fmFunctions.closeClicked()}function r(a){z.fmFunctions.setBackButtonFrameResponsibility(a)}function s(){g.log("DEBOUNCE_TEST perform click",g.logLevel.trace),d.trackTimingStop(e.clickDownloadNow,{eNameStart:e.endCardDisplayedToClickDownload,currentFrame:k.carousel,generalMessage:C.getOpenStrategy(null)}),f.call({method:"AdClicked",arguments:{}}),z.fmFunctions.setBackButtonFrameResponsibility(!0),h.handlePostActionClick(C,F,t,u)}function t(){z.fmFunctions.setBackButtonFrameResponsibility(!1),g.log("ssaCarouselEndCard: opened url success",g.logLevel.trace)}function u(){z.fmFunctions.setBackButtonFrameResponsibility(!1)}function v(){a.$broadcast("stretchToFit.recalculate",{cb:function(){a.$broadcast("Carousel.recalculate"),a.$broadcast("ssaLineClamp.recalculate")}})}function w(){a.$on("Carousel.heightLimit",function(b,c){m()&&a.$broadcast("stretchToFit.recalculate",{limit:c&&c.heightLimit?c.heightLimit:null})}),z.onErrorAction=function(a){var b=a&&a[0]&&a[0].src||"",c="carouselEndCard | error loading image "+b;z.fmFunctions.frameLoadedError(c)},z.onLoadAction=function(){z.fmFunctions.frameLoaded(),b(function(){z.fmFunctions.frameEnded("")},300)},c.addEventListener("resize",v),a.$on("$destroy",function(){c.removeEventListener("resize",v)})}function x(){d.trackEvent(e.endCardDisplayed,{currentFrame:k.carousel}),d.trackTimingStart(e.endCardDisplayedToClickDownload)}function y(){o(),w(),i.callOnVisible(x),w()}var z=this,A=z.data.getCloseButtonModel(),B=z.data.getAppInstallModel(),C=z.data.getPostActionModel(),D=z.data.getFeaturesModel(),E=z.data.getFlowModel(),F=z.data.getHybridModel();y()}a.$inject=["$scope","$timeout","$window","analytics","OW_ANALYTICS_CATEGORIES","adapter","LogService","endCardService","SSA_Utils","productSettingsService","END_CARD_FRMAES","AFService"];var b=angular.module("ssaCarouselEndCard",[]);b.directive("ssaCarouselEndCard",function(){var a={restrict:"E",templateUrl:"ssaCarouselEndCardTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaCarouselEndCardController"};return a}),b.controller("ssaCarouselEndCardController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){V.updateEngagementUrlWithPlacement(r.getInteractionAlias(!0))}function x(a){var b="external_browser";n.call({method:"ActionClick",arguments:{type:"openUrl",url:a.url,method:b},callback:a.callback})}function y(a){s.log("DEBOUNCE_TEST perform click",s.logLevel.trace),V.setAFToken(a.token?a.token:null),m.trackTimingStop(b.clickDownloadNow,{eNameStart:b.endCardDisplayedToClickDownload,currentFrame:U,generalMessage:V.getOpenStrategy()}),n.call({method:"AdClicked",arguments:{}}),T.fmFunctions.setBackButtonFrameResponsibility(!0),q.handlePostActionClick(V,W,B.bind(a.callback),A)}function z(){return o.getDebounceFunction(y,r.getDebounceClickConfig())}function A(){T.fmFunctions.setBackButtonFrameResponsibility(!1)}function B(a){T.fmFunctions.setBackButtonFrameResponsibility(!1),s.log("ssaCarouselEndCard: opened url success",s.logLevel.trace),angular.isFunction(a)&&a()}function C(){if(!N)return N=!0,!0}function D(){T.fmFunctions.replayClicked()}function E(){return e.isStoreKitVisible()?(m.trackEvent(d.closeAdBlockedStoreKit,{}),void i.sendMessage({name:g.failToCloseAd,data:c.storeKitVisible},P,h)):(O.updateState(O.getStates().hidden),O.updateViewability(!1),i.sendMessage({name:g.stateChange,data:O.getState()},P,h),i.sendMessage({name:g.updateDapiData,data:O.getDataObject()},P,h),T.fmFunctions.setCloseState(p.close),void T.fmFunctions.closeClicked())}function F(){var a=u.service,b=a().getTemplateId(),c=v.get(),d=[4,34,5,35];return c.afterData.length>0&&d.indexOf(b)!==-1}function G(a){var b=a.useCustomClose;"boolean"!=typeof b||F()||(T.usedCustomClose=b,n.call({method:"SetForceClose",arguments:{isEnable:!T.usedCustomClose}}),k.$apply())}function H(){S.src=R}function I(){!Q&&"contentWindow"in S&&(Q=j.init({adFrame:S,element:P,callbacks:Y,thirdPartyLibsConfigs:Z,isCloseButtonVisible:!T.closeData.hideClose,requestDapiUrl:!0}))}function J(a,b){!T.closeData.hideClose&&b&&b.parentBackAction&&b.parentBackAction()}function K(){m.trackEvent(b.endCardDisplayed,{currentFrame:U}),m.trackTimingStart(b.endCardDisplayedToClickDownload)}function L(a){T.fmFunctions.setBackButtonFrameResponsibility(a)}function M(){T.closeData=angular.copy(X.get()),T.closeData.hideClose=!1,T.closeData.endCardFlags=X.getEndCardFlags(),T.closeData.endCardFeatures=!0,T.closeData.setBackButtonBehavior=L}var N,O,P,Q,R,S,T=this,U=t.custom,V=T.data.getPostActionModel(),W=T.data.getHybridModel(),X=T.data.getCloseButtonModel(),Y={connected:function(){T.fmFunctions.frameLoaded()},close:E,replay:D,open:x,openStoreUrl:z.call(null,arguments),useCustomClose:G,reward:C,interaction:function(a){s.log("CustomEndCard | interaction was called "+JSON.stringify(a),s.logLevel.trace),w()},getDapiData:function(){i.sendMessage({name:g.getDeviceData,data:O.getDeviceData()},P,h)}},Z={supportAF:V.shouldSupportAF()};T.$onInit=function(){R=T.data.getFrameLayoutModel().getCustomLayoutUrl(),S=l.find("iframe")[0],P=S.contentWindow,M(),I(),H(),T.fmFunctions.setCloseState(p.close),T.closeClick=E,k.$on("frame."+a.backButtonPressedEvent,J),T.fmFunctions.setBackButtonFrameResponsibility(!0),O=f.initModel().getDapiModel(),o.callOnVisible(K)},T.$onDestroy=function(){Q.destroy()}}a.$inject=["BACK_BUTTON_EVENTS","DAPI_ANALYTICS_CATEGORIES","CLOSE_FAIL_REASON","GENERAL_EVENTS","storeKitService","externalDataService","DAPI_CONNECTION_EVENTS","DAPI_MSG_PREFIXES","iframeMessageService","dapiService","$scope","$element","analytics","adapter","SSA_Utils","CLOSE_BUTTON_STATES","endCardService","productSettingsService","LogService","END_CARD_FRMAES","AdUnitDelivery","notifications"];var b=angular.module("ssaCustomAdContainer",[]);b.component("ssaCustomAdContainer",{bindings:{data:"=",fmFunctions:"="},controller:"ssaCustomAdContainerController as vm",templateUrl:"ssaCustomAdContainerTemplate.html"}),b.controller("ssaCustomAdContainerController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){F=H.data.getVideoModel(),H.videoData=F.get(),G=H.data.getAppInstallModel(),H.featuresModel=H.data.getFeaturesModel(),H.isWiggle=H.featuresModel.getShowWiggleFlag(),H.shouldShowPrivacyLink=H.fmFunctions.shouldShowPrivacyLink(),H.isPreCache=j.isPreCache(),H.isPreload=j.isPreload(),H.postAction=H.data.getPostActionModel(),H.postActionTitle=H.postAction.getPostActionTitle(),H.postActionFunction=o.getDebounceFunction(v,j.getDebounceClickConfig()),H.hybrid=H.data.getHybridModel();var a=H.data.getTimerModel();H.timerData=angular.copy(a.get()),H.timerCompletionCountdown=a.getCompletionCountdown();var b=H.data.getCloseButtonModel();H.closeData=angular.copy(b.get()),H.closeData.allowBackButton=!0,H.closeData.endCardFlags=b.getEndCardFlags(),H.closeData.endCardFeatures=!0,H.closeClick=t,H.deviceDetails=j.getDeviceData(),H.productType=j.getProductType(),H.appData=G.get(),H.appData.numOfStars=4.5,H.isAFAd=H.postAction.shouldSupportAF(),H.isAFAd&&r.init()}function t(a){a?H.postActionFunction():H.fmFunctions.closeClicked()}function u(){var a=F.getVideoOrientation();a===q.UNDEFINED&&n.trackEvent(i.videoDimensionsUnavailable),H.layoutType=I[a]||I["default"],H.deviceType=j.getScreenType()}function v(){n.trackTimingStop(f.clickDownloadNow,{eNameStart:f.endCardDisplayedToClickDownload,currentFrame:g.embeddedVideo,generalMessage:H.postAction.getOpenStrategy(null)}),m.call({method:"AdClicked",arguments:{}}),H.fmFunctions.setBackButtonFrameResponsibility(!0),h.handlePostActionClick(H.postAction,H.hybrid,w,x)}function w(){H.fmFunctions.setBackButtonFrameResponsibility(!1),d.log("ssaCarouselEndCard: opened url success",d.logLevel.trace)}function x(){H.fmFunctions.setBackButtonFrameResponsibility(!1)}function y(){var a=H.data.getMuteModel().muteBtnConfig();H.muteBtnShouldDisplay=a.toShow,H.muteBtnIconOff=a.shouldStartMutedByFlag}function z(){var b=H.data.getMuteModel();H.isVideoMute=b.shouldMutedVideo(H.muteBtnIconOff),o.addHandlerToRingerSwitch(function(){H.isVideoMute=b.shouldMutedVideo(H.muteBtnIconOff)}),a.$on("MuteButton.Clicked",function(a,c){H.muteBtnIconOff=c.shouldMute,H.isVideoMute=b.shouldMutedVideo(H.muteBtnIconOff)})}function A(){a.$on("Video.Started",function(a,b){m.call({method:"AdStarted",arguments:{}}),n.trackTimingStart(i.timeFromStartedToCompleted),E=b&&b.videoDuration||0,n.trackEvent(k.videoStarted,{generalmessage:E,isReplay:!!H.isReplayVideo})}),a.$on("Video.Ended",function(a,b){H.closeData.hideClose=!1,H.closeData.allowBackButton=!0,D&&(spinnerHideListener(),spinnerShowListener()),D=!1;var d=c.Math.ceil(E);H.fmFunctions.fireCallback("videoEnded",{videoDuration:d}),H.fmFunctions.setCloseState(l.close),m.call({method:"AdVideoEnded",arguments:{}}),n.trackEvent(k.videoCompleted,{generalmessage:E,isReplay:!!H.isReplayVideo}),e(function(){H.fmFunctions.frameEnded({moveToNextFrame:0})},0)}),a.$on("Video.Paused",function(a,b){m.call({method:"AdPaused",arguments:{}})}),a.$on("Video.Playing",function(a,b){m.call({method:"AdPlaying",arguments:{}})}),a.$on("Video.Loaded",function(a,b){d.log("ssaIncentVideoController | Video loaded "+b,d.logLevel.trace),H.fmFunctions.frameLoaded()}),a.$on("Video.LoadedError",function(a,b){d.log("ssaIncentVideoController | Video loaded with error "+b,d.logLevel.trace),H.fmFunctions.frameLoadedError({errMsg:b})}),a.$on("Video.TimeTick",function(b,c){a.$broadcast("Component.Tick",c),a.$broadcast("SkipIn.Tick",c),H.fmFunctions.fireCallback(c),C=c}),a.$on("Video.PartialTimeTick",function(b,c){a.$broadcast("Component.PartialTick",c)})}function B(){y(),z(),s(),A(),u(),a.$on("frame."+p.backButtonPressedEvent,function(a,b){H.closeData.allowBackButton&&b&&b.parentBackAction&&b.parentBackAction()}),a.$on("$destroy",function(){o.clearRingerSwitchCallbacks()}),H.fmFunctions.setBackButtonFrameResponsibility(!0),o.callOnVisible(function(){n.trackEvent(f.endCardDisplayed,{currentFrame:g.embeddedVideo}),n.trackTimingStart(f.endCardDisplayedToClickDownload)})}var C,D,E,F,G,H=this,I={};I[q.PORTRAIT]="videoPortraitLayout",I[q.LANDSCAPE]="videoLandscapeLayout",I["default"]="videoPortraitLayout",B()}a.$inject=["$scope","$element","$window","LogService","$timeout","OW_ANALYTICS_CATEGORIES","END_CARD_FRMAES","endCardService","IS_ANALYTICS_CATEGORIES","productSettingsService","VIDEO_EVENTS","CLOSE_BUTTON_STATES","adapter","analytics","SSA_Utils","BACK_BUTTON_EVENTS","ORIENTATIONS","AFService"];var b=angular.module("ssaEmvLayout",[]);b.directive("ssaEmvLayout",function(){var a={restrict:"E",replace:!0,scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaEmvController",templateUrl:"ssaEmvTemplate.html"};return a}),b.controller("ssaEmvController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b=H(a);b=b||H(),J.appImage=b,K.css({"background-image":"url("+b+")"})}function p(){var a=k.getScreenOrientation();a&&o(a)}function q(){return J.closeData.endCardFlags&&J.closeData.endCardFlags.LEB}function r(){J.closeData=angular.copy(L.get()),J.closeData.hideClose=!1,J.closeData.endCardFeatures=!0,J.replayClick=J.fmFunctions.replayClicked,J.showReplayButton=N.hasReplayFrame()&&J.fmFunctions.getHasReplayFrame()&&!q(),J.addCurrentFrameName=J.fmFunctions.getCurrentFrameName(),J.shouldShowPrivacyLink=J.fmFunctions.shouldShowPrivacyLink(),J.postActionTitle=M.getPostActionTitle(),J.postActionFunction=h.getDebounceFunction(v,j.getDebounceClickConfig()),J.closeData.setBackButtonBehavior=u,I=P.isUsingFrameLayout(),I?(J.closeData.isOfferClicked=s,J.closeClick=J.fmFunctions.closeClicked):(J.closeData["class"]=L.getCloseDataWhite(),J.closeData.endCardFlags=L.getEndCardFlags(),J.closeData.isOfferClicked=s,J.closeClick=t),J.isAFAd=M.shouldSupportAF(),J.isAFAd&&n.init()}function s(){return M.isOfferClicked()}function t(a){a?J.postActionFunction():J.fmFunctions.closeClicked()}function u(a){J.fmFunctions.setBackButtonFrameResponsibility(a)}function v(){i.log("DEBOUNCE_TEST perform click",i.logLevel.trace),d.trackTimingStop(e.clickDownloadNow,{eNameStart:e.endCardDisplayedToClickDownload,currentFrame:D(),generalMessage:M.getOpenStrategy(null)}),f.call({method:"AdClicked",arguments:{}}),J.fmFunctions.setBackButtonFrameResponsibility(!0),g.handlePostActionClick(M,O,x,w)}function w(){J.fmFunctions.setBackButtonFrameResponsibility(!1)}function x(){J.fmFunctions.setBackButtonFrameResponsibility(!1),i.log("ssaFullScreenEndCard: opened url success",i.logLevel.trace)}function y(){p();var a=b.$on("screenOrientation.calculate",function(a,b){b&&b.orientation&&o(b.orientation)});b.$on("$destroy",function(){a()})}function z(){d.trackEvent(e.endCardDisplayed,{currentFrame:D()}),d.trackTimingStart(e.endCardDisplayedToClickDownload)}function A(a){if(S)return void i.log("returning on fail",i.logLevel.trace);i.log("in element load error",i.logLevel.trace);var b=a&&a[0]&&a[0].src||"",c="partialScreenLayout | error loading image "+b;J.fmFunctions.frameLoadedError(c),S=!0}function B(){return S?void i.log("returning",i.logLevel.trace):(i.log("in element load",i.logLevel.trace),T++,void(T>=U&&(i.log("calling on all elements loaded",i.logLevel.trace),C())))}function C(){J.fmFunctions.frameLoaded(),c(function(){J.fmFunctions.frameEnded("")},300)}function D(){return I?l.partialScreen:l.fullScreen}function E(){H=I?R.getImageByOrientation:Q.getAppImages}function F(){I?m(L.getCustomLayoutCloseUrlByOrientation(J.orientation),B,A):C()}function G(){r(),E(),h.callOnVisible(z),y(),F()}var H,I,J=this,K=a.children(),L=J.data.getCloseButtonModel(),M=J.data.getPostActionModel(),N=J.data.getFlowModel(),O=J.data.getHybridModel(),P=J.data.getFrameLayoutModel(),Q=J.data.getAppInstallModel(),R=J.data.getImageModel(),S=!1,T=0,U=1;G()}a.$inject=["$element","$scope","$timeout","analytics","OW_ANALYTICS_CATEGORIES","adapter","endCardService","SSA_Utils","LogService","productSettingsService","screenOrientationService","END_CARD_FRMAES","loadImageAssetService","AFService"];var b=angular.module("ssaFullScreenEndCard",[]);b.directive("ssaFullScreenEndCard",function(){var a={restrict:"E",templateUrl:"ssaFullScreenEndCardTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaFullScreenEndCardController"};return a}),b.controller("ssaFullScreenEndCardController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k){function l(){t.isEndCardImpressionExist()&&o(),d.trackEvent(e.endCardDisplayed,{currentFrame:j.brand}),d.trackTimingStart(e.endCardDisplayedToClickDownload)}function m(){if(!t.isPixelFired()){var a=t.getClickTrackingURLsArray();a=t.replacePlaceholderClickTrackingArray(a,{"{{clickType}}":k.END_CARD}),q(a),t.setPixelFired(h.END_CARD,!0)}}function n(){var a=t.createPixelUrlWithPlaceholderReplaced({"{{clickType}}":k.END_CARD});a&&!t.isPixelFired()&&(p(a),t.setPixelFired(h.END_CARD,!0))}function o(){var a=t.getEndCardImpressionArray();q(a)}function p(b){if(b&&"string"==typeof b){var c={type:"pixel",at:"",url:b};a.$emit("PixelDirective.FirePixel",c)}}function q(b){if(b){for(var c={multiplePixels:[]},d=0;d<b.length;d++)"string"==typeof b[d]&&(c.multiplePixels[d]={type:"pixel",at:"",url:b[d]});a.$emit("PixelDirective.FireMultiplePixels",c)}}function r(){g.callOnVisible(l),s.fmFunctions.frameLoaded(),b(function(){s.fmFunctions.frameEnded("")},300)}var s=this,t=s.data.getPostActionModel(),u=s.data.getSocialModel(),v=s.data.getCloseButtonModel();s.uxTemplate=s.data.getUxTemplateModel();parseInt(s.uxTemplate.getTemplateId());s.postActionStyle={"background-image":"url('"+t.getBackgroundLandscape()+"')"},s.closeData=angular.copy(v.get()),s.closeData.hideClose=!1,s.closeClick=s.fmFunctions.closeClicked,s.socialData=u.get(),s.click=g.getDebounceFunction(function(a){d.trackTimingStop(e.clickDownloadNow,{eNameStart:e.endCardDisplayedToClickDownload,currentFrame:j.brand,generalMessage:t.getOpenStrategy()}),s.preventClick(a);var b="webview";t.shouldOpenInExtBrowser()&&(b="external_browser"),c.log("Adunit open post action page. Method: "+b,c.logLevel.trace),t.isClickTrackingArrayExist()?m():t.isClickTrackingExist()&&n();var g=t.createUrlWithPlaceholderReplaced({"{{clickType}}":k.END_CARD});g&&f.call({method:"ActionClick",arguments:{type:"openUrl",url:g,method:b}})},i.getDebounceClickConfig()),s.socialClick=function(b,d){if(s.preventClick(b),d&&d.link){var e="external_browser";if(d.clickLink){var g={type:"pixel",at:"",url:d.clickLink};c.log("Adunit open post action social click. Method: "+e,c.logLevel.trace),a.$emit("PixelDirective.FirePixel",g)}f.call({method:"ActionClick",arguments:{type:"openUrl",url:d.link,method:e}})}},s.preventClick=function(a){a&&a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation())},s.shouldShowSocialButtons=s.socialData&&s.socialData.length>0,s.shouldShowEAClickHereButton=!1,s.closeData.hideClose=!1,r()}a.$inject=["$scope","$timeout","LogService","analytics","OW_ANALYTICS_CATEGORIES","adapter","SSA_Utils","CLICK_ACTION","productSettingsService","END_CARD_FRMAES","CLICK_TYPE"];var b=angular.module("ssaIncentBrandedAction",[]);b.directive("ssaIncentBrandedAction",function(){var a={restrict:"E",templateUrl:"ssaIncentBrandedActionTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaIncentBrandedActionController"};return a}),b.controller("ssaIncentBrandedActionController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){var a=z.data.getMuteModel().muteBtnConfig();z.muteBtnShouldDisplay=a.toShow,z.muteBtnIconOff=a.shouldStartMutedByFlag}function t(){var b=z.data.getMuteModel();z.isVideoMute=b.shouldMutedVideo(z.muteBtnIconOff),m.addHandlerToRingerSwitch(function(){z.isVideoMute=b.shouldMutedVideo(z.muteBtnIconOff)}),a.$on("MuteButton.Clicked",function(a,c){z.muteBtnIconOff=c.shouldMute,z.isVideoMute=b.shouldMutedVideo(z.muteBtnIconOff)})}function u(){a.$on("Video.Started",function(a,b){k.call({method:"AdStarted",arguments:{}}),l.trackTimingStart(g.timeFromStartedToCompleted),B=b&&b.videoDuration||0,l.trackEvent(i.videoStarted,{generalmessage:B,isReplay:!!z.isReplayVideo}),q.startTracking()}),a.$on("Video.Ended",function(a,b){z.closeData.hideClose=!1,z.closeData.allowBackButton=!0,w&&(y(),x()),w=!1;var d=c.Math.ceil(B);z.fmFunctions.fireCallback("videoEnded",{videoDuration:d}),z.fmFunctions.setCloseState(j.close),q.stopTracking(),k.call({method:"AdVideoEnded",arguments:{}}),l.trackEvent(i.videoCompleted,{generalmessage:B,isReplay:!!z.isReplayVideo}),e(function(){z.fmFunctions.frameEnded({moveToNextFrame:0})},0)}),a.$on("Video.Paused",function(a,b){k.call({method:"AdPaused",arguments:{}}),q.videoPaused()}),a.$on("Video.Playing",function(a,b){e(function(){z.data.getAppInstallModel().preFetchAppImages()},2e3),k.call({method:"AdPlaying",arguments:{}}),q.videoPlaying(A)}),a.$on("Video.Loaded",function(a,b){d.log("ssaIncentVideoController | Video loaded "+b,d.logLevel.trace),z.fmFunctions.frameLoaded()}),a.$on("Video.LoadedError",function(a,b){d.log("ssaIncentVideoController | Video loaded with error "+b,d.logLevel.trace),z.fmFunctions.frameLoadedError({errMsg:b})}),a.$on("Video.TimeTick",function(b,c){a.$broadcast("Component.Tick",c),a.$broadcast("SkipIn.Tick",c),z.fmFunctions.fireCallback(c),A=c}),a.$on("Video.PartialTimeTick",function(b,c){a.$broadcast("Component.PartialTick",c)})}function v(){var b=z.data.getUxTemplateModel(),c=parseInt(b.getTemplateId());c!==o.RIS&&c!==o.RISFullScreen||(z.ris=!0),"ssa-internal-video-player-test"===z.videoData.videoType&&(z.fmFunctions.setHasReplayFrame(!1),z.muteBtnShouldDisplay=!1),d.log("IncentVideoCtrl loaded: "+(new Date).getTime(),d.logLevel.trace);var e=document.getElementsByTagName("body")[0];z.videoData&&z.videoData.videoTime&&z.videoData.videoSource&&z.videoData.videoSource.videoformat_mp4&&q.initMoat(e,z.videoData.videoTime,z.videoData.videoSource.videoformat_mp4),s(),t(),H(),G(),u(),r.shouldSetSkipButtonFlow(z.closeData,z.fmFunctions.hasNextFrame())&&r.setSkipButtonFlow(z.closeData),a.$on("frame."+n.backButtonPressedEvent,function(a,b){z.closeData.allowBackButton&&b&&b.parentBackAction&&b.parentBackAction()}),a.$on("ssaIncentVideo.externalAd",function(a,b){b&&b.action&&"reward"===b.action&&z.fmFunctions.fireCallback("rewardCallback")}),a.$on("$destroy",function(){m.clearRingerSwitchCallbacks()}),z.fmFunctions.setBackButtonFrameResponsibility(!0),z.closeData.hideClose&&(w=!0,x=a.$on("ssaSpinner.show",function(){z.closeData.hideClose=!1}),y=a.$on("ssaSpinner.hide",function(){z.closeData.hideClose=!0}))}var w,x,y,z=this,A=0,B=0,C=!1,D=z.data.getVideoModel();z.videoData=D.get(),z.isReplayVideo=z.fmFunctions.getIsInReplayMode(),z.shouldShowPrivacyLink=z.fmFunctions.shouldShowPrivacyLink(),z.featuresModel=z.data.getFeaturesModel(),D.shouldSupportPlayableHTMLUrlFlow()&&(z.videoData.videoType=f.externalUnified),z.isPreCache=h.isPreCache(),z.isPreload=h.isPreload(),z.postAction=z.data.getPostActionModel(),z.hybrid=z.data.getHybridModel();var E=z.data.getTimerModel();z.timerData=angular.copy(E.get()),z.timerCompletionCountdown=E.getCompletionCountdown();var F=z.data.getCloseButtonModel();z.closeData=angular.copy(F.get()),z.closeData.allowBackButton=!0,z.closeClick=z.fmFunctions.closeClicked,z.setCloseState=z.fmFunctions.setCloseState,z.deviceDetails=h.getDeviceData(),z.productType=h.getProductType();var G=function(){z.ris?(z.timerData.timerClass="ssa-progress-bar",z.timerData.isSecured=h.isSecuredProtocol(),z.timerData.isPreCache=z.isPreCache):z.timerData.timerClass="ssa-timer"},H=function(){z.scriptData=null,D.isExternallyTracked()&&(D.initAdvertiserTrackingService(),z.scriptData=D.getExternallyTrackingScriptData(),a.$on("AdUnit.StartTimer",function(a,b){b.restartTimer===!0?(C&&(z.timerData.countTo=D.getVideoTime(),z.timerData.showTimer=!0),e(function(){z.videoData.currentTime=0},0)):C&&E.getCompletionCountdown()-A>0&&(z.timerData.countTo=D.getVideoTime()-(A+1),z.timerData.showTimer=!0)}),e(function(){
C=E.getShowTimer(),a.$apply(function(){z.timerData.showTimer=!1})},0))};v()}a.$inject=["$scope","$element","$window","LogService","$timeout","EXTERNAL_VIDEO_TYPE","IS_ANALYTICS_CATEGORIES","productSettingsService","VIDEO_EVENTS","CLOSE_BUTTON_STATES","adapter","analytics","SSA_Utils","BACK_BUTTON_EVENTS","TEMPLATES","MOAT_EVENTS","moatService","closeButtonService"];var b=angular.module("ssaIncentVideo",[]);b.directive("ssaIncentVideo",function(){var a={restrict:"E",templateUrl:"ssaIncentVideoTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaIncentVideoController"};return a}),b.controller("ssaIncentVideoController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){angular.isNumber(F)&&(L=c(w,1e3*F))}function v(){P={vpaidLoaded:function(a){C.fmFunctions.frameLoaded()},vpaidLoadedError:function(a){C.fmFunctions.frameLoadedError(a&&a.errMsg||"vpaidLoadedError")},moatStartTracking:function(){d.notifyStartTracking()},moatStopTracking:function(){d.notifyStopTracking()},omidStartSession:function(a){e.startSession(a)},omidFinishSession:function(){e.finishSession()},omidImpressionOccurred:function(){e.impressionOccurred()}},O={connected:function(){C.fmFunctions.frameLoaded()},getMraidData:function(){l.sendMessage({name:g.updateMraidData,data:N.getDataObject()},D,t)},open:function(a){return N.getCurrentState()===N.getStates().loading?void l.sendError("Call to open in loading state","open"):void j.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"external_browser"}})},openStoreUrl:A.call(null,arguments),expand:function(a){if(o.trackEvent(k.expand,{generalMessage:a||""}),N.isInLoadingState())return void l.sendError("Call to expand in loading state","expand")},setExpandProperties:function(a){o.trackEvent(k.setExpandProperties,{generalMessage:JSON.stringify(a)||""}),"object"==typeof a&&(delete a.isModal,angular.extend(N.getExpandProperties(),a),"undefined"!=typeof a.useCustomClose&&this.useCustomClose(a.useCustomClose),l.sendMessage({name:g.updateMraidData,data:N.getDataObject()},D,t))},useCustomClose:function(b){"boolean"!=typeof b||N.notAllowedToUseCustomClose()||(C.usedCustomClose=b,a.$apply())},close:function(){return N.isInLoadingState()?void l.sendError("Call to close in loading state","close"):(N.updateCurrentState(N.getStates().hidden),l.sendMessage({name:g.updateMraidData,data:N.getDataObject()},D,t),l.sendMessage({name:g.stateChange,data:N.getCurrentState()},D,t),C.fmFunctions.setCloseState(r.close),void C.fmFunctions.closeClicked())},setResizeProperties:function(a){o.trackEvent(k.setResizeProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(N.getResizeProperties(),a),l.sendMessage({name:g.updateMraidData,data:N.getDataObject()},D,t)},resize:function(){if(o.trackEvent(k.resize),N.isInLoadingState())return void l.sendError("Call to resize in loading state","resize")},setOrientationProperties:function(a){o.trackEvent(k.setOrientationProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(N.getOrientationProperties(),a),l.sendMessage({name:g.updateMraidData,data:N.getDataObject()},D,t)},supports:function(a){o.trackEvent(k.supports,{generalMessage:a||""})},log:function(a){o.trackEvent(k.log,{generalMessage:a})},reward:w}}function w(){M||(M=!0,C.closeData.hideClose=!1,L&&c.cancel(L),a.$emit("Video.Ended",{}),C.fmFunctions.fireCallback("completions"),C.fmFunctions.frameEnded())}function x(a,b){C.usedCustomClose||b&&b.parentBackAction&&b.parentBackAction()}function y(){1378027==p.getCRID()||Q.test(H)}function z(){return N.isInLoadingState()?void l.sendError("Call to openStoreUrl in loading state","openStoreUrl"):(o.trackTimingStop(n.clickDownloadNow,{eNameStart:n.endCardDisplayedToClickDownload,generalMessage:J.getOpenStrategy()}),j.call({method:"AdClicked",arguments:{}}),void(J.isUrlExist()&&(C.fmFunctions.setBackButtonFrameResponsibility(!0),s.handlePostActionClick(J,K,B,B))))}function A(){return i.getDebounceFunction(z,p.getDebounceClickConfig())}function B(){C.fmFunctions.setBackButtonFrameResponsibility(!1)}var C=this;C.usedCustomClose=!1;var D,E,F,G,H,I,J,K,L,M,N,O,P,Q=/ironSrc vpaid hack/;C.$onInit=function(){var c=C.data.getVideoModel();G=c.get(),H=G.videoSource.mraid||G.videoSource.html;var d=C.data.getCloseButtonModel();C.closeData=angular.copy(d.get()),C.closeClick=C.fmFunctions.closeClicked,C.shouldShowPrivacyLink=C.fmFunctions.shouldShowPrivacyLink(),J=C.data.getPostActionModel(),K=C.data.getHybridModel();var e=C.data.getTimerModel();F=e.getCompletionCountdown(),N=h.initModel().getMraidModel(),i.callOnVisible(u),a.$on("frame."+q.backButtonPressedEvent,x),C.fmFunctions.setBackButtonFrameResponsibility(!0),E=b.find("iframe")[0],D=E.contentWindow,v(),I=m.init({adFrame:E,element:D,callbacks:O,generalCallbacks:P,adData:{closeData:C.closeData,isVpaid:y()}}),E.contentDocument.write("<html><head>"+f.getMraidScript()+"</head><body>"+H+"</body></html>"),E.contentDocument.close(),o.trackTimingStart(n.endCardDisplayedToClickDownload)},C.$onDestroy=function(){I.destroy()}}a.$inject=["$scope","$element","$timeout","moatService","omidService","externalScriptsService","MRAID_COMMUNICATION_EVENTS","externalDataService","SSA_Utils","adapter","MRAID_ANALYTICS_CATEGORIES","iframeMessageService","mraidService","OW_ANALYTICS_CATEGORIES","analytics","productSettingsService","BACK_BUTTON_EVENTS","CLOSE_BUTTON_STATES","endCardService","MRAID_MSG_PREFIXES"];var b=angular.module("ssaMraidAdContainer",[]);b.component("ssaMraidAdContainer",{bindings:{data:"=",fmFunctions:"="},controller:"ssaMraidAdContainerController as vm",templateUrl:"ssaMraidAdContainerTemplate.html"}),b.controller("ssaMraidAdContainerController",a)}(),function(){var a=angular.module("ssaFrameManager",["frameComponentsServices","ssaCarouselEndCard","ssaFullScreenEndCard","ssaIncentBrandedAction","ssaIncentVideo","ssaCustomAdContainer","ssaMraidAdContainer","ssaEmvLayout"]);a.directive("ssaFrameManager",function(){var a={restrict:"E",templateUrl:"ssaFrameManager.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"ssaFrameManagerController"};return a}),a.directive("mandatoryAsset",function(){return{restrict:"A",link:function(a,b,c){function d(){b.unbind("load"),b.unbind("error")}function e(){b.bind("load",function(){d(),a.$apply(c.onLoadSuccess)}),b.bind("error",function(){d(),b.css("display","none"),a.$apply(c.onLoadError)})}e()}}}),a.controller("ssaFrameManagerController",["$scope","$element","$state","$stateParams","$compile","adapter","hybridService","analytics","endCardService","creativeService","closeButtonService","adUnitTrackingService","seamlessOpenStoreService","engagementClickService","CLOSE_BUTTON_STATES","CLOSE_BUTTON_EVENTS","BACK_BUTTON_EVENTS","OPEN_URL_STRATEGIES","LAYOUT_TYPE","moatService","omidService","SSA_Utils","storeKitService","ORIENTATIONS","productSettingsService","screenOrientationService","LAYOUT_CLASS","LogService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){Ba.getOpenStrategy()===r.seamless&&(m.closeClicked(),a.$emit(p.closeButtonClicked)),Da.isHybridFlow()?(g.flowEnded(!1),D()):Ra===o.close?D():k.notifyCloseClick()}function D(){w.clearStoreKit(Ba),J()&&n.fire(Ba),a.$emit("AdUnitTracking.FinishTracking",Ma),c.go("^"),E()}function E(){t.stopTracking(),Fa.isOmidSupportedAd()&&u.finishSession()}function F(){return Ga&&Ga.showPrivacyLink&&y.getPrivacyLinkUrl()}function G(){return Qa}function H(a){Qa=a}function I(a){Oa=a}function J(){return Oa}function K(a){ta=a}function L(){Ja=!0,M()}function M(){Ia&&Ja&&N()}function N(){Ga.isFirstFrame&&!Pa&&(Da.shouldHandleHybridFlow()&&g.flowStarted(),I(!0),pa.flowStarted(xa,ya)),X()}function O(a){Ga.isFirstFrame&&pa.flowStartedError(a)}function P(){Da.isHybridFlow()?(g.flowEnded(!0),D()):Ga.hasNextFrame()?$():pa.flowEnded()}function Q(a,b){var c={callbackKey:a};b&&angular.extend(c,b),xa.fireCallback(c)}function R(){Pa=!0;var a=Aa.getReplayFrame();W(a)}function S(){return Pa}function T(a){Ra=a,k.setAdapterCloseState(Ra)}function U(){return Ga.name}function V(){return Ga.hasNextFrame()}function W(b){na&&na.$destroy();var c=document.querySelector(".componentContainer");na=a.$new(),Ga=b;var d=Ga.componentName;Ha.componentData=oa;var f="<"+d+' data="vm.componentData" fm-functions="vm.FMFunctions"></'+d+">",g=e(f)(na);c.replaceChild(g[0],c.firstElementChild)}function X(){Ra=Ga.isFirstFrame?k.getCloseActionForFirstFrame(Pa,sa.closeAction,Ga.closeAction,Na):Ga.closeAction,k.setAdapterCloseState(Ra)}function Y(){var a=Ga.getNextFrame();W(a),ta=!1}function Z(a){return w.isReadyToDisplay(Ea)?void w.handleFlow(Ba):void a()}function $(){return w.isSupported(Ba)?void Z(Y):void Y()}function _(){Ga.hasNextFrame()?$():D()}function aa(a,b){Na=!0,pa.userCompletionNotification(Ma),Ra=k.getCloseActionPostUserCompletionNotification(sa.closeAction),k.setAdapterCloseState(Ra)}function ba(b,c){ta?a.$broadcast("frame."+q.backButtonPressedEvent,{parentBackAction:C}):C()}function ca(){a.$on("AdController.moveToNextFrame",_),a.$on("AdController.confirmCloseClicked",D),a.$on("AdUnit.confirmCloseClicked",D),a.$on("AdUnit.userCompletionNotification",aa),a.$on("frameManager."+q.backButtonPressedEvent,ba),a.$on("$destroy",v.destroyRingerListener)}function da(a){Ha.showFrameLayoutPortrait=a===x.PORTRAIT,Ha.showFrameLayoutLandscape=!Ha.showFrameLayoutPortrait}function ea(){var a="FrameManager | Error loading layout image";B.log(a,B.logLevel.trace),O(a)}function fa(){La++,La===Ka&&ha()}function ga(){var a=z.getScreenOrientation();da(a||x.PORTRAIT),Ha.frameLayoutImagePortrait=ma.getFrameUrlByOrientation(x.PORTRAIT),Ha.frameLayoutImageLandscape=ma.getFrameUrlByOrientation(x.LANDSCAPE),Ka=2,Ha.transparentLayoutClass=ma.getTransparentLayoutClass(),Ha.deviceType=y.getScreenType(),Ha.customFrameType=ma.getCustomStyleName()}function ha(){Ia=!0,M()}function ia(a){var b=85,c=100;return a&&a>=b&&a<=c}function ja(){var a=y.getPartialScreenWidthPercentage();if(a&&ia(a)){var b=angular.element(document.querySelector(".frameContentContainer"));b.css({width:a+"%"})}}function ka(){ja(),ga(),a.$on("screenOrientation.calculate",function(b,c){c&&c.orientation&&a.$apply(function(){da(c.orientation)})})}function la(){if(oa=j.getCreative(Ma),!oa)return void D();Da=oa.getHybridModel(),Ea=oa.getFeaturesModel(),Fa=oa.getMeasurementModel(),Ha.onElementFailedToLoad=ea,Ha.onElementLoaded=fa,v.bindListenerToRingerStatusEvent(),ca(),qa=oa.getType(),va=oa.getUxTemplateModel(),ra=va.getTemplateId(),pa=j.getProductCallbacks(),wa=oa.getCloseButtonModel(),sa=wa.get(),za=oa.getTrackingModel(),ua=za.get(),l.startTracking(ua.externallyTracked,Ma),Ba=oa.getPostActionModel(),Ca=Ba.get(),Da.shouldHandleHybridFlow()?g.initHybridFlow(Ba,Da,Ea):w.preloadAppInstallPage(Ba),xa=oa.getCreativeCallbacksObj(),ya=oa.getFillRateCallbacksObj(),Aa=oa.getFlowModel();var a=Aa.getFirstFrame();Ha.templateClass=ra,ma=oa.getFrameLayoutModel(),Ha.isPartialScreen=ma.isUsingFrameLayout(),Ha.layoutType=ma.getLayoutType(),Ha.isPartialScreen?ka():ha(),W(a)}var ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha=this,Ia=!1,Ja=!1,Ka=0,La=0,Ma=d.id,Na=!1,Oa=!1,Pa=!1,Qa=!0,Ra=o.close;Ha.isPartialScreen=!1,Ha.FMFunctions={frameEnded:P,frameLoaded:L,frameLoadedError:O,fireCallback:Q,replayClicked:R,getIsInReplayMode:S,closeClicked:C,setCloseState:T,setBackButtonFrameResponsibility:K,getCurrentFrameName:U,shouldShowPrivacyLink:F,getHasReplayFrame:G,setHasReplayFrame:H,hasNextFrame:V},la()}])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a,c,d,g,h){"AD.frameManager"===g.name&&b.is("AD")&&(e.setAdapterCloseState(f.close),e.notifyCloseClick())}function k(){a.$broadcast("frameManager."+g.backButtonPressedEvent)}var l,m=this,n=c.service();m.init=function(){l=n.getDBObj(),a.$on("$stateChangeSuccess",j),d.setAdunitResponsibilityAndAction(k),h.resetCreativeData(),h.addCreative(l).then(function(){b.go("AD.frameManager",{id:l.id?l.id:l.crid})},function(a){var b=i.getProduct();b.flowStartedError(a)})},m.init()}a.$inject=["$scope","$state","AdUnitDelivery","BackButtonService","closeButtonService","CLOSE_BUTTON_STATES","BACK_BUTTON_EVENTS","creativeService","productFactory"];var b=angular.module("ssaRV",[]);b.directive("ssaRv",function(){var a={restrict:"E",templateUrl:"ssaRVTemplate.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"ssaRVController"};return a}),b.controller("ssaRVController",a)}(),function(){function a(a,b){function c(c,f){var g=b.service();g.isUnrulyCarousel()?e(c,f):(a.$emit("AdUnit.AdLoaded",{}),d(c))}function d(c){var d=a.$on("AdController.adVisible",function(e,f){var g=b.service().getDemandSourceName(),h={callbackKey:"impressions"};c.fireCallback(h),a.$emit("AdUnit.adEventNotification",{eventName:h.callbackKey,dsName:g}),d()})}function e(b,c){var e=a.$on("AdController.UnrulyAdRequest",function(b,d){var g=JSON.parse(d);"ok"===g.result?c.track({trackingType:"request"}):(a.$emit("AdUnit.AdLoaded",{errMsg:g.data}),f()),e()}),f=a.$on("AdController.UnrulyAdResponse",function(e,g){var h=JSON.parse(g);if("hit"===h.result)c.track({trackingType:"responseHit"}),a.$emit("AdUnit.AdLoaded",{}),d(b);else{var i=function(){a.$emit("AdUnit.AdLoaded",{errMsg:h.data})};c.track({trackingType:"responseMiss",data:"generalError",cb:i})}f()})}return{flowStarted:function(a,b){c(a,b)},flowEnded:function(){},userCompletionNotification:function(){a.$broadcast("ssaNotification.show",{state:"after"})},registerImpressionOnVisible:d,flowStartedError:function(b){a.$emit("AdUnit.AdLoaded",{errMsg:b})}}}a.$inject=["$rootScope","AdUnitDelivery"];var b=angular.module("adUnitBaseProduct",[]);b.factory("baseProduct",a)}(),function(){var a=angular.module("adUnitProductFactory",["adUnitBaseProduct","adUnitOfferwallProduct"]);a.factory("productFactory",["$injector","productSettingsService","PRODUCT_TYPES",function(a,b,c){return{getProduct:function(){var d,e=b.getProductType();switch(e){case c.OfferWall:d=a.get("owBaseProduct");break;default:d=a.get("baseProduct")}return d}}}])}(),function(){function a(a,b){return{flowStarted:function(a,c){b.callOnVisible(a.fireCallback.bind(null,{callbackKey:"impressions"}))},flowEnded:function(){},userCompletionNotification:function(b){a.service().setAdCompleted(b)},flowStartedError:function(){}}}a.$inject=["AdUnitDelivery","SSA_Utils"];var b=angular.module("adUnitOfferwallProduct",[]);b.factory("owBaseProduct",a)}(),function(){function a(a,b,c){function d(){return i&&i.hasOwnProperty("getToken")&&null!==h?i.getToken(h):g}function e(a){return c.hasOwnProperty(a)?c[a]:c.TOKEN}function f(){a.onAFReady=function(a){i=a,document.body.addEventListener("touchstart",function(a){h=a})},function(a,c,d){var e,f=a.getElementsByTagName(c)[0];a.getElementById(d)||(e=a.createElement(c),e.id=d,e.src=b.url,f.parentNode.insertBefore(e,f))}(document,"script","AppsFlyer-jssdk")}var g="EMPTY_TOKEN",h=null,i=null;return{getToken:d,getTokenType:e,init:f}}a.$inject=["$window","AF_LIB","AF_TOKEN_TYPE"];var b=angular.module("AdUnit");b.factory("AFService",a)}(),function(){angular.module("AdUnit").factory("perimeterXService",["$window","SSA_Utils","ENV_OPTIONS",function(a,b,c){function d(b){if(!angular.isDefined(a._pxAppId)&&b){a._pxAppId=b._pxAppId,a._pxPubHost=b._pxPubHost,a._pxRootUrl=b._pxRootUrl;for(param in b.extraParams)a[param]=b.extraParams[param];a.pxInit=function(){a.PX.Events.subscribe("risk",function(a){i=a})},g(b.src,null),!b.qaPixel||j!==c.develop&&j!==c.stage||f(b.qaPixel)}}function e(){return i}function f(a){var b=new Image;b.src=a}function g(b,c){if(b){var d=a.document.createElement("script");d.type="text/javascript",d.onload=function(){c&&angular.isFunction(c)&&c()},d.src=b,d.async=1,a.document.getElementsByTagName("head")[0].appendChild(d)}}function h(){return{"{{pxScore}}":encodeURIComponent(e())}}var i,j=b.getEnv();return{getRisk:e,load:d,getScoreAlias:h}}])}(),function(){function a(a,b,c){var d={},e={},f=function(){a.$on("AdUnit.AdLoaded",function(a,b){var c={event:"AdLoaded"};angular.extend(c,b),d.sdkControllerEvent(c)}),a.$on("AdUnit.AdClicked",function(){d.sdkControllerEvent({event:"AdClicked"})}),a.$on("AdUnit.adEventNotification",function(a,b){b&&d.sdkControllerEvent({event:"adEventNotification",eventName:b.eventName,dsName:b.dsName||"",extData:b.extData||{}})}),a.$on("CloseBTN.Close",function(){d.sdkControllerEvent({event:"AdClose"})}),a.$on("AdUnit.adTracked",function(){d.sdkControllerEvent({event:"AdTracked"})}),a.$on("AdUnit.error",function(a,b){d.sdkControllerEvent(b)}),a.$on("AdUnit.AdSourceError",function(){var a={event:"AdLoaded",errMsg:"AdSourceError"};d.sdkControllerEvent(a)})};return{init:function(){d=this,a.$on("AdUnit.getConfig",function(){var a=b.search().productType,c={event:"GetConfig",productType:a};d.sdkControllerEvent(c)})},setEventDefaults:function(a){angular.extend(e,a)},initEvents:function(){f()},sdkControllerEvent:function(a){angular.extend(a,e),c.call({method:a.event,arguments:a})}}}a.$inject=["$rootScope","$location","adapter"];var b=angular.module("AdUnit");b.factory("AdControllerService",a)}(),function(){var a=angular.module("AdUnit");a.factory("adUnitCallbacksService",["$rootScope","LogService","productSettingsService","placeholderManager","moatService",function(a,b,c,d,e){function f(c){function d(d,e){d.url=c.replaceAllConstPlaceholders(d.url),a.$broadcast("PixelDirective.FirePixel",d),b.log("Callback: "+JSON.stringify(d),b.logLevel.debug,"event"),e||(d.fired=!0)}function f(a){isNaN(a)||angular.forEach(l,function(c,f){for(var g=c.length,h=0;h<g;h++){var i=c[h];!m.hasOwnProperty(f)&&!isNaN(i.at)&&i.at<=a&&!i.fired&&(d(i),e.dispatchEvent([i]),b.log("Fired pixel are not fired at:"+i.at,b.logLevel.debug))}})}function g(b){var c=h(b);c.callbackEvents.indexOf("adTracked")!==-1&&a.$broadcast("AdUnit.adTracked",""),f(b)}function h(a){var c=[],f=[];if(l.hasOwnProperty(a))for(var g=l[a],h=0;h<g.length;h++)g[h].hasOwnProperty("fired")&&g[h].fired!==!1||(d(g[h],m[a]),e.dispatchEvent([g[h]]),f.push(g[h]),b.log("Callback: "+JSON.stringify(g[h]),b.logLevel.debug,"event"),"notify"===g[h].event&&(b.log("adTracked",b.logLevel.debug,"event"),c.push("adTracked")));return{callbackEvents:c,firedCallbacks:f}}function i(a){if(l&&a&&"undefined"!=typeof a.callbackKey)switch(a.callbackKey){case"videoEnded":f(a.videoDuration);break;case"rewardCallback":g(k());break;default:g(a.callbackKey)}}function j(){l=c.callbacksData||{}}function k(){if(!l)return!1;for(var a in l)for(var b=l[a],c=0;c<b.length;c++)if("notify"===b[c].event)return a}var l,m={click:!0};return j(),{fireCallback:i}}function g(a){return b.log("callbacks list on initiation"+JSON.stringify(a.callbacks),b.logLevel.debug),new f({callbacksData:a.callbacks,replaceAllConstPlaceholders:d.replaceAllConstPlaceholders})}return{init:g}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdUnitMappingService",["CLOSE_BUTTON_STATES",function(a){var b={},c={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"FullScreenEndCardFrame",showPrivacyLink:!0,closeAction:a.confirm},FullScreenEndCardFrame:{name:"FullScreenEndCardFrame",componentName:"ssa-full-screen-end-card",showPrivacyLink:!1,closeAction:a.close}}},d={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",showPrivacyLink:!0,closeAction:a.confirm}}},e={firstFrame:"EMVFrame",frames:{EMVFrame:{name:"EMVFrame",componentName:"ssa-emv-layout",showPrivacyLink:!0,closeAction:a.close}}},f={firstFrame:"videoTypeFrame",frames:{videoTypeFrame:{mraid:{name:"MraidAdContainerFrame",componentName:"ssa-mraid-ad-container",showPrivacyLink:!0,closeAction:a.confirm},html:{name:"IncentVideoFrame",componentName:"ssa-incent-video",showPrivacyLink:!0,closeAction:a.confirm},htmlURL:this.html,"default":function(){return this.html}}}},g={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"IncentBrandedActionFrame",showPrivacyLink:!0,closeAction:a.confirm},IncentBrandedActionFrame:{name:"IncentBrandedActionFrame",componentName:"ssa-incent-branded-action",showPrivacyLink:!1,closeAction:a.close}}},h={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"IncentBrandedActionFrame",showPrivacyLink:!0,closeAction:a.confirm},IncentBrandedActionFrame:{name:"IncentBrandedActionFrame",componentName:"ssa-incent-branded-action",showPrivacyLink:!1,closeAction:a.close}}},i={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"CarouselFrame",showPrivacyLink:!0,closeAction:a.confirm},CarouselFrame:{name:"CarouselFrame",componentName:"ssa-carousel-end-card",showPrivacyLink:!1,closeAction:a.close}}},j={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"CustomAdContainerFrame",showPrivacyLink:!0,closeAction:a.confirm},CustomAdContainerFrame:{name:"CustomAdContainerFrame",componentName:"ssa-custom-ad-container",showPrivacyLink:!1,closeAction:a.close}}},k={firstFrame:"CarouselFrame",frames:{CarouselFrame:{name:"CarouselFrame",componentName:"ssa-carousel-end-card",showPrivacyLink:!0,closeAction:a.close}}},l={firstFrame:"FullScreenEndCardFrame",frames:{FullScreenEndCardFrame:{name:"FullScreenEndCardFrame",componentName:"ssa-full-screen-end-card",showPrivacyLink:!0,closeAction:a.close}}},m={firstFrame:"MraidAdContainerFrame",frames:{MraidAdContainerFrame:{name:"MraidAdContainerFrame",componentName:"ssa-mraid-ad-container",showPrivacyLink:!0,closeAction:a.confirm}}},n={firstFrame:"BannerInstallWithIconFrame",frames:{BannerInstallWithIconFrame:{name:"BannerInstallWithIconFrame",componentName:"ssa-banner-install-default",showPrivacyLink:!0,closeAction:a.none}}},o={incentVideo:{0:d},playableAd:{0:f},incentBrandedVideo:{0:g},CPVX:{0:h},CPVI:{0:i,3:c,31:c,32:c,34:c,35:c,6:e,61:e,62:e,64:e,65:e},imageInterstitial:{1:k,2:l,3:l},MRAID:{0:m},customEndCard:{0:j},staticBannerToExpanded:{0:n},staticBanner:{0:n}};return b.getAdUnitMapping=function(a){return a&&o.hasOwnProperty(a)?o[a]:o},b.getFlowByTemplate=function(a,c){var d=b.getAdUnitMapping(a);return d.hasOwnProperty(c)?d[c]:d[0]},b}])}(),function(){var a=angular.module("AdUnit");a.factory("adUnitObfuscationService",["$q","MSG_Service","$rootScope",function(a,b,c){var d,e,f={iframe:"#adSandbox",url:"",html:"",template:'<iframe class="obfuscationIframe" src="{{url}}" frameborder="0" scrolling="no"></iframe>',disabled:!1},g={},h=function(){};return{init:function(a){if(e=this,g=angular.extend(f,a),!g.disabled&&""!==g.html){b.init(),h();var c=g.template.replace("{{url}}",g.url);d=angular.element(c)}},getObfuscationIframe:function(){return d},inject:function(a){var c=g.html,e={html:c,style:"height:100%;"};angular.extend(e,a),b.postMessage("$$JSON:"+JSON.stringify(e),"*",d[0].contentWindow)}}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdUnitDelivery",["$window","$rootScope","$q","adapter","$injector",function(a,b,c,d,e){function f(){return i?i:i=window.db.hasOwnProperty("offers")?e.get("AdUnitModulesOW"):e.get("AdUnitModulesISAndRV")}function g(){if(null===h){var d=b.$on("AdUnitDelivery.resetCache",function(){h=null,d()}),e=c.defer();h=e.promise,a.db?(f().init(a.db),e.resolve(a.db)):j().then(function(b){window.ssa.getConfigHelperObj=b,a.db=b,f().init(b),e.resolve(b)})}return h}var h=null,i=null,j=function(){var a=c.defer();return d.call({method:"GetConfig",arguments:{},callback:function(b){a.resolve(b)}}),a.promise};return{service:f,getConfig:g}}]),a.factory("AdUnitModulesISAndRV",["$window","$rootScope","$q","SSA_Utils","WEBVIEW_TYPES",function(a,b,c,d,e){var f={};return f.init=function(a){this.db=a,this.validateJSONInput(),this.db.ext.position=this.getSessionDepth()},f.getPreLoad=function(){return!this.db.settings||"undefined"==typeof this.db.settings.preload||this.db.settings.preload},f.getAppInstallData=function(){return this.db.ext.appData},f.getRequestOpportunityData=function(){var a={};return this.db.ext.opportunityID&&(a.opportunityId=this.db.ext.opportunityID),this.db.settings.requestID&&(a.requestId=this.db.settings.requestID),a},f.getPostActionsData=function(){return this.db.ext.clickTags},f.getVideoType=function(){return this.db.ext.type},f.getUrlsToWarmup=function(){var a=angular.copy(f.getPostActionsData());return a&&this.db.settings.warmupUrlsNew&&a.pixelURL&&a.clickURL&&delete a.clickURL,a},f.getVideoData=function(){return this.db.ext.videoData},f.getTimerData=function(){return this.db.ext.counterData},f.getAdUnitCallbacks=function(){return this.db.ext.callbacks},f.getProperties=function(){return{sdkv:this.db.sdkv,preCache:this.db.settings.precache,os:this.db.os,osv:this.db.osv,apilvl:this.db.apilvl,mraid:this.db.mraid,enableBackButton:!0,logo:!0,isLogoEnabled:this.db.ext.enableLogo||!1,webviewType:this.db.webviewType}},f.getIsBackButtonEnabled=function(){var a=this.getProperties();return!(a.hasOwnProperty("enableBackButton")&&a.enableBackButton===!1)},f.isExternallyTracked=function(){return"true"===this.db.ext.externallyTracked||this.db.ext.externallyTracked===!0},f.getAdUnitType=function(){return this.db.ext.type},f.getCRID=function(){return this.db.crid},f.getInventoryId=function(){return this.db.inventoryId?this.db.inventoryId:"0"},f.getCreativeId=function(){return this.db.creativeId?this.db.creativeId:"0"},f.getCombinedBannerAndCreativeId=function(){return this.getCRID()+"_"+this.getCreativeId()},f.getCID=function(){return this.db.cid},f.getProductType=function(){return this.db.productType},f.getDemandSourceName=function(){return this.db.demandSourceName},f.getSessionDepth=function(){return this.db.settings&&this.db.settings.sessionDepth||-1},f.getForkingDelay=function(){return this.db.settings.forkingDelay||200},f.getIsSafeClick=function(){return null===this.db.settings.safeClick||!angular.isDefined(this.db.settings.safeClick)||this.db.settings.safeClick},f.getLandingId=function(){var a=0;return db.settings&&db.settings.landingId&&(a=parseInt(db.settings.landingId)),a},f.getTemplateId=function(){var a=0;return this.db.ext&&this.db.ext.templateid&&(a=parseInt(this.db.ext.templateid)),a},f.getInputValidation=function(){return this.validation},f.validateJSONInput=function(){var a={type:"object",properties:{properties:{properties:{sdkVersion:{type:"string"},preCache:{type:"string"},os:{type:"string"},osVersion:{type:"string"},enableBackButton:{type:"boolean"}},required:["sdkVersion","preCache","os","osVersion"]},adUnit:{properties:{properties:{properties:{productType:{"enum":["BrandConnect","OfferWall"]},adUnitType:{"enum":["incentBrandedVideo","CPVI","videoIS","picIS","incentVideo","carouselIS","videoIS","picIS"]},adUnitABTest:{type:"integer"},campaignId:{type:"integer"},bannerId:{type:"integer"},externallyTracked:{"enum":["true","false"]},debugMode:{"enum":["true","false"]}},required:["productType","adUnitType","adUnitABTest","campaignId","bannerId","externallyTracked"]},assets:{properties:{counterData:{properties:{completionCountdown:{type:"integer"},timeUntilTimer:{type:"integer"},showTimer:{"enum":["true","false"]},percentage:{type:"boolean"}},required:["completionCountdown","timeUntilTimer","showTimer"],type:["object","null"]},notificationsData:{properties:{textColor:{type:"string"},duringData:{type:"string"},afterData:{type:"string"}},required:["duringData","afterData","textColor"],type:["object","null"]},clickTags:{properties:{index:{type:"integer"},clickURL:{type:"string"},backgroundPortrait:{type:["string","null"]},backgroundLandscape:{type:["string","null"]}},type:["object","null"]},appData:{properties:{appImaged:{}},type:["object","null"]},videoData:{properties:{autoPlay:{"enum":["true","false"]},videoType:{"enum":["ssa-internal-video-player","ssa-external-video-player"]},videoTime:{type:"string"},videoSource:{properties:{html:{type:["string","null"]},videoformat_mp4:{type:["string","null"]},vast:{type:["string","null"]}}}},required:["videoType","videoSource","videoTime"],type:["object","null"]}}},callbacks:{properties:{}}},required:["properties","assets"]}},required:["properties","adUnit"]};this.validation=tv4.validateResult(this.db,a),this.validation.valid=!0},f.isUnrulyCarousel=function(){return"undefined"!=typeof this.db.ext.unrulyCarousel&&null!==this.db.ext.unrulyCarousel},f.getUnrulyData=function(){return this.db.ext.unrulyCarousel},f.updateDBObj=function(c){a.db=this.db=c,b.$broadcast("AdUnitDelivery.resetCache")},f.getProtocol=function(){var a=this.db.settings.protocol;return a&&""!==a||(a="http:"),a},f.isSecuredProtocol=function(){return"https:"===this.getProtocol()},f.getDBObj=function(){return a.db},f.getSettings=function(){return this.getDBObj().settings},f.isSeamless=function(){return this.db.settings.isSeamless},f.isMoatEnabled=function(){return!!this.db.settings.moatEnabled},f.getMoatData=function(){return this.db.settings.moatData},f.getOSVersion=d.getOSVersion,f.isRingerMutedOnStart=function(){return this.db.settings.ringerMuteOnStart===!0},f}]),a.factory("AdUnitModulesOW",["$window","$location","$q","ssaExternalParams","PRODUCT_TYPES","SSA_Utils","WEBVIEW_TYPES","adapter",function(a,b,c,d,e,f,g,h){function i(){return Y=c.defer(),h.call({method:"GetCompletionOffers",arguments:{},callback:function(b){a.owCompletionDB=b,Y.resolve(b)}}),Y.promise}function j(){return a.owCompletionDB}function k(a){var b=null;return angular.forEach(X.offers,function(c){var d=c.id?c.id:c.bannerId;d.toString()===a.toString()&&(b=c)}),b}function l(a){for(var b,c=a.offers,d=m(a),e=0;e<c.length;e++)b=c[e],n(b,d)}function m(a){return{currency:a.settings.currency,doublePromotion:{show:!(!a.settings.doublePromotionData||!a.settings.doublePromotionData.doublePromotion)&&a.settings.doublePromotionData.doublePromotion},freeLabel:a.textData.freeLabel,spinner:a.settings.spinner}}function n(a,b){a.globalData=b}function o(a){E(),l(a),X=a,X.settings.openLandingPageInExtBrowser=X.settings.externalBrowser,S()}function p(){var a={};return X&&X.settings&&(a={sdkv:X.settings.sdkv,os:X.settings.os,osv:X.settings.osv,apilvl:X.settings.apilvl,webviewType:X.settings.webviewType}),a}function q(){return X.type}function r(){return 0}function s(){return 0}function t(){return X.offers[0].creativeId?X.offers[0].creativeId:"0"}function u(){return 0}function v(){var a="";return X&&X.offers&&X.offers[0]&&(a+=X.offers[0].bannerId+"_",a+=X.offers[0].creativeId?X.offers[0].creativeId:"0"),a}function w(){return e.OfferWall}function x(){return X.demandSourceName}function y(){return-2}function z(){return X.settings.forkingDelay||200}function A(){return null===X.settings.safeClick||!angular.isDefined(X.settings.safeClick)||X.settings.safeClick}function B(){var a=0,b=K();return b.settings&&b.settings.templateId&&(a=b.settings.templateId),a}function C(){var a=0,b=K();return b.settings&&b.settings.templateId&&(a=b.settings.templateId),a}function D(){return{valid:!0}}function E(){X&&(X.offers&&0===X.offers.length||X.ext&&X.ext.emptyOWReason)&&F()}function F(){}function G(){return X&&X.ext&&X.ext.emptyOWReason}function H(){return{headerTitle:X&&X.textData&&X.textData.header||""}}function I(){var a=X.settings.protocol;return a&&""!==a||(a="http:"),a}function J(){return"https:"===I()}function K(){return a.db}function L(){return X.ext&&X.ext.externallyTracked&&("true"===X.ext.externallyTracked||X.ext.externallyTracked===!0)}function M(){var a=d.getParamByName("mode")||b.search().mode;return angular.isDefined(a)?a:void 0}function N(){return"internal"===M()}function O(){return!(!X||0!==X.offers.length)}function P(){return K().settings}function Q(){return K().textData}function R(a){if(a){var b=k(a);b&&(b.completed=!0)}}function S(){angular.forEach(K().offers,function(a,b){a.videoOffer&&a.videoOffer.ext&&(a.videoOffer.ext.position=b)})}function T(){if(X)return X.settings.isSeamless}function U(a){var b={};return a&&(a.opportunityID&&(b.opportunityId=a.opportunityID),
P().requestID&&(b.requestId=P().requestID)),b}function V(){return X.settings.moatData}function W(){return X.settings.ringerMuteOnStart===!0}var X,Y=null;return{init:o,getDBObj:K,isEmptyDB:O,getOWMode:M,isInternalOW:N,isEmptyOW:G,getHeaderData:H,isSecuredProtocol:J,getProtocol:I,getInputValidation:D,getLandingId:B,getTemplateId:C,getProductType:w,getDemandSourceName:x,getProperties:p,getAdUnitType:q,isExternallyTracked:L,getCRID:r,getCID:s,getCombinedBannerAndCreativeId:v,getCreativeId:t,getSettings:P,getOSType:f.getOSType,getOSVersion:f.getOSVersion,getInventoryId:u,setAdCompleted:R,getSessionDepth:y,getForkingDelay:z,isSeamless:T,getIsSafeClick:A,getRequestOpportunityData:U,getMoatData:V,isRingerMutedOnStart:W,getCompletionOffers:i,getCompletionOffersDBObj:j,getTextData:Q}}]),a.factory("ssaExternalParams",["$location",function(a){function b(){e||a.search()===[]||(e=a.search())}function c(a){if(e)return e[a]}function d(){return e||[]}var e;return{retrieveParamsFromUrl:b,getParamByName:c,getParams:d}}]),a.factory("$exceptionHandler",["$injector","GENERAL_EVENTS",function(a,b){return function(c,d){var e=a.get("analytics");e&&e.trackEvent(b.adUnitException,{generalmessage:c.message},{rvnomoreoffersreason:c.stack});var f=a.get("$rootScope");throw f&&f.$broadcast("AdUnit.error",{event:"AdError",errMsg:c.message,errCause:d,type:"unhandledException"}),c}}])}(),function(){var a=angular.module("AdUnit");a.factory("adUnitTrackingService",["$rootScope","LogService","analytics","VIDEO_EVENTS","IS_ANALYTICS_CATEGORIES","productSettingsService",function(a,b,c,d,e,f){var g,h,i={externalTracking:{useVideoDuration:!1}},j={},k=function(b,c){var d,e,h,i;d=a.$on("AdvertiserTracking.ExternallyTracked",function(a,b){c!=b.id&&c!=f.getCombinedIdWithBannerId(b.bannerId)||g.externallyTracked(b)}),e=a.$on("TimerUI.Completed",function(a,b){g.userCompletionNotification(b)}),h=a.$on("Video.Ended",function(a,c){g.adVideoEnded(c,b)}),i=a.$on("AdUnitTracking.FinishTracking",function(a,b){c===b&&(d(),e(),h(),i())})};return{startTracking:function(a,b){j={},g=this,j=angular.extend(j,i),h={externalTrackingReceived:!1,durationReached:!1,userNotificationFired:!1,adTracked:!1},k(a,b)},userCompletionNotification:function(){h.userNotificationFired===!1&&(b.log("AdUnit.userCompletionNotification",b.logLevel.trace),h.userNotificationFired=!0,a.$broadcast("AdUnit.userCompletionNotification",""))},adVideoEnded:function(a,b){(h.durationReached===!1||a.isReplayVideo)&&(h.userNotificationFired===!1&&(b===!1||b===!0&&h.externalTrackingReceived===!0&&j.externalTracking.useVideoDuration===!0)&&g.userCompletionNotification(),h.durationReached=!0)},externallyTracked:function(b){if(b.useVideoDuration&&(j.externalTracking.useVideoDuration=!0),h.externalTrackingReceived=!0,h.adTracked||(a.$broadcast("AdUnit.adTracked",""),h.adTracked=!0,c.trackTimingStop(d.videoExternallyTracked,{eNameStart:e.timeFromStartedToCompleted})),h.durationReached===!1)if(b.useVideoDuration){var f=b.trackedOnPlay;a.$broadcast("AdUnit.StartTimer",{restartTimer:f})}else g.userCompletionNotification();else g.userCompletionNotification()}}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdvertiserTrackingService",["PusherProviderService","$rootScope",function(a,b){var c,d={externallyTracked:"true",trackingProvider:"Pusher"},e={},f={Pusher:a};return{init:function(a){try{e=angular.extend(d,a),c=f[e.trackingProvider],c.init(e.trackingData)}catch(b){}},connect:function(){try{c.connect()}catch(a){}},getServiceUrl:function(a){return c.getServiceUrl(a)}}}])}(),function(){angular.module("AdUnit").factory("analytics",["adapter",function(a){var b={};b.trackEvent=function(b,c,d){if(b){var e={eName:b,label:c,data:d};a.call({method:"Analytics",arguments:{action:"fireEvent",eventParam:e}})}},b.trackTimingStart=function(b,c){if(b){c=c||(new Date).getTime();var d={eName:b,data:c};a.call({method:"Analytics",arguments:{action:"startTiming",eventParam:d}})}},b.trackTimingStop=function(b,c){if(b){c=c||{},c.timeStamp=c.timeStamp||(new Date).getTime();var d={eName:b,data:c};a.call({method:"Analytics",arguments:{action:"stopTiming",eventParam:d}})}};var c=function(b,c){if(c&&b){var d={data:c};a.call({method:"Analytics",arguments:{action:b,eventParam:d}})}};return b.setCustomData=function(a){c("setCustomData",a)},b.unsetCustomData=function(a){c("unsetCustomData",a)},b}])}(),function(){var a=angular.module("AdUnit");a.factory("androidOpenStoreService",["$rootScope","$timeout","adapter","productSettingsService","analytics","RV_ANALYTICS_CATEGORIES","LogService",function(a,b,c,d,e,f,g){function h(a){return d.shouldClickToStoreWithReferrer()?i(a):j(a)}function i(a){var b=a.split("?")[1];return void 0!==b&&k("id",a)?"market://details?"+b:(g.log("androidOpenStoreService | failedToReplaceStoreUrl | "+a,g.logLevel.trace),null)}function j(a){var b=k("id",a);return a&&a.indexOf("details?")!==-1&&b?"market://details?id="+b:(g.log("androidOpenStoreService | failedToReplaceStoreUrl | "+a,g.logLevel.trace),null)}function k(a,b){if(!b)return null;a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}return{convertGooglePlayToMarketUrl:h}}])}(),function(){function a(a){var b="",c=0;return a&&""!==a&&(b=a.split("/"),b.length>0&&(c=b.length-1)),b[c]||""}function b(b,c,d,e,f){function g(){var a=c.getSettings().urltocdn;return a&&""!==a?a:y}function h(){return c.isPreCache()?x:m()}function i(){var a;return b&&b.ssa&&b.ssa.assetsConfig?a=b.ssa.assetsConfig:d.trackEvent(e.emptySSAWindow,{generalMessage:JSON.stringify(b.ssa)}),a}function j(){return g()+u}function k(){return c.isPreCache()&&c.getSettings().ableToCache}function l(){return k()?f.libs:g()+v}function m(){return g()+w}function n(){var a=g(),b=a.substr(a.indexOf("://")+3);return b+w}function o(){return h()+a(i().assets.transparent)}function p(){return l()+i().external.obfuscation}function q(){return j()+i().unruly.unrulyObfuscation}function r(){return m()+i().mraid.script}function s(){return k()?f.libs+z:m()+A}var t="/adunit/dist",u=t+"/assets/obfuscators/",v=t+"/assets/obfuscators/externalObfuscation/1.0.0/",w=t+"/assets/",x=f.graphicAssets,y="https://networksdk.ssacdn.com",z="externalAPI.js",A="externalAPI/1.0.2/"+z;return{getTransparent:o,getObfuscation:p,getUnrulyObfuscation:q,getMraidScript:r,getAssetsPath:m,getUrlToCdn:g,getAssetPathWithoutProtocol:n,getExternalAPIScript:s}}b.$inject=["$window","productSettingsService","analytics","GENERAL_EVENTS","CACHE_FOLDERS_PATHS"];var c=angular.module("AdUnit");c.factory("assetsService",b)}(),function(){var a=angular.module("services.ssaCloseButton",[]);a.constant("CLOSE_BUTTON_EVENTS",{setCloseButtonState:"setCloseButtonState",adClose:"AdClose",closeButtonClicked:"closeButtonClicked"}),a.factory("closeButtonService",["CLOSE_BUTTON_STATES","CLOSE_BUTTON_EVENTS","X_BUTTON_ACTIONS","CLOSE_BUTTON_STYLES","adapter",function(a,b,c,d,e){function f(a){return a===c.showNext||a===c.moveToEndCard}function g(a){return a===c.hide||a===c.buttonHidden}function h(b,d,e,h){var i;return i=d===c.confirmNext?b&&h?a.nextFrame:a.confirmNextFrame:f(d)?a.nextFrame:g(d)?a.ignore:d===c.buttonClose?a.close:d===c.openConfirmDialog?b?a.nextFrame:a.confirm:b?a.nextFrame:e}function i(b){var d;return d=f(b)||b===c.confirmNext?a.nextFrame:a.close}function j(a){e.call({method:b.setCloseButtonState,arguments:{state:a}})}function k(a){e.call({method:b.adClose,arguments:a||{}})}function l(a,b){var c={};a&&(c.isEnable=a),b&&(c.position=b),e.call({method:"SetForceClose",arguments:c})}function m(a,b){return a.closeAction===c.moveToEndCard&&b}function n(a){a["class"]=d.skipButton,a.allowBackButton=!1,a.isSkipButtonFlow=!0}return{notifyCloseClick:k,setAdapterCloseState:j,getCloseActionForFirstFrame:h,getCloseActionPostUserCompletionNotification:i,setForceClose:l,shouldSetSkipButtonFlow:m,setSkipButtonFlow:n}}])}(),function(){var a=angular.module("AdUnit");a.factory("LogService",["$window","adapter",function(a,b){var c={debugLevel:1};return{logLevel:{none:0,error:1,debug:2,trace:3},log:function(a,d,e){if(0!==c.debugLevel){var f={origin:"AdUnit",event:"log",debugLevel:d,msg:encodeURI(a)};b.call({method:f.event,arguments:f})}}}}]),a.factory("MSG_Hash_Service",["$location","$interval",function(a,b){var c,d=1;return{postMessage:function(a,b,c){b&&(c=c||parent,c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a)},receiveMessage:function(d,e){c&&b.cancel(c),c=null,d&&(c=b(function(){var b=a.hash;""!==b&&"#"!==b&&(a.hash="#",d({data:b}))},500))}}}]),a.factory("MSG_Generic_Service",["$window",function(a){var b;return{postMessage:function(a,b,c){b&&(c=c||parent,c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")))},receiveMessage:function(c,d){c&&(b=function(a){return!("string"==typeof d&&a.origin!==d||"[object Function]"===Object.prototype.toString.call(d)&&d(a.origin)===!1)&&void c(a)}),a.addEventListener?a[c?"addEventListener":"removeEventListener"]("message",b,!1):a[c?"attachEvent":"detachEvent"]("onmessage",b)}}}]),a.factory("MSG_Service",["MSG_Generic_Service","MSG_Hash_Service","$window",function(a,b,c){var d=null;return{init:function(){return d||(d=c.postMessage?a:b),this},postMessage:function(a,b,c){"undefined"!=typeof d&&null!==d&&d.postMessage(a,b,c)},setEngine:function(a){return"undefined"!=typeof this[a]&&(d=this[a]),this}}}]),a.factory("SSA_Utils",["$window","$rootScope","$timeout","DOMAIN_OPTIONS","ENV_OPTIONS","ORIENTATIONS","LogService","analytics","DEBOUNCE_CLICK_EVENT","EXTERNAL_AD_VIEW_PRODUCTS","adapter",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a,b=document.domain;switch(b){case d.production:a=e.production;break;case d.develop:a=e.develop;break;default:a=e.stage}return a}function m(){P=b.$on("AdController.ringerSwitchState",function(a,b){U=b.isRingerSwitchSilent;for(var c=0;c<V.length;c++)V[c](a,b)})}function n(){return U}function o(a){U=!!a}function p(a){angular.isFunction(a)&&V.push(a)}function q(){V=[]}function r(){angular.isFunction(P)&&P()}function s(){Q=b.$on("AdController.adVisible",t)}function t(a,b){if(A())y();else{R=!0,Q();var c=T.length;if(c>0)for(var d=0;d<c;d++)T[0](a,b),T.splice(0,1)}}function u(a){return a&&a.isViewVisible}function v(a){var b=u(a);S&&"function"==typeof S&&b&&S()}function w(){return R}function x(a){angular.isFunction(a)&&(A()?S=a:T.push(a))}function y(){k.call({method:"handleGetViewVisibility",arguments:{},callback:v})}function z(a){w()?a():x(a)}function A(){return j.externalAdViewProductTypeArray.indexOf(b.productType)!==-1}function B(a){angular.isFunction(a)&&z(a)}function C(){A()&&(S=null)}function D(){var b=a.navigator.userAgent.toLowerCase(),c=b.match(/android\s([0-9\.]*)/);if(c&&c[1])return c[1]}function E(){var a=D();if(a)return parseInt(a.split(".")[0],10)}function F(){var a=D();if(a)return parseInt(a.split(".")[1],10)}function G(){var b=a.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(b&&b[1],10)}function H(){return/iP(hone|od|ad)/.test(a.navigator.platform)?"ios":"android"}function I(){var a="ios"===H()?G():E();return isNaN(a)?null:a}function J(a,b,d){var e=!1;return 0==b?a:function(){g.log("DEBOUNCE_TEST trying to click",g.logLevel.trace),e?h.trackEvent(i,{generalMessage:b}):(e=!0,a.apply(d,arguments),c(function(){g.log("DEBOUNCE_TEST getDebounceFunction in timeout",g.logLevel.trace),e=!1},b))}}function K(){return a.innerWidth}function L(){return a.innerHeight}function M(){return K()>L()?f.LANDSCAPE:f.PORTRAIT}function N(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth;return e}var O,P,Q,R,S,T=[],U=!1,V=[];return{getParamsAsObject:function(a){for(var b=a.split("&"),c={},d=0;b.length>d;d++){var e=b[d].split("=");c[e[0]]=e[1]}return c},getHDUrl:function(b){var c=b&&b.url||b;O||(O=a.devicePixelRatio||1);var d=null;return 3===O?b.hdMultiplicationFactor3?d=".@X3":b.hdMultiplicationFactor2&&(d=".@X2"):2===O&&b.hdMultiplicationFactor2&&(d=".@X2"),null!==d&&(c=c.slice(0,c.lastIndexOf("."))+d+c.slice(c.lastIndexOf("."))),c},getEnv:l,getAndroidVersion:D,getMajorAndroidVersion:E,getMinorAndroidVersion:F,_getiOSversion:G,getInnerWidth:K,getInnerHeight:L,getWindowOrientation:M,getOSType:H,getOSVersion:I,isAdUnitVisible:w,callOnVisible:B,removeOnVisibleListener:C,addHandlerToAdVisible:x,initListenToAdVisible:s,bindListenerToRingerStatusEvent:m,isRingerSwitchOn:n,addHandlerToRingerSwitch:p,clearRingerSwitchCallbacks:q,destroyRingerListener:r,getDebounceFunction:J,setDefaultRingerSwitchOn:o,getScreenWidth:N}}])}(),function(){var a=angular.module("communicationModule",["internalServiceModule"]);a.factory("adapter",["$rootScope","messageHandler",function(a,b){function c(){return+new Date+""+Math.random()}function d(a){if(!angular.isObject(a))return!1;if(!angular.isString(a.method)||!a.method.length)return!1;if(!angular.isObject(a.arguments))return!1;var d=c();if(a.callback){if(!angular.isFunction(a.callback))return!1;h[d]=a.callback}var e={id:d,method:a.method,arguments:a.arguments},f=b.sendMessage(e);return f}function e(a){if(!angular.isObject(a))return!1;window.ssa.fireCallbackObj=h[a.id];var b=h[a.id];delete h[a.id],angular.isFunction(b)&&b(a.data)}function f(b){if(!angular.isObject(b))return!1;if(!angular.isString(b.name)||!b.name.length)return!1;var c=b.name;delete b.name,a.$broadcast("AdController."+c,b)}function g(){b.onMessageReceived(function(a){window.ssa.didSendEvent=-1,a.id?(window.ssa.onMessageReceivedObj=a,e(a)):f(a)})}var h={};return g(),{call:d}}])}(),function(){var a=angular.module("communicationModule");a.factory("controllerMessageHandler",["$window","$location",function(a,b){function c(a){return a.arguments.iframeId=j,a.arguments.productType=k,a.arguments.demandSourceName=m,a.arguments.adType=l,a}function d(b){try{var d=JSON.stringify(c(b))}catch(e){return!1}return a.parent.postMessage(d,"*"),!0}function e(a){var b;if(!a.data)return!1;try{b=JSON.parse(a.data)}catch(c){b=f(a.data),b||(b={name:a.data})}i(b)}function f(a){var b="$$",c=null,d=a.indexOf(b);if(d!==-1){var e=event.data.slice(0,d),f=event.data.slice(d+b.length);c={name:e,params:f}}return c}function g(b){return i=b,a.addEventListener("message",e,!1),!0}function h(){var a=b.search().productType,c=b.search().demandSourceName;a&&(j=k=l=a),c&&(m=c)}var i,j,k,l,m;return h(),{sendMessage:d,onMessageReceived:g}}])}(),function(){var a=angular.module("communicationModule");a.factory("internalMessageHandler",["$q","$window","$location","$timeout","generalFunctionService",function(a,b,c,d,e){function f(a){return a.arguments.iframeId=m,a.arguments.productType=n,a.arguments.adType=o,a}function g(b){if(!b||"function"!=typeof b.then)return!1;var c=String(a.defer().promise.then),d=String(b.then);return c===d}function h(a){if(a&&a.method&&p[a.method]){var c=p[a.method],e=a.id,h=c(a.arguments);g(h)&&h.then(function(a){d(function(){l({data:a,id:e})},0)})}else{try{var i=JSON.stringify(f(a))}catch(j){return!1}b.parent.postMessage(i,"*")}return!0}function i(a){try{var b=JSON.parse(a.data)}catch(c){return!1}l(b)}function j(a){return l=a,b.addEventListener("message",i,!1),!0}function k(){var a=c.search().productType;a&&(m=n=o=a)}var l,m,n,o,p={OpenUrl:e.openUrl,ActionClick:e.actionClick};return k(),{sendMessage:h,onMessageReceived:j}}])}(),function(){var a=angular.module("communicationModule");a.factory("messageHandler",["$location","controllerMessageHandler","internalMessageHandler","nativeMessageHandler",function(a,b,c,d){function e(){var b=a.search().mode?a.search().mode:"default";k=l[b],k||(k=l["default"])}function f(a){return!!angular.isObject(a)&&(!(!angular.isString(a.method)||!a.method.length)&&(!!angular.isObject(a.arguments)&&(!!angular.isString(a.id)&&(!!angular.isDefined(k)&&(k.sendMessage(a),!0)))))}function g(a){j&&j(a)}function h(a){return!(!a||!angular.isFunction(a))&&(j=a,k.onMessageReceived(g))}function i(){e()}var j,k=void 0,l={msdkctrl:b,internal:c,"default":b,"native":d};return i(),{sendMessage:f,onMessageReceived:h}}])}(),function(){var a=angular.module("communicationModule");a.factory("nativeMessageHandler",["$window","$location",function(a,b){function c(a){return a.arguments.iframeId=k,a.arguments.productType=l,a.arguments.demandSourceName=n,a.arguments.adType=m,a.arguments.viewType=o,a}function d(){return/iP(hone|od|ad)/.test(a.navigator.platform)?"ios":"android"}function e(a){try{var b=JSON.stringify(c(a))}catch(d){return!1}return p(b),!0}function f(a){j(a)}function g(a){return j=a,window.ssa.onMessageReceived=f,!0}function h(){"ios"===d()?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.containerMsgHandler&&"function"==typeof window.webkit.messageHandlers.containerMsgHandler.postMessage&&(p=function(a){window.webkit.messageHandlers.containerMsgHandler.postMessage(a)}):"android"===d()&&"undefined"!=typeof containerMsgHandler&&"function"==typeof containerMsgHandler.receiveMessageFromExternal&&(p=function(a){containerMsgHandler.receiveMessageFromExternal(a)})}function i(){var a,c;a=b.search().productType,c=b.search().demandSourceName,o=b.search().viewType,h(),a&&(k=l=m=a),c&&(n=c)}var j,k,l,m,n,o,p=function(){};return i(),{sendMessage:e,onMessageReceived:g}}])}(),function(){var a=angular.module("creativeModule",["models.video","models.timer","models.appInstall","models.postAction","models.notifications","models.social","models.closeButton","models.mute","models.uxTemplate","models.image","models.tracking","models.frameLayout","models.features","models.flow","models.hybrid","featuresModule","models.measurement"]);a.factory("creativeService",["$window","$q","$injector","video","closeButton","mute","timer","social","postAction","appInstall","uxTemplate","adUnitCallbacksService","fillRateTrackingService","productFactory","image","tracking","frameLayout","features","flow","hybrid","measurement","productSettingsService","featuresService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a,b){a&&b&&(I[y(a)]=b)}function y(a){return"creative"+a}function z(a){function b(a,b,c){return n[a]||(n[a]=b.init(c)),n[a]}var c,n={};return c=a.ext,{getType:function(){return c.type},getVideoModel:b.bind(null,"video",d,c),getCloseButtonModel:b.bind(null,"closeButton",e,c),getMuteModel:b.bind(null,"mute",f,c),getTimerModel:b.bind(null,"timer",g,c),getSocialModel:b.bind(null,"social",h,c),getPostActionModel:b.bind(null,"postAction",i,c),getAppInstallModel:b.bind(null,"appInstall",j,c),getCreativeCallbacksObj:b.bind(null,"adUnitCallbacksService",l,c),getFillRateCallbacksObj:b.bind(null,"fillRateTrackingService",m,c),getHybridModel:b.bind(null,"hybrid",t,c),getUxTemplateModel:b.bind(null,"uxTemplate",k,c),getImageModel:b.bind(null,"image",o,c),getTrackingModel:b.bind(null,"tracking",p,c),getFrameLayoutModel:b.bind(null,"frameLayout",q,c),getFeaturesModel:b.bind(null,"features",r,c),getFlowModel:b.bind(null,"flow",s,c),getMeasurementModel:b.bind(null,"measurement",u,c)}}function A(a){return!!(a.ext.videoData&&a.ext.videoData.videoSource&&a.ext.videoData.videoSource.vast)}function B(a){var c=b.defer();return a=w.updateFeatureFlagsAccordingToSettings(a),A(a)?c.reject({errMsg:"vast parse fail in ad unit"}):c.resolve(a),c.promise}function C(a,b,c,d){B(a).then(function(a){b=new z(a),x(c,b),d.resolve(b)},function(a){d.reject(a.errMsg)})}function D(a){var c=a.id?a.id:a.crid,d=b.defer();if(!c)return d.reject("Invalid creative, missing creative id"),d.promise;var e=F(c);return e?d.resolve():C(a,e,c,d),d.promise}function E(){I={}}function F(a){return I[y(a)]}function G(){return H||(H=n.getProduct()),H}var H,I={};return{addCreative:D,getCreative:F,getProductCallbacks:G,resetCreativeData:E}}])}(),function(){function a(a){function b(b){if(b){if(b.ext.features||(b.ext.features={}),void 0!==a.isVideoClickable())b.ext.features.isVideoClickable=a.isVideoClickable(),b.ext.features.isSmartVideoClickable=!b.ext.features.isVideoClickable&&a.isSmartVideoClickable();else if(void 0===a.isSmartVideoClickable()||b.ext.features.isVideoClickable){if(b.ext.features.isVideoClickable&&a.getOverrideVideoClickable()){var d=c[a.getOverrideVideoClickable()]||c["default"];angular.extend(b.ext.features,d)}}else b.ext.features.isSmartVideoClickable=a.isSmartVideoClickable(),b.ext.features.isVideoClickable=!1;return b}}var c={1:{isSmartVideoClickable:!1,isVideoClickable:!0,clickOnVideoEnds:!1},2:{isSmartVideoClickable:!0,isVideoClickable:!1,clickOnVideoEnds:!1},3:{isSmartVideoClickable:!1,isVideoClickable:!0,clickOnVideoEnds:!0},4:{isSmartVideoClickable:!0,isVideoClickable:!1,clickOnVideoEnds:!0},"default":{}};return{updateFeatureFlagsAccordingToSettings:b}}a.$inject=["productSettingsService"],angular.module("featuresModule",[]).factory("featuresService",a)}(),function(){function a(a,b,c){function d(b){function d(){e=b.appData||{},e.appIcon&&(e.icon=a.getHDUrl(e.appIcon))}var e,f=function(){return e},g=function(b){var d=[];if(e&&(e.appImages||e.appBackground)){var f=e.appImages,g=e.adAssets,h=e.appBackground&&[e.appBackground],i=f||h;g&&(f=g),f&&!angular.isArray(f)&&(b||(i=[],f.portrait&&f.landscape?i=i.concat(f.portrait,f.landscape):f.both&&(i=f.both)),b===c.PORTRAIT&&(i=f.portrait),b===c.LANDSCAPE&&(i=f.landscape)),angular.forEach(i,function(b,c){d.push(a.getHDUrl(b.url||b))})}return d},h=function(){if(!b.isPreCache){var a=g();if(a&&a.length>0)for(var c=a.length,d=null,e=0;e<c;e++)d=new Image,d.src=a[e]}};return d(),{get:f,getAppImages:g,preFetchAppImages:h}}function e(a){var c={};return c.appData=a.appData,c.isPreCache=b.isPreCache(),new d(angular.copy(c))}return{init:e}}a.$inject=["SSA_Utils","productSettingsService","ORIENTATIONS"],angular.module("models.appInstall",[]).factory("appInstall",a)}(),function(){function a(a,b,c,d,e,f){function g(e){function f(){return d["default"]}function g(){return q.closeAction===a.hide||q.closeAction===a.buttonHidden}function h(){return d.whiteRound}function i(a){return a===c.PORTRAIT?q.closeUrl.portrait:q.closeUrl.landscape}function j(){return{DEC:q.DEC,X2S:q.X2S,LEB:q.LEB}}function k(){return b.close}function l(){return q}function m(a){return a&&!isNaN(a)&&a>0}function n(a,b){return m(a)&&(b&&a<=b||!b)}function o(){var a=!1,b=e.X2SP;return b&&b>0&&Math.random()<=b&&(a=!0),a}function p(){q={closeAction:e.xButtonAction,skipInTime:0,skipInText:"","class":f(),DEC:0,LEB:!1},q.hideClose=g(),q.DEC=e.DEC||q.DEC,q.LEB=e.LEB||q.LEB,q.X2S=o(),!q.hideClose&&n(e.skipInTime,e.videoTime)&&(q.skipInTime=parseInt(e.skipInTime)||q.skipInTime,q.skipInText=e.skipInText||q.skipInText),e.layoutData&&(q["class"]=e.layoutData.className||f(),q.closeUrl={portrait:e.layoutData.portrait?e.layoutData.portrait.closeButtonUrl:null,landscape:e.layoutData.landscape?e.layoutData.landscape.closeButtonUrl:null})}var q;return p(),{_getCloseDataDefault:f,shouldRemoveXServerFlag:g,get:l,getCloseDataWhite:h,getCustomLayoutCloseUrlByOrientation:i,getEndCardFlags:j,getDefaultCloseAction:k}}function h(a){var b={};b.xButtonAction=e.getXButtonBehavior()||a.xButtonBehavior||a.xButtonAction;var c=e.getSkipInTime();if(a.xButtonData&&a.xButtonData.skipInTime||c){b.skipInTime=c||a.xButtonData.skipInTime;var d=e.getSkipInText();b.skipInText="undefined"!=typeof d?d:a.xButtonData&&a.xButtonData.skipInText||"",a.videoData&&a.videoData.videoTime&&(b.videoTime=a.videoData.videoTime)}return a.layoutData&&(b.layoutData=a.layoutData),b.DEC=e.getDECFlag(),b.X2SP=e.getX2SPFlag(),b.LEB=e.getLEBFlag(),b}function i(a){var b=h(a);return new g(angular.copy(b))}return{init:i}}a.$inject=["X_BUTTON_ACTIONS","CLOSE_BUTTON_STATES","ORIENTATIONS","CLOSE_BUTTON_STYLES","productSettingsService","LogService"],angular.module("models.closeButton",[]).factory("closeButton",a)}(),function(){function a(){function a(a){function b(){return i.wiggle}function c(){a&&(i={wiggle:a.featuresData.wiggle,isVideoClickable:a.featuresData.isVideoClickable,isSmartVideoClickable:a.featuresData.isSmartVideoClickable,clickOnVideoEnds:a.featuresData.clickOnVideoEnds,allowHybrid:a.featuresData.allowHybrid,allowNativeEndCard:a.featuresData.allowNativeEndCard})}function d(){return i.isVideoClickable}function e(){return i.clickOnVideoEnds}function f(){return i}function g(){return i.allowHybrid}function h(){return i.allowNativeEndCard}var i={};return c(),{get:f,getShowWiggleFlag:b,isVideoClickable:d,isVideoClickableOnVideoEnds:e,isHybridOnShowEnabled:g,isNativeEndCardEnabled:h}}function b(b){var c={featuresData:b.features,isVast:b.videoData&&b.videoData.isVast};return new a(angular.copy(c))}return{init:b}}angular.module("models.features",[]).factory("features",a)}(),function(){function a(a,c,d,e,f,g){function h(h){function i(){var b=a.getFlowByTemplate(h.type,h.templateId);q=k(h.videoData),l(b)}function j(a){return a.hasOwnProperty(d.htmlURL)}function k(a){if(a&&a.videoSource){var b=a.videoSource,h=Object.keys(b),i=h.length;if(c.shouldSupportPlayableHTMLUrlFlow()){if(j(b))return d.htmlURL;e.trackEvent(f.playableHTMLUrlSourceMismatch,{generalMessage:g.supportHTMLUrlFlowWithMissingKey})}else if(j(b)&&1===i)return e.trackEvent(f.playableHTMLUrlSourceMismatch,{generalMessage:g.supportHTMLUrlFlowOffWithMissingKey}),d.htmlURL;for(var k=0;k<i;k++){var l=h[k];if(b[l]&&l!==d.htmlURL)return l}}}function l(a){if(a&&a.firstFrame&&a.frames){var c,d=a.frames,e=a.firstFrame;for(r.replayFrame=a.replayFrame;e&&d[e];){var f;"videoTypeFrame"===e?(f=d[e][q]||d[e]["default"](),"videoTypeFrame"===a.replayFrame&&(r.replayFrame=f.name)):f=d[e],f=angular.copy(f),e===a.firstFrame&&(f.isFirstFrame=!0,r.firstFrame=f.name);var g=new b(f);r.frames[f.name]=g,c&&c.setNextFrame(g),e=f.next,c=g}}}function m(){return r}function n(){return r.frames[r.firstFrame]}function o(){return r.frames[r.replayFrame]}function p(){return!!o()}var q,r={firstFrame:"",replayFrame:"",frames:{}};return i(),{getData:m,getFirstFrame:n,getReplayFrame:o,hasReplayFrame:p}}function i(a){var b={type:a.type,templateId:parseInt(a.templateid)||0,videoData:a.videoData};return new h(angular.copy(b))}return{init:i}}function b(a){function b(a){e=a}function c(){return e}function d(){return!!e}var e;return angular.extend(a,{getNextFrame:c,hasNextFrame:d,setNextFrame:b}),a}a.$inject=["AdUnitMappingService","productSettingsService","VIDEO_SOURCE_RESPONSE_KEYS","analytics","EXTERNAL_ANALYTICS_CATEGORIES","EXTERNAL_MISMATCH_SOURCE"],angular.module("models.flow",[]).factory("flow",a)}(),function(){function a(a,b,c,d){function e(e){function f(b){return n.frameUrl[b||a.PORTRAIT]}function g(){return n&&n.className}function h(){return n}function i(){return n&&n.html}function j(){return n&&n.frameUrl&&(n.frameUrl[a.PORTRAIT]||n.frameUrl[a.LANDSCAPE])}function k(){return j()?c.partialScreen:b.getLayoutType()}function l(){return b.isTransparentLayout()?d.transparentLayout:""}function m(){e&&(n={className:e.className,frameUrl:{}},n.frameUrl[a.PORTRAIT]=e.portrait?e.portrait.frameUrl:null,n.frameUrl[a.LANDSCAPE]=e.landscape?e.landscape.frameUrl:null,n.html=e.html)}var n=null;return m(),{get:h,getFrameUrlByOrientation:f,getCustomStyleName:g,getCustomLayoutUrl:i,isUsingFrameLayout:j,getLayoutType:k,getTransparentLayoutClass:l}}function f(a){var b={layoutData:a.layoutData};return new e(angular.copy(b.layoutData))}return{init:f}}a.$inject=["ORIENTATIONS","productSettingsService","LAYOUT_TYPE","LAYOUT_CLASS"],angular.module("models.frameLayout",[]).factory("frameLayout",a)}(),function(){function a(a){function b(b){function c(){e=b.shouldInitHybridFlow,d=b.isHybridFlow,g=b.viewUniqueId,f=b.clickTags?b.clickTags.storeAppId:""}var d,e,f,g,h=function(){return d},i=function(){return e||d},j=function(){return d},k=function(a){d=a},l=function(){return g},m=function(){return f},n=function(){return a.showHybridOnClick()};return c(),{shouldHandleHybridFlow:i,isHybridFlow:h,setIsHybrid:k,getViewUniqueId:l,getStoreAppId:m,isHybridDisplay:j,showHybridOnClick:n}}function c(a){return new b(angular.copy(a))}return{init:c}}a.$inject=["productSettingsService"],angular.module("models.hybrid",[]).factory("hybrid",a)}(),function(){function a(a){function b(b){function c(b){return b&&b!==a.PORTRAIT?e():d()}function d(){return h.portrait}function e(){return h.landscape}function f(){return h}function g(){b&&(h={portrait:b.portrait,landscape:b.landscape})}var h;return g(),{get:f,getImagePortrait:d,getImageLandscape:e,getImageByOrientation:c}}function c(a){var c={imageData:a.imageData};return new b(angular.copy(c.imageData))}return{init:c}}a.$inject=["ORIENTATIONS"],angular.module("models.image",[]).factory("image",a)}(),function(){function a(){function a(a){function b(){return c.omid}var c={};return c={omid:a.omid},{isOmidSupportedAd:b}}function b(b){var c={};return c.omid=!!b.ivt&&b.ivt.omid,new a(angular.copy(c))}return{init:b}}angular.module("models.measurement",[]).factory("measurement",a)}(),function(){function a(a,b,c,d,e){function f(a){function f(){return n}function g(){return a.templateId==b.RIS||a.templateId==b.RISFullScreen}function h(){return a.deviceOS===e.ios&&"string"==typeof a.deviceOSVersion&&a.deviceOSVersion.split(".")[0]>9}function i(){var b=a.deviceApiLevel?a.deviceApiLevel:a.deviceOSVersion;return a.deviceOS===e.android&&b>15}function j(){return a.deviceOS===e.ios?h():i()}function k(){return j()&&a.videoPlayer===d.internal&&!g()}function l(a){return c.isRingerSwitchOn()||a}function m(){n={toShow:k(),shouldStartMutedByFlag:a.muteFlag}}var n;return m(),{muteBtnConfig:f,shouldMutedVideo:l}}function g(b){var c=b.videoData?b.videoData.videoType:void 0,d={videoType:b.type,videoPlayer:c,templateId:b.templateid,deviceOS:a.getOS(),deviceOSVersion:a.getOSVersion(),deviceApiLevel:a.getAPILevel(),muteFlag:a.getMuteFlag()};return new f(angular.copy(d))}return{init:g}}a.$inject=["productSettingsService","TEMPLATES","SSA_Utils","VIDEO_TYPES","OPERATING_SYSTEMS"],angular.module("models.mute",[]).factory("mute",a)}(),function(){function a(a,b){function c(){var c=a.service().getDBObj(),f=d(c);return f&&(f.fadeout=e(),f.isLargeText="playableAd"==c.ext.type,f.showNotificationData=b.shouldShowNotifications()),f}function d(a){return a.ext&&a.ext.hasOwnProperty("notificationsData")?a.ext.notificationsData:null}function e(){var b=a.service().getDBObj(),c=3;return b.hasOwnProperty("settings")&&b.settings.hasOwnProperty("notificationFadeOutTime")?c=b.settings.notificationFadeOutTime:b.hasOwnProperty("ext")&&b.ext.hasOwnProperty("notificationsData")&&b.ext.notificationsData.hasOwnProperty("notificationFadeOutTime")&&(c=b.ext.notificationsData.notificationFadeOutTime),c}return{get:c}}a.$inject=["AdUnitDelivery","productSettingsService"],angular.module("models.notifications",[]).factory("notifications",a)}(),function(){function a(a,b,c,d,e,f){function g(g){function h(){return da}function i(){return da.title}function j(){return!!da.clickURL}function k(a){return c.replacePlaceholderWithMap(da.clickURL,a)}function l(){return!(!da.pixelURL&&!da.pixelURLArr)}function m(){return angular.isArray(da.pixelURLArr)}function n(){return angular.isArray(da.viewURLArr)}function o(a){return c.replacePlaceholderWithMap(da.pixelURL,a)}function p(a,b){if(!m())return null;for(var d=[],e=0;e<a.length;e++)d[e]=c.replacePlaceholderWithMap(a[e],b);return d}function q(){return da.clickThrough}function r(){return da.viewURLArr}function s(){return da.clickTracking}function t(){return da.engagementClickURL}function u(a,b){return a===e.VIDEO&&W()?q():k(b)}function v(){return da.storeAppId}function w(a){return a===e.VIDEO&&W()?angular.isDefined(s())&&s().length&&!x():l()}function x(){return da.videoPixelFired}function y(){return da.postActionFired||da.videoPixelFired}function z(a,b){return a===e.VIDEO&&W()?s():o(b)}function A(a){da.engagementClickURL&&(da.engagementClickURL=c.replacePlaceholderWithMap(da.engagementClickURL,a))}function B(){return A(a.getUserClickedAlias(y())),c.extendConstAliasesMap(a.getEngagementClickUrlSupportedPlaceholders()),da.engagementClickURL=c.replaceAllConstPlaceholders(da.engagementClickURL),da.engagementClickURL}function C(){var a=v();return angular.isDefined(a)&&a&&a.length}function D(){return da.backgroundLandscape;
}function E(){return da.pixelURLArr}function F(){return g.externalBrowser}function G(){if(g.rawExtData.features&&g.rawExtData.features.hasOwnProperty("externalBrowser"))return g.rawExtData.features.externalBrowser}function H(){return!(!G()&&"CPVX"!==ea)||G()!==!1&&(void 0===G()&&F()===!0)}function I(a){var b=g.openStrategies.redirect;return a===e.VIDEO&&W()?b=g.openStrategies.redirect:w(a)?b=f.isStoreKitLoaded()?g.openStrategies.S2SStoreKit:g.openStrategies.S2S:O()&&(b=g.openStrategies.seamless),b}function J(a){return a===e.VIDEO&&W()?M()||g.firePixelStrategies.pixel:a===e.VIDEO&&X()?g.firePixelStrategies.none:M()||g.firePixelStrategies.none}function K(){return M()||g.firePixelStrategies.pixel}function L(a){var c=I(a);return c===b.S2S||c===b.S2SStoreKit}function M(a){var b;return L(a)&&(b=P()&&"ios"===g.deviceData.os&&g.deviceData.sdkVersion>"5.35"?g.firePixelStrategies["native"]:g.firePixelStrategies.pixel),b}function N(){return g.forkingDelay}function O(){return g.isSeamless}function P(){return null===g.safeClick||!angular.isDefined(g.safeClick)||g.safeClick}function Q(){return J()===d.pixel&&"ios"===g.deviceData.os}function R(){return da.postActionFired}function S(){return t()}function T(){var b="",c=a.getDemandSourceName();return c&&(b=c),b+=a.getProductType()+a.getCRID()+v()}function U(){var b="",c=a.getDemandSourceName();c&&(b=c);var d=a.getCombinedBannerAndCreativeId();return b+=a.getProductType()+d+v()}function V(a,b){a===e.VIDEO?da.videoPixelFired=b:da.postActionFired=b}function W(){return g.videoData&&g.videoData.isVast}function X(){return g.isSmartVideoClickable&&l()&&!W()}function Y(){return da.externalBrowser}function Z(){return da.install}function $(){var a=[];if(g.callbacks&&g.callbacks.click&&"object"==typeof g.callbacks.click){for(var b=0;b<g.callbacks.click.length;b++)"object"==typeof g.callbacks.click[b]&&a.push(g.callbacks.click[b].url);return a}}function _(){return g.shouldSupportAF}function aa(a){fa=a}function ba(){return fa}function ca(){ea=g.rawExtData.type;var a={clickURL:g.rawExtData.clickurl,title:g.rawExtData.clicktitle},b={};g.rawExtData.clickData&&(b.clickURL=g.rawExtData.clickData.url,b.pixelURL=g.rawExtData.clickData.pixelURL,b.externalBrowser=g.rawExtData.clickData.externalBrowser,b.install=g.rawExtData.clickData.install),da=g.rawExtData.clickTags||b||a,g.videoData&&W()&&(da.clickThrough=g.videoData.clickThrough,da.clickTracking=g.videoData.clickTracking||$()),da.videoPixelFired=!1}var da,ea,fa=null;return ca(),{get:h,getPostActionTitle:i,createUrlWithPlaceholderReplaced:k,getClickActionUrl:u,isEndCardImpressionExist:n,isClickTrackingExist:l,isClickTrackingArrayExist:m,shouldFirePixel:w,isOfferClicked:y,shouldPreloadAppInstallPage:C,getPostActionAppID:v,createPixelUrlWithPlaceholderReplaced:o,replacePlaceholderClickTrackingArray:p,getBackgroundLandscape:D,getEngagementClickUrl:t,shouldOpenInExtBrowser:H,shouldFireEngagementClick:S,getOpenStrategy:I,getForkingDelay:N,setPixelFired:V,isSeamless:O,isSafeClick:P,getFirePixelStrategy:J,getFireEngagementClickStrategy:K,shouldDelayFirePixel:Q,getEndCardImpressionArray:r,getPixelUrls:z,getClickTrackingURLsArray:E,isPixelFired:R,isSmartVideoClickable:X,getViewUniqueId:T,getViewIdentifier:U,getExternalBrowserParam:Y,getInstallParam:Z,updateEngagementUrlWithPlacement:A,getUpdatedEngagementUrl:B,isUrlExist:j,shouldSupportAF:_,setAFToken:aa,getAFToken:ba}}function h(a){a.clickTags?a.clickTags.clickURL=c.replaceAllConstPlaceholders(a.clickTags.clickURL):a.clickurl=c.replaceAllConstPlaceholders(a.clickurl)}function i(a){if(a.clickTags&&a.clickTags.viewURLArr){for(var b=[],d=0;d<a.clickTags.viewURLArr.length;d++)a.clickTags.viewURLArr[d].url&&b.push(c.replaceAllConstPlaceholders(a.clickTags.viewURLArr[d].url));a.clickTags.viewURLArr=b}}function j(a){a.clickTags.pixelURL=c.replaceAllConstPlaceholders(a.clickTags.pixelURL)}function k(a){for(var b=[],d=0;d<a.clickTags.pixelURLArr.length;d++)a.clickTags.pixelURLArr[d].url&&b.push(c.replaceAllConstPlaceholders(a.clickTags.pixelURLArr[d].url));a.clickTags.pixelURLArr=b}function l(a){a.clickTags&&(a.clickTags.engagementClickURL=c.replaceAllConstPlaceholders(a.clickTags.engagementClickURL))}function m(c){var e=angular.copy(c);h(e),e.clickTags&&e.clickTags.pixelURLArr?k(e):e.clickTags&&e.clickTags.pixelURL&&j(e),i(e),l(e);var f={externalBrowser:a.getSettings().externalBrowser||a.getSettings().openLandingPageInExtBrowser,deviceData:a.getDeviceData(),rawExtData:e,callbacks:e.callbacks,videoData:e.videoData,openStrategies:b,forkingDelay:a.getForkingDelay(),isSeamless:a.isSeamless(),firePixelStrategies:d,safeClick:a.getIsSafeClick(),isSmartVideoClickable:e.features.isSmartVideoClickable,shouldSupportAF:e.features.ccvaf&&a.shouldAddAFIntegration()};return new g(f)}return{init:m}}a.$inject=["productSettingsService","OPEN_URL_STRATEGIES","placeholderManager","FIRE_PIXEL_STRATEGIES","CLICK_ACTION","storeKitService"],angular.module("models.postAction",[]).factory("postAction",a)}(),function(){function a(){function a(a){function b(){return d}function c(){d=a.socialData}var d;return c(),{get:b}}function b(b){var c={};return c.socialData=b.socialData,new a(angular.copy(c))}return{init:b}}angular.module("models.social",[]).factory("social",a)}(),function(){function a(){function a(a){function b(){c=a&&a.counterData||{}}var c,d=function(){return c},e=function(){return c.showTimerServerFlag===!0||"true"===c.showTimerServerFlag},f=function(){return c.showTimer},g=function(){return c.completionCountdown};return b(),{get:d,isShowTimerServerFlag:e,getCompletionCountdown:g,getShowTimer:f}}function b(b){var c={};return c.counterData=b.counterData,new a(angular.copy(c))}return{init:b}}angular.module("models.timer",[]).factory("timer",a)}(),function(){function a(){function a(a){function b(){return d}function c(){a&&(d={externallyTracked:"true"===a.externallyTracked||a.externallyTracked===!0})}var d;return c(),{get:b}}function b(b){var c={externallyTracked:b.externallyTracked};return new a(angular.copy(c))}return{init:b}}angular.module("models.tracking",[]).factory("tracking",a)}(),function(){function a(a){function b(a){function b(){return f}function c(){return f.landingId}function d(){return f.templateId}function e(){f={landingId:parseInt(a.landingId)||0,templateId:parseInt(a.templateId)||0}}var f;return e(),{get:b,getLandingId:c,getTemplateId:d}}function c(c){var d={templateId:c.templateid,landingId:a.getSettings().landingId};return new b(angular.copy(d))}return{init:c}}a.$inject=["productSettingsService"],angular.module("models.uxTemplate",[]).factory("uxTemplate",a)}(),function(){function a(a,b,c,d,e,f,g){function h(d){function e(){return d.externalTracking}function h(){return w}function i(){return!!d.unrulyCarousel}function j(){return"true"===d.externallyTracked||d.externallyTracked===!0}function k(a){return a&&a.width&&a.height&&a.width>0&&a.height>0}function l(){var a=w.videoDimensions,b=f.UNDEFINED;return k(a)&&(b=a.width>a.height?f.LANDSCAPE:f.PORTRAIT),b}function m(){return d.unrulyCarousel}function n(a){var c={html:a,disabled:!1};return i()?(c.url=b.getUnrulyObfuscation(),c.html="<div></div>"):c.url=b.getObfuscation(),c}function o(){a.init(e())}function p(){return w.videoType}function q(){w.videoSource&&w.videoSource.videoformat_mp4&&w.videoSource.videoformat_mp4.indexOf("IronSource360_")!==-1&&(w.videoType="ssa-internal-video-player-test")}function r(){var b={url:a.getServiceUrl(d.protocol),callback:a.connect,id:"pusher-script"};return b}function s(){var a=w&&w.videoSource.hasOwnProperty(g.htmlURL)&&w.videoSource.htmlURL.length>0;return d.shouldSupportPlayableHTMLUrlFlow?a:a&&1===Object.keys(w.videoSource).length}function t(){return w.videoTime}function u(){return w.isVast}function v(){w=d.videoData,q(),w.videoBufferPercentage=d.videoBufferPercentage,u()&&(w.vastVideoClickLimit="undefined"!=typeof d.vastVideoClickLimit?d.vastVideoClickLimit:1);var a=d.deviceData.apiLevel?d.deviceData.apiLevel:d.deviceData.osVersion;w.isBufferSupported="ios"==d.deviceData.os||a>=x;var e=p();e===c.internal?w.transparentPoster=b.getTransparent():e===c.external&&(w.obfuscationSettings=n(w.videoSource.html),w.isUnrulyCarousel=i(),w.unrulyData=m())}var w,x=21;return v(),{_getExternallyTrackedData:e,get:h,isExternallyTracked:j,getVideoTime:t,initAdvertiserTrackingService:o,getExternallyTrackingScriptData:r,getVideoOrientation:l,shouldSupportPlayableHTMLUrlFlow:s}}function i(a){if(a.sendPosition&&a.videoData.videoSource&&a.videoData.videoSource.html){var b=a.videoData.videoSource.html;b=e.replacePlaceholderWithMap(b,d.getCreativePositionAlias(a.position)),a.videoData.videoSource.html=b}}function j(a){var b=d.getProtocol();i(a);var c={videoData:a.videoData,externalTracking:a.externalTracking,externallyTracked:a.externallyTracked,unrulyCarousel:a.unrulyCarousel,protocol:b,deviceData:d.getDeviceData(),videoBufferPercentage:d.getSettings().videoBufferPercentage||0,vastVideoClickLimit:d.getSettings().vastVideoClickLimit,shouldSupportPlayableHTMLUrlFlow:d.shouldSupportPlayableHTMLUrlFlow()};return new h(angular.copy(c))}return{init:j}}a.$inject=["AdvertiserTrackingService","assetsService","VIDEO_TYPES","productSettingsService","placeholderManager","ORIENTATIONS","VIDEO_SOURCE_RESPONSE_KEYS"],angular.module("models.video",[]).factory("video",a)}(),function(){var a=angular.module("AdUnit");a.factory("dialogBoxService",["$rootScope",function(a){function b(b){function c(a){return a&&a.onDialogBoxOpen&&a.onDialogBoxClose}function d(a,b){"function"==typeof a&&a(b)}function e(){l=!0,d(b.onDialogBoxOpen)}function f(a,c){angular.isObject(c)&&(l=!1,d(b.onDialogBoxClose,c))}function g(){c(b)&&(j=a.$on("AdController.dialogBoxAboutToClose",f),k=a.$on("AdController.dialogBoxAboutToOpen",e))}function h(){j&&j(),k&&k()}function i(){return l===!0}var j,k,l=!1;return g(),{destroy:h,isDialogBoxOpen:i}}function c(a){return new b(a)}return{init:c}}])}(),function(){var a=angular.module("AdUnit");a.factory("engagementClickService",["adapter","analytics","RV_ANALYTICS_CATEGORIES","CLICK_ACTION",function(a,b,c,d){function e(e){if(e.shouldFireEngagementClick()){var f=e.getUpdatedEngagementUrl(),arguments={url:f,type:e.getFireEngagementClickStrategy()};e.setPixelFired(d.END_CARD,!0),b.trackEvent(c.engagementClickFired),a.call({method:"FirePixel",arguments:arguments})}}return{fire:e}}])}(),function(){var a=angular.module("AdUnit");a.factory("dapiCallbacksService",["DAPI_CONNECTION_EVENTS","DAPI_CALLBACK_NAMES",function(a,b){function c(){k(b.getDapiData)}function d(){k(b.close)}function e(){k(b.replay)}function f(a){k(b.open,a)}function g(a){k(b.openStoreUrl,a)}function h(a){k(b.useCustomClose,a)}function i(){k(b.reward)}function j(a){a=a.arguments,b[a.eventName]&&k(b[a.eventName],a.data)}function k(a,b){a&&n[a]&&angular.isFunction(n[a])&&n[a](b&&b.arguments?b.arguments:{})}function l(a){n=a||{}}function m(a){return o[a]||o["default"].bind(null,a)}var n,o={"default":function(){}};return o[a.getDapiData]=c,o[a.close]=d,o[a.replay]=e,o[a.open]=f,o[a.openStoreUrl]=g,o[a.useCustomClose]=h,o[a.reward]=i,o[a.triggerEvent]=j,{init:l,getHandler:m}}])}(),function(){var a=angular.module("AdUnit");a.factory("dapiService",["$rootScope","DAPI_CONNECTION_EVENTS","DAPI_CALLBACK_NAMES","GENERAL_EVENTS","productSettingsService","iframeMessageService","externalDataService","SSA_Utils","screenOrientationService","EXTERNAL_API_TYPE","DAPI_ANALYTICS_CATEGORIES","visibilityService","DAPI_MSG_PREFIXES","dapiCallbacksService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(c){function d(){return!!(L&&L.clientWidth&&L.clientHeight)}function e(){d()&&(F.updateScreenSize(L.clientWidth,L.clientHeight),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m))}function i(){e(),f.sendMessage({name:b.adResized,data:F.getScreenSize()},I,m),C()}function k(a,c){var d=!!c.isVisible;F.updateViewability(d);var e={};e.isViewable=d,c.changeReason&&(e.changeReason=c.changeReason),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.viewableChange,data:e},I,m)}function o(a,c){F.updateDapiDataCloseButtonVisibility(!c),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.closeButtonVisibilityChange,data:{isCloseButtonVisible:F.getDapiAdData().isCloseButtonVisible}},I,m)}function p(a,c){F.updateDapiDataTimeElapsed(c),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.timeUpdate,data:{timeElapsed:F.getDapiTimeData().timeElapsed}},I,m)}function q(){K=!0,d()&&(r(),C())}function r(){K&&J&&(F.updateViewability(!0),e(),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.viewableChange,data:{isViewable:F.getViewableValue()}},I,m))}function s(){G.connected(),F.updateState(F.getStates().ready),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.stateChange,data:F.getState()},I,m),f.sendMessage({name:b.ready,data:{}},I,m)}function t(){H&&f.sendMessage({name:b.getDapiUrl,data:B()},I,m)}function u(a){var b=a.name,c=a.data;return"connected"===b?void s():"getDapiUrl"===a.state?void t():void(c&&c.arguments&&(c.arguments.callback=v(a.data.id),n.getHandler(b).call(null,c)))}function v(a){return!!a&&function(c){f.sendMessage({name:b.handleFunctionCallback,data:{data:c,id:a}},I,m)}}function w(){E=a.$on("visibilityService.onVisibilityChanged",k),D=a.$on("screenOrientation.calculate",function(a,b){i()}),a.$on("Video.TimeTick",p),a.$on("CloseBtn.isHidden",o)}function x(){return!!(c&&c.element&&c.adFrame&&c.callbacks)&&(L=c.adFrame,G=c.callbacks,I=c.element,H=c.requestDapiUrl||!1,f.setMessageHandler(u,j.dapi),F=g.initModel().getDapiModel(),n.init(G||{},F,I),F.updateDeviceData(),F.updateAdData(c),F.updateAppData(),z(),w(),l.callOnVisible(q),void h.addHandlerToRingerSwitch(z))}function y(a){return F.getAudioVolumeValue()!==a}function z(){var a=h.isRingerSwitchOn()?0:100;y(a)&&(F.updateVolumeData(a),f.sendMessage({name:b.updateDapiData,data:F.getDataObject()},I,m),f.sendMessage({name:b.audioVolumeChange,data:F.getAudioVolumeValue()},I,m))}function A(){D(),E&&E(),h.destroyRingerListener()}function B(){return F.getDapiUrl()}function C(){J||(J=!0,r())}var D,E,F,G,H,I,J,K,L;return x(),{getDapiUrl:B,destroy:A}}function p(a){return new o(a)}return{init:p}}])}(),function(){var a=angular.module("externalDataModule",["models.dapiModel","models.mraidModel"]);a.factory("externalDataService",["mraidModel","dapiModel",function(a,b){function c(){function c(a,b){return d[a]||(d[a]=b.init()),d[a]}var d={};return{getMraidModel:c.bind(null,"mraidModel",a),getDapiModel:c.bind(null,"dapiModel",b)}}function d(){return e||(e=new c),e}var e;return{initModel:d}}])}(),function(){var a=angular.module("AdUnit");a.factory("iframeMessageService",["$window","analytics","EXTERNAL_MESSAGE_CONFIGS","EXTERNAL_API_TYPE","MRAID_ANALYTICS_CATEGORIES","SSA_Utils","DAPI_MSG_PREFIXES","MRAID_MSG_PREFIXES","EXTERNAL_ANALYTICS_CATEGORIES",function(a,b,c,d,e,f,g,h,i){function j(a,b,c){var d=a.data,e=a.name;return b&&e&&"undefined"!=typeof d&&c}function k(a){var b,c,d=a.data,e=d.indexOf(q+g.receive),f=d.indexOf(q+h.receive);if(e!==-1)c=m(d.slice(e+q.length),g),b=o;else{if(f===-1)return;c=m(d.slice(f+q.length),h),b=p}b(c)}function l(){a.addEventListener("message",k,!1)}function m(a,b){var c=[],d=a.split(b.receive);return"undefined"!=typeof d[1]&&(c=JSON&&JSON.parse(d[1])),angular.isObject(c)?c:null}function n(a,b){return q+b+JSON.stringify(a)}var o,p,q="$$";return l(),{sendMessage:function(a,c,d){if(!j(a,c,d))return void b.trackEvent(i.invalidExternalMessage,{generalMessage:JSON.stringify(a)});var e=n({name:a.name,data:a.data},d.send);c.postMessage(e,"*")},setMessageHandler:function(a,b){b===d.dapi?o=a:b===d.mraid&&(p=a)},sendError:function(a,c){b.trackEvent(e.error,{generalMessage:c+" | "+a}),this.sendMessage("error",{message:a,action:c})}}}])}(),function(){function a(a,b,c,d){function e(e){function f(){e&&(C=e.dapiData,D=e.dapiStates,g())}function g(){C.screenSize.width=c.getInnerWidth(),C.screenSize.width=c.getInnerHeight()}function h(){return d.secured+"://"+b.getAssetPathWithoutProtocol()+"dapi/"}function i(){return angular.extend({},C)}function j(){return D}function k(){return h()+C.version+"/dapi.js"}function l(a){C.isViewable=a}function m(a){C.state=a}function n(){return C.state}function o(a,b){C.screenSize.width=a,C.screenSize.height=b}function p(a){C.adData.isCloseButtonVisible=a}function q(a){C.adData.timeData.timeElapsed=a}function r(){return C.screenSize}function s(){return C.isViewable}function t(){return C.deviceData}function u(){var b=a.getDeviceData();C.deviceData.os=b.os,C.deviceData.osVersion=b.osVersion,C.deviceData.apiLevel=b.apiLevel,C.deviceData.deviceId=a.getDeviceId(),C.deviceData.deviceLanguage=a.getDeviceLanguage()}function v(b){var c=a.getRequestOpportunityData();C.adData.opportunityId=c.opportunityId,C.adData.requestId=c.requestId,C.adData.campaignId=a.getCID(),C.adData.bannerId=a.getCRID(),C.adData.creativeId=a.getCreativeId(),C.adData.productType=a.getProductType(),C.adData.isAFAd=!(!b.thirdPartyLibsConfigs||!b.thirdPartyLibsConfigs.supportAF)&&b.thirdPartyLibsConfigs.supportAF,C.adData.timeData.duration=b.duration||0,C.adData.timeData.timeElapsed=0,C.adData.isCloseButtonVisible=b.isCloseButtonVisible}function w(){C.appData.appKey=a.getApplicationKey(),C.appData.appOrientation=a.getApplicationOrientation(),C.appData.bundleId=a.getBundleId()}function x(a){C.audioVolume=a}function y(){return C.audioVolume}function z(){return C}function A(){return C.adData}function B(){return A().timeData}var C={},D={};return f(),{get:z,getDefaultData:i,getStates:j,getDapiUrl:k,updateDeviceData:u,updateAdData:v,updateAppData:w,updateVolumeData:x,updateViewability:l,updateState:m,updateDapiDataCloseButtonVisibility:p,updateDapiDataTimeElapsed:q,getDataObject:z,getState:n,updateScreenSize:o,getScreenSize:r,getViewableValue:s,getAudioVolumeValue:y,getDeviceData:t,getDapiAdData:A,getDapiTimeData:B}}function f(){var a={dapiStates:g,dapiData:h};return new e(angular.copy(a))}var g={loading:"loading",ready:"ready",resized:"resized",hidden:"hidden"},h={version:"1.0.15",screenSize:{width:0,height:0},deviceData:{os:"",osVersion:"",deviceId:"",deviceLanguage:""},adData:{opportunityId:"",requestId:"",bannerId:"",creativeId:"",campaignId:"",productType:"",isAFAd:!1,timeData:{duration:0,timeElapsed:0},isCloseButtonVisible:null},appData:{appKey:"",appOrientation:"",bundleId:""},state:g.loading,isViewable:!1};return{init:f}}a.$inject=["productSettingsService","assetsService","SSA_Utils","PROTOCOL_TYPES"],angular.module("models.dapiModel",[]).factory("dapiModel",a)}(),function(){function a(a,b,c){function d(d){function e(){d&&(D=d.mraidStates,E=d.customClosePositions,F=d.forceOrientations,G=d.placements,H=d.mraidData,f())}function f(){var a=g(),b=h();H.expandProperties.width=a,H.expandProperties.height=b,H.resizeProperties.width=a,H.resizeProperties.height=b,H.screenSize.width=a,H.screenSize.height=b,H.currentPosition.width=a,H.currentPosition.height=b,H.defaultPosition.width=a,H.defaultPosition.height=b}function g(){return a.getInnerWidth()}function h(){return a.getInnerHeight()}function i(){return angular.extend({},H)}function j(){return D}function k(){return H}function l(){return E}function m(){return F}function n(){return G}function o(){return H.screenSize}function p(){return H.expandProperties}function q(){return H.resizeProperties}function r(){return H.orientationProperties}function s(a,b){H.screenSize.width=a,H.screenSize.height=b}function t(){return H.state}function u(a){H.state=a}function v(){return H.isViewable}function w(a){H.isViewable=a}function x(a,b){H.defaultPosition.width=a,H.defaultPosition.height=b}function y(a,b){H.defaultPosition.width=a,H.defaultPosition.height=b}function z(){return H.audioVolume}function A(a){H.audioVolume=a}function B(){var a=b.service,d=a().getTemplateId(),e=c.get(),f=[4,34,5,35];return e.afterData.length>0&&f.indexOf(d)!==-1}function C(){return H.state===D.loading}var D={},E={},F={},G={},H={};return e(),{get:k,getDefaultData:i,getStates:j,getCustomClosePositions:l,getForceOrientations:m,getPlacements:n,getWindowWidthInDIP:g,getWindowHeightInDIP:h,getScreenSize:o,updateScreenSize:s,getCurrentState:t,updateDefaultPositionSize:x,updateCurrentPositionSize:y,getAudioVolume:z,updateCurrentState:u,getIsViewableValue:v,getDataObject:k,getExpandProperties:p,getOrientationProperties:r,updateIsViewableValue:w,updateAudioVolume:A,getResizeProperties:q,notAllowedToUseCustomClose:B,isInLoadingState:C}}function e(){var a={mraidStates:f,customClosePositions:g,forceOrientations:h,placements:i,mraidData:j};return new d(angular.copy(a))}var f={loading:"loading","default":"default",expanded:"expanded",resized:"resized",hidden:"hidden"},g={"top-left":"top-left","top-right":"top-right",center:"center","bottom-left":"bottom-left","bottom-right":"bottom-right","top-center":"top-center","bottom-center":"bottom-center"},h={portrait:"portrait",landscape:"landscape",none:"none"},i={interstitial:"interstitial",inline:"inline"},j={placementType:i.interstitial,expandProperties:{width:0,height:0,useCustomClose:!1,isModal:!0},orientationProperties:{allowOrientationChange:!1,forceOrientation:h.none},resizeProperties:{width:0,height:0,offsetX:0,offsetY:0,customClosePosition:g["top-right"],allowOffscreen:!0},screenSize:{width:0,height:0},currentPosition:{x:0,y:0,width:0,height:0},defaultPosition:{x:0,y:0,width:0,height:0},audioVolume:0,state:f.loading,isViewable:!1};return{init:e}}a.$inject=["SSA_Utils","AdUnitDelivery","notifications"],angular.module("models.mraidModel",[]).factory("mraidModel",a)}(),function(){var a=angular.module("AdUnit");a.factory("mraidCallbacksService",["analytics","MRAID_COMMUNICATION_EVENTS","adapter","MRAID_CALLBACK_NAMES","MRAID_ANALYTICS_CATEGORIES",function(a,b,c,d,e){function f(a,b){a&&w[a]&&angular.isFunction(w[a])&&w[a](b||{})}function g(){f(d.getMraidData)}function h(a){f(d.open,a)}function i(a){f(d.openStoreUrl,a)}function j(a){f(d.expand,a)}function k(a){f(d.setExpandProperties,a)}function l(a){f(d.useCustomClose,a)}function m(){f(d.close)}function n(a){f(d.setResizeProperties,a)}function o(){f(d.resize)}function p(a){f(d.setOrientationProperties,a)}function q(a){f(d.supports,a)}function r(a){f(d.log,a)}function s(){f(d.reward)}function t(a){return y[a]}function u(b){if(b){var c=x[b.name];return c?void c.call(null,b.data):void a.trackEvent(e.unknownFunction,{generalMessage:b.name})}}function v(a,b){w=a||{},x=b||{}}var w,x,y={};return y[b.getMraidData]=g,y[b.open]=h,y[b.openStoreUrl]=i,y[b.expand]=j,y[b.setExpandProperties]=k,y[b.useCustomClose]=l,y[b.close]=m,y[b.setResizeProperties]=n,y[b.resize]=o,y[b.setOrientationProperties]=p,y[b.supports]=q,y[b.log]=r,y[b.reward]=s,y[b.generalMessage]=u,{init:v,getHandler:t}}])}(),function(){var a=angular.module("AdUnit");a.factory("mraidService",["$rootScope","$timeout","$window","SSA_Utils","analytics","$interval","EXTERNAL_API_TYPE","MRAID_ANALYTICS_CATEGORIES","LogService","MRAID_MSG_PREFIXES","MRAID_COMMUNICATION_EVENTS","MRAID_STATES","mraidCallbacksService","visibilityService","productSettingsService","externalDataService","iframeMessageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(c){function n(){if(!(c&&c.callbacks&&c.adFrame))return!1;I=c.callbacks,M=c.adFrame,L=c.element,J=c.adData&&c.adData.closeData,K=c.adData&&c.adData.isVpaid,O=p.initModel().getMraidModel(),C=O.getCustomClosePositions(),D=O.getForceOrientations(),E=O.getPlacements();var b=O.getScreenSize();b.width>0&&b.height>0&&(F=!0),H=a.$on("screenOrientation.calculate",function(a,b){v()}),d.callOnVisible(y),N=a.$on("visibilityService.onVisibilityChanged",o),d.addHandlerToRingerSwitch(s),m.init(I,{1:c.generalCallbacks.vpaidLoaded,2:c.generalCallbacks.vpaidLoadedError,3:c.generalCallbacks.moatStartTracking,4:c.generalCallbacks.moatStopTracking,5:c.generalCallbacks.omidStartSession,6:c.generalCallbacks.omidFinishSession,7:c.generalCallbacks.omidImpressionOccurred,"default":angular.noop}),q.setMessageHandler(u,g.mraid)}function o(a,b){var c=!!b.isVisible;O.updateIsViewableValue(c),q.sendMessage({name:k.updateMraidData,data:O.getDataObject()},L,j),q.sendMessage({name:k.viewableChange,data:c},L,j)}function r(a){return O.getAudioVolume()!==a}function s(a){var b=d.isRingerSwitchOn()?0:100;(r(b)||a)&&(O.updateAudioVolume(b),q.sendMessage({name:k.updateMraidData,data:O.getDataObject()},L,j),q.sendMessage({name:k.audioVolumeChange,data:b},L,j))}function t(){I.connected()}function u(a){return a.name!==l.connected||K?a.name===l.mraidAdLoaded?void z():void m.getHandler(a.name).call(null,a.data):void t()}function v(){if(M&&M.clientWidth&&M.clientHeight){var a=M.clientWidth,b=M.clientHeight;O.updateScreenSize(a,b),O.updateDefaultPositionSize(a,b),O.updateCurrentPositionSize(a,b),q.sendMessage({name:k.updateMraidData,data:O.getDataObject()},L,j),q.sendMessage({name:k.sizeChange,data:O.getScreenSize()},L,j),F||(F=!0,z())}}function w(b){a.$evalAsync(function(){a.$broadcast("SkipIn.Tick",b)})}function x(){if(J&&J.skipInTime){var b=0;P=f(function(){w(b),b++},1e3),Q=a.$on("skipIn.skipInTimeEnded",function(a,b){f.cancel(P),i.log("ssaMraidAdContainerComponent skipIn timeout interval stop",i.logLevel.trace)})}}function y(a,c){G=!0,x(),R=b(function(){var a={mraidAdLoadedFlag:mraidAdLoadedFlag,adVisibleFlag:G,screenSizeIsSetFlag:F};e.trackEvent(h.adVisibleButNotReady,{generalMessage:JSON.stringify(a)})},S),z()}function z(){G&&F&&(b.cancel(R),A())}function A(){var a=!0,b=O.getStates()["default"];O.updateCurrentState(b),O.updateIsViewableValue(a),q.sendMessage({name:k.updateMraidData,data:O.getDataObject()},L,j),q.sendMessage({name:k.stateChange,data:b},L,j),q.sendMessage({name:k.ready,data:{}},L,j),q.sendMessage({name:k.viewableChange,data:a},L,j),s(!0)}function B(){H(),Q&&Q(),f.cancel(P)}var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=5e3;return n(),{destroy:B}}function s(a){return new r(a)}return{init:s}}])}(),function(){var a=angular.module("AdUnit");a.factory("externalScriptsService",["assetsService",function(a){function b(a){"function"==typeof a&&a()}function c(a){return['<script src="'+a+'"></script>'].join(" ")}function d(){return c(a.getMraidScript())}function e(){return a.getExternalAPIScript()}function f(a,c,d,e){var f=new XMLHttpRequest;f.addEventListener("load",function(){g(a,this.responseText),b(d)}),f.addEventListener("error",function(){b(e)}),f.open("GET",c),f.send()}function g(a,b){var c=i(b);a.srcdoc=c.innerHTML}function h(a){var b=document.createElement("script");return b.type="text/javascript",b.src=a,b}function i(a){var b=document.createElement("html");b.innerHTML=a;var c=h(e()),d=b.getElementsByTagName("head");return d&&d[0]&&d[0].appendChild(c),b}return{getMraidScript:d,getExternalAPIScript:e,injectExternalAPIScript:f}}])}(),function(){var a=angular.module("AdUnit");a.factory("fillRateTrackingService",["$rootScope","LogService",function(a,b){function c(c){function d(a,b){if(!a)return"";if(b)for(var c=b.length,d=0;d<c;d++)a=a.replace("{{"+b[d].key+"}}",encodeURIComponent(b[d].value));return a=a.replace(/\{\{[\w\d\s]*\}\}/g,"ok")}function g(c,d){var e={multiplePixels:c,cb:d};a.$broadcast("PixelDirective.FireMultiplePixels",e),b.log("Callbacks: "+JSON.stringify(e),b.logLevel.debug,"event")}function h(c,d){c.cb=d,a.$broadcast("PixelDirective.FirePixel",c),b.log("Callback: "+JSON.stringify(c),b.logLevel.debug,"event")}function i(a,b){var c;return a&&a.url&&(c={url:d(a.url,b),type:a.type}),c}function j(a,b,c){var d,f=e[a],j=!1;if("object"==typeof f)if(f.length>0){for(var k=[],l=0;l<f.length;l++)d=i(f[l],b),d&&(j=!0,k.push(d));g(k,c)}else d=i(f,b),d&&(j=!0,h(d,c));j||"function"!=typeof c||c()}function k(a){j("requestTracking",null,a)}function l(a){var b=[{key:f.eventResult,value:f.hit}];j("responseTracking",b,a)}function m(a,b){var c=[{key:f.eventResult,value:f.miss},{key:f.resultReason,value:a}];j("responseTracking",c,b)}function n(a){if(a&&e)switch(a.trackingType){case"request":k(a.cb);break;case"responseHit":l(a.cb);break;case"responseMiss":m(a.data,a.cb)}}function o(){e=c}return o(),{track:n}}function d(a){return new c(angular.copy(a.callbacks))}var e,f={hit:1,miss:2,eventResult:"eventResult",resultReason:"resultReason"};return{init:d}}])}(),function(){var a=angular.module("AdUnit");a.factory("hybridService",["$rootScope","$q","$timeout","SSA_Utils","analytics","adapter","CLICK_ACTION","productSettingsService","HYBRID_ANALYTICS_CATEGORIES","CLICK_TYPE","HYBRID_SHOW_TYPE","CCVAF_CLICK","AFService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.$on("AdController.hybridCampaignStatusChange",function(a,b){b&&"object"==typeof b&&b.viewUniqueId&&b.viewUniqueId===x.getViewUniqueId()&&x.setIsHybrid(!(!b.status||"success"!==b.status))});var b=a.$on("AdController.appStoreInsideClosed",function(a,c){c&&"object"==typeof c&&c.viewUniqueId&&c.viewUniqueId===x.getViewUniqueId()&&(b(),x.setIsHybrid(!1),q(1,0))});a.$on("AdController.appStoreInsideDisplayHybrid",function(a,b){b&&"object"==typeof b&&b.viewUniqueId&&b.viewUniqueId===x.getViewUniqueId()&&r()&&o(k.hybridOnShow)})}function o(b){e.trackEvent(i.hybridStoreEngaged,{generalmessage:b}),w.setPixelFired(g.END_CARD,!0);var c=w.createPixelUrlWithPlaceholderReplaced({"{{clickType}}":j.HYBRID});if(b===k.hybridOnClick&&w.shouldSupportAF()){var d=m.getToken();c=w.createPixelUrlWithPlaceholderReplaced({"{{ccvaf}}":d}),e.trackEvent(l,{generalMessage:m.getTokenType(d)})}if(c){var f={type:"pixel",at:"",url:c};a.$broadcast("PixelDirective.FirePixel",f)}}function p(a,b,c){w=a,x=b,y=c,n()}function q(a,b){var c=[{viewType:"controller",screenRatio:a},{viewType:"store",screenRatio:b}],d={hybridJson:c,viewUniqueId:x.getViewUniqueId()};f.call({method:"HybridChangeRatio",arguments:d})}function r(){return x.isHybridFlow()&&y.isHybridOnShowEnabled()}function s(){return z&&x&&x.isHybridFlow()&&x.showHybridOnClick()&&!y.isHybridOnShowEnabled()}function t(){z&&(z=!1,q(.3,.7),o(k.hybridOnClick))}function u(){d.callOnVisible(function(){r()?q(.3,.7):s()&&q(.9999,.1111)})}function v(a){x.isHybridFlow()&&(q(0,1),a||e.trackEvent(i.hybridVideoSkip))}var w,x,y,z=!0;return{initHybridFlow:p,flowEnded:v,flowStarted:u,showHybridOnClick:s,handleShowHybridOnClick:t}}])}(),function(){angular.module("AdUnit").factory("loadExternalFileService",["$window",function(a){function b(b){var c=a.document.createElement("link");c.rel="stylesheet",c.type="text/css",c.href=b,a.document.getElementsByTagName("head")[0].appendChild(c)}return{loadCustomCss:b}}])}(),function(){var a=angular.module("AdUnit");a.factory("loadImageAssetService",["$timeout","LogService",function(a,b){return function(c,d,e){b.log("loadImageAssetService | loadImageAsset "+c,b.logLevel.trace);var f=new Image,g=function(a){return a&&"function"==typeof a};f.onload=function(){b.log("loadImageAssetService | on image load success",b.logLevel.trace),g(d)&&d()},f.onerror=function(){b.log("loadImageAssetService | on image load failed",b.logLevel.trace),g(e)&&e()},a(function(){f.src=c})}}])}(),function(){angular.module("AdUnit").factory("moatService",["$rootScope","adapter","AdUnitDelivery","MOAT_EVENTS","LogService",function(a,b,c,d,e){function f(a,b,d){g(c.service().getMoatData())&&(y={start:!1,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1},v=u(a,c.service().getMoatData().ids,b,c.service().getMoatData().publisherCode,d),r())}function g(a){return a&&a.publisherCode&&a.ids}function h(){return!!v}function i(){h()&&(e.log("MOAT | AdUnit | moatService.startTracking()",e.logLevel.trace),j())}function j(){b.call({method:"MOATStartTracking",arguments:{},callback:function(a){}})}function k(){h()&&(e.log("MOAT | AdUnit | moatService.stopTracking()",e.logLevel.trace),v=null,l())}function l(){b.call({method:"MOATStopTracking",arguments:{},callback:function(a){}})}function m(a){h()&&a&&0!==a.length&&angular.forEach(a,function(a){var b=s(a);b&&(y.hasOwnProperty(a.originalName)&&(y[a.originalName]=!0),v.dispatchEvent(b))})}function n(){m([{isMoatEvent:!0,type:d.pause}])}function o(a){
a>0&&m([{isMoatEvent:!0,type:d.resume}])}function p(a){h()&&(x=a,q())}function q(){h()&&m([{isMoatEvent:!0,type:d.volumeChange}])}function r(){h()&&b.call({method:"GetDeviceVolume",arguments:{},callback:function(a){a&&a.deviceVolume&&(w=a.deviceVolume)}})}function s(a){if(!a||!a.isVastEvent&&!a.isMoatEvent)return null;if(!a||!a.isVastEvent&&!a.isMoatEvent)return null;var b={type:"",adVolume:x};if(a.isVastEvent){if(!a.originalName||!d.hasOwnProperty(a.originalName)||t(a.originalName))return null;b.type=d[a.originalName]}else a.isMoatEvent&&(b.type=a.type);return b}function t(a){return!!y[a]}function u(a,b,c,d,e){var f=document.createElement("script"),g=[];b={adData:{ids:b,duration:c,url:e},dispatchEvent:function(a){this.sendEvent?(g&&(g.push(a),a=g,g=!1),this.sendEvent(a)):g.push(a)}},c="_moatApi"+Math.floor(1e8*Math.random());var h,i;try{h=a.ownerDocument,i=h.defaultView||h.parentWindow}catch(j){h=document,i=window}return i[c]=b,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+d+"/moatvideo.js#"+c,b}var v=null,w="0",x=1,y={};return{initMoat:f,startTracking:i,stopTracking:k,notifyStartTracking:j,notifyStopTracking:l,dispatchEvent:m,videoPaused:n,videoPlaying:o,volumeChange:p}}])}(),function(){var a=angular.module("AdUnit");a.factory("modalService",["$q","$rootScope","$timeout",function(a,b,c){function d(){return l.modal.show===!0}function e(){return n}function f(c,d,e,f,g){return k=a.defer(),l.modal.text=d,l.modal.show=!0,l.modal.showCancel=e,l.modal.okButtonText=f||"OK",l.modal.closeButtonText=g||"Cancel",b.$emit("ssaModal.openModal",null,c,null,null,!0,null),b.$broadcast("ssaModal.disableScroll"),k.promise}function g(c,d,e,f,g,h){return k=a.defer(),l.modal.show=!0,l.modal.closeModalDelay=f.closeModalDelay||0,b.$emit("ssaModal.openModal",c,d,e,f,g,h),b.$broadcast("ssaModal.disableScroll"),k.promise}function h(a){k.resolve(a),c(function(){j()},l.modal.closeModalDelay)}function i(){k.reject(),j()}function j(){l.modal.show=!1,b.$emit("ssaModal.closeModal"),b.$broadcast("ssaModal.enableScroll")}var k,l={},m="modal",n={small:"modalSmall",medium:"modalMedium",large:"modalLarge"};return l.modal={show:!1,closeType:m},l.openModal=f,l.isModalOpen=d,l.closeModal=i,l.openCustomModal=g,l.getModalSize=e,l.modal.ok=h,l.modal.cancel=i,l}])}(),function(){angular.module("AdUnit").factory("nativeEndCardHelper",["$rootScope","adapter","AFService","analytics","CLICK_TYPE","FIRE_PIXEL_STRATEGIES","CCVAF_CLICK",function(a,b,c,d,e,f,g){function h(a,b){var e=a.getAFToken()||c.getToken();return b=a.createPixelUrlWithPlaceholderReplaced(angular.extend({},l,{"{{ccvaf}}":e})),d.trackEvent(g,{generalMessage:c.getTokenType(e)}),b}function i(b){var c=b.getFirePixelStrategy();if(c!==f.none){var d=b.createPixelUrlWithPlaceholderReplaced(l);b.shouldSupportAF()&&(d=h(b));var e={url:d,type:c};a.$broadcast("PixelDirective.FirePixel",e)}}function j(a,b,c){c&&(a[b]=c)}function k(a){var c=a.createUrlWithPlaceholderReplaced(l),d={url:c,type:"openUrl"};j(d,"appId",a.getPostActionAppID()),j(d,"viewUniqueId",a.getViewUniqueId()),j(d,"viewIdentifier",a.getViewIdentifier()),b.call({method:"ActionClick",arguments:d})}var l={"{{clickType}}":e.NATIVE};return{firePixel:i,openStoreKitUrl:k}}])}(),function(){var a=angular.module("AdUnit");a.factory("nativeEndCardService",["$rootScope","adapter","productSettingsService","AFService","nativeEndCardHelper","analytics","NATIVE_END_CARD_EVENTS","END_CARD_FRMAES","ADUNIT_EVENTS",function(a,b,c,d,e,f,g,h,i){function j(a){return!c.shouldDisableNativeEndCard()&&a.isNativeEndCardEnabled()}function k(){e.openStoreKitUrl(p),f.trackEvent(g.nativeEndCardOpened)}function l(){e.firePixel(p),p.shouldDelayFirePixel()?$timeout(k,p.getForkingDelay()):k()}function m(){f.trackEvent(g.nativeEndCardClosed),a.$broadcast("AdUnit.confirmCloseClicked","")}function n(b){p=b,f.trackEvent(g.endCardDisplayed,{currentFrame:h["native"]}),q=!0,a.$broadcast(i.VIDEO_STOP,""),l()}function o(){return q}var p,q=!1;return{isSupported:j,onClose:m,handleFlow:n,isFlowActive:o}}])}(),function(){angular.module("AdUnit").factory("omidService",["adapter","LogService",function(a,b){function c(c){b.log("OMID | AdUnit | omidService.startSession()",b.logLevel.trace),a.call({method:"OMIDStartSession",arguments:c})}function d(){b.log("OMID | AdUnit | omidService.finishSession()",b.logLevel.trace),a.call({method:"OMIDFinishSession",arguments:{}})}function e(){b.log("OMID | AdUnit | omidService.impressionOccurred()",b.logLevel.trace),a.call({method:"OMIDImpressionOccurred",arguments:{}})}return{startSession:c,finishSession:d,impressionOccurred:e}}])}(),function(){angular.module("AdUnit").factory("placeholderManager",function(){function a(a){return b(a,d)}function b(a,b){if(!angular.isString(a))return a;var c,d;for(var e in b)c=b[e],d=new RegExp(e+"|"+encodeURIComponent(e),"i"),a=a.replace(d,angular.isFunction(c)?c():c);return a}function c(a){angular.extend(d,a)}var d={};return{replaceAllConstPlaceholders:a,replacePlaceholderWithMap:b,extendConstAliasesMap:c}})}(),function(){var a=angular.module("AdUnit");a.factory("productSettingsService",["AdUnitDelivery","SCREEN_TYPES","placeholderManager","OPERATING_SYSTEMS","WEBVIEW_TYPES","DEBOUNCE_CLICK_DURATION","PRODUCT_TYPES","LAYOUT_TYPE","AD_CONTAINER_PRIVACY",function(a,b,c,d,e,f,g,h,i){function j(){return a.service().getSettings()}function k(){return a.service().getProtocol()}function l(){return a.service().getProductType()}function m(b){return a.service().getRequestOpportunityData(b)}function n(){return a.service().getDemandSourceName()}function o(){return a.service().isSecuredProtocol()}function p(){var a=j().precache;return"true"===a||a===!0}function q(){var a=j().preload;return"true"===a||a===!0}function r(){return j().deviceType||b.PHONE}function s(){return!!j().closeOWOnClick}function t(){var a=j().owFloatingX,b=!0;return u()&&(a=!0),angular.isDefined(a)&&(b=a===!1),b}function u(){return j().hasNotch||!1}function v(){return j().OXD?j().OXD:0}function w(){return j().customCss}function x(){return j().appKey}function y(){return j().appOrientation}function z(){return j().deviceId}function A(){return j().deviceLanguage}function B(){return j().bundleId}function C(){return j().placementId}function D(){return j().sdkAbName}function E(){return a.service().getSessionDepth()}function F(){return a.service().getForkingDelay()}function G(){var b=U();return a.service().isSeamless()&&b.os===d.ios&&b.webviewType===e.ui}function H(){return j().isVideoClickable}function I(){return j().hybridOnClick||!1}function J(){return j().isSmartVideoClickable}function K(){return a.service().getIsSafeClick()}function L(){return{"{{placementId}}":C()}}function M(){return{"{{ssaSessionDepth}}":E()}}function N(){return{"{{sdkAbName}}":D()}}function O(a){return{"{{in}}":a||!1}}function P(a){return{"{{uC}}":a||!1}}function Q(a){return{"{Position}":a}}function R(){return angular.extend({},P(),O())}function S(){return angular.extend({},L(),M(),N())}function T(){var a=j().linksData;return angular.forEach(a,function(a,b){a&&a.url&&(a.url=c.replaceAllConstPlaceholders(a.url))}),a}function U(){if(!Ca){var b=a.service();Ca={os:b.getProperties().os,osVersion:b.getProperties().osv,apiLevel:b.getProperties().apilvl,sdkVersion:b.getProperties().sdkv,webviewType:b.getProperties().webviewType}}return Ca}function V(){return U().os}function W(){return U().osVersion}function X(){return U().apiLevel}function Y(){return a.service().getCRID()}function Z(){return a.service().getCID()}function $(){return f}function _(){return j().warmupUrls||j().warmupUrlsNew}function aa(){return j().DEC}function ba(){return j().X2SP}function ca(){return j().LEB}function da(){return j().skipInTime}function ea(){return j().skipInText}function fa(){return j().xButtonBehavior}function ga(){return l()!==g.OfferWall}function ha(){return j().disableNativeEndCard}function ia(){return j().overrideVideoClickable}function ja(){return j().isTransparentLayout||!1}function ka(){return j().shouldStartMuted}function la(){var a=j().shouldClickToStoreWithReferrer;return null===a||!angular.isDefined(a)||a}function ma(){return j().privacyLinkUrl}function na(){return a.service().getCreativeId()}function oa(){return Y()+"_"+na()}function pa(a){return a+"_"+na()}function qa(){return j().shouldReportMOATVolumeOne}function ra(){return j().removeTranslateZOnCloseButton||!1}function sa(){return l()===g.Banner?h.bannerLayout:h.fullScreen}function ta(){return l()!==g.Banner}function ua(){return j().showMissingCoinsOnIntermediate||!1}function va(){return!ua()}function wa(){return j().loadCompletionOffersOnShowOW||!1}function xa(){return j().openNewContactSupportPage||!1}function ya(){return j().partialScreenWidthPercentage||!1}function za(){return j().ccvaf||!1}function Aa(){return j().supportPlayableHTMLUrlFlow||!1}function Ba(){return j().adContainerInfoText||i.defaultText}var Ca;return{getSettings:j,getProtocol:k,getProductType:l,getDemandSourceName:n,getRequestOpportunityData:m,isSecuredProtocol:o,isPreCache:p,isPreload:q,isOWCloseOnClick:s,isOWCloseShouldStickToHeader:t,getOWCloseDelayDuration:v,getCustomCss:w,getDeviceData:U,getOS:V,getOSVersion:W,getAPILevel:X,getScreenType:r,getPlacementId:C,getLinksData:T,getSupportedPlaceholderAliasesMap:S,getCreativePositionAlias:Q,getCRID:Y,getSessionDepth:E,getCID:Z,getForkingDelay:F,isSeamless:G,isVideoClickable:H,isSmartVideoClickable:J,getIsSafeClick:K,getDebounceClickConfig:$,shouldWarmupUrls:_,getDECFlag:aa,getX2SPFlag:ba,getLEBFlag:ca,getSkipInTime:da,getSkipInText:ea,getXButtonBehavior:fa,getInteractionAlias:O,getUserClickedAlias:P,getEngagementClickUrlSupportedPlaceholders:R,isStoreKitSupported:ga,shouldDisableNativeEndCard:ha,getOverrideVideoClickable:ia,isTransparentLayout:ja,getMuteFlag:ka,getApplicationKey:x,getApplicationOrientation:y,getDeviceId:z,getDeviceLanguage:A,getBundleId:B,hasNotch:u,showHybridOnClick:I,getPrivacyLinkUrl:ma,shouldClickToStoreWithReferrer:la,getCreativeId:na,getCombinedBannerAndCreativeId:oa,getCombinedIdWithBannerId:pa,shouldReportMOATVolumeOne:qa,shouldRemoveTranslateZOnCloseButton:ra,getLayoutType:sa,shouldShowNotifications:ta,showMissingCoinsOnIntermediate:ua,shouldLoadCompletionOffersOnShowOW:wa,showContactSupportOnFooter:va,shouldOpenNewContacSupportPage:xa,getPartialScreenWidthPercentage:ya,shouldAddAFIntegration:za,shouldSupportPlayableHTMLUrlFlow:Aa,getAdContainerInfoText:Ba}}])}(),function(){var a=angular.module("AdUnit");a.factory("PusherProviderService",["$rootScope","LogService",function(a,b){var c={},d={url:"//js.pusher.com/2.2/pusher.min.js"},e={},f=!1,g=function(){var c=(new Date).getTime();e.bind("connected",function(){var d=(new Date).getTime(),e=d-c;b.log("AdUnit.pusherconnected. Connection time: "+e+". Total load time: "+(d-a.mainControllerLoadTime),b.logLevel.trace)}),e.bind("initialized",function(){b.log("AdUnit.pusherinitialized",b.logLevel.trace)}),e.bind("unavailable",function(){b.log("AdUnit.pusherunavailable",b.logLevel.trace)}),e.bind("disconnected",function(){b.log("AdUnit.pusherdisconnected",b.logLevel.trace)}),e.bind("connecting",function(){b.log("AdUnit.pusherconnecting",b.logLevel.trace)}),e.bind("failed",function(){b.log("AdUnit.pusherfailed",b.logLevel.trace)})},h=function(c){b.log("AdUnit.pushercompletion: bannerid->"+c.bannerId+" config.id->"+d.id,b.logLevel.trace),d.id==c.bannerId&&(c.useVideoDuration=d.useVideoDuration,c.trackedOnPlay=d.trackedOnPlay,a.$broadcast("AdvertiserTracking.ExternallyTracked",c))};return{init:function(a){angular.extend(d,a)},connect:function(){f||(c=new Pusher(d.key,{encrypted:!0}),e=c.connection,g(),f=!0);var a=c.channel(d.channel);a||(a=c.subscribe(d.channel),a.bind("completion",h))},getServiceUrl:function(a){return(a||"https:")+d.url}}}])}(),function(){var a=angular.module("AdUnit");a.factory("screenOrientationService",["$window","$rootScope","$timeout","SSA_Utils","analytics","GENERAL_EVENTS",function(a,b,c,d,e,f){function g(){return d.getInnerWidth()>0&&d.getInnerHeight()>0}function h(){return!!g()&&d.getWindowOrientation()}function i(){return!!g()&&{innerWidth:d.getInnerWidth(),innerHeight:d.getInnerHeight()}}function j(){var a=d.getWindowOrientation(),c=d.getInnerWidth(),e=d.getInnerHeight();b.$broadcast("screenOrientation.calculate",{orientation:a,innerWidth:c,innerHeight:e})}function k(){g()?(o&&c.cancel(o),j()):n=c(k,100)}function l(){n&&c.cancel(n),o&&c.cancel(o),o=c(function(){e.trackEvent(f.resizeTimeout,{}),j()},1e4),k()}function m(){a.addEventListener("resize",l),d.callOnVisible(l)}var n,o,p={};return p.getScreenOrientation=h,p.getScreenSize=i,m(),p}])}(),function(){var a=angular.module("AdUnit");a.factory("seamlessOpenStoreService",["$rootScope","$timeout","adapter","productSettingsService","analytics","RV_ANALYTICS_CATEGORIES","CLOSE_BUTTON_EVENTS",function(a,b,c,d,e,f,g){function h(a,b,c){var e,f=d.getDeviceData();return e="ios"===f.os?j(a,b,c):i(a,b,c)}function i(a,b,d){c.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"store"},callback:function(){angular.isFunction(b)&&b()}})}function j(c,d,h){function i(a){l(),m(o),p&&p(),q&&q(),b.cancel(j),angular.isFunction(a)&&a()}var j,n=1e4;k(!0);var o="hiddenIframe-"+Date.now();j=b(function(){e.trackTimingStop(f.failedOpenStoreWithSeamless,{eNameStart:f.handlePostActionClick}),i(h)},n);var p=a.$on("AdController.viewableChange",function(a,b){b&&!b.isViewable&&(e.trackTimingStop(f.seamlessSuccess,{eNameStart:f.handlePostActionClick}),i(d))}),q=a.$on(g.closeButtonClicked,function(a,b){i(h)}),r={type:"htmlElement",htmlElement:'<iframe id="'+o+'" style="display: none;" frameborder="0" scrolling="no" src="'+c+'"></iframe>'};return a.$broadcast("PixelDirective.FirePixel",r),o}function k(c){o=!0,b(function(){a.$broadcast("ssaSpinner.show",{showOverlay:c})})}function l(){o=!1,b(function(){a.$broadcast("ssaSpinner.hide")})}function m(a){if(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}}function n(){o&&e.trackTimingStop(f.exitBeforeStoreOpened,{eNameStart:f.handlePostActionClick})}var o;return{openStoreUrl:h,removeIframeFromDomById:m,closeClicked:n}}])}(),function(){var a=angular.module("ssaBackButton",[]);a.constant("BACK_BUTTON_STATES",{defaultBehavior:"default",adunitResponsibility:"adunitResponsibility"}),a.constant("BACK_BUTTON_EVENTS",{backButtonPressedFromSDKController:"AdController.backButtonPressed",setBackButtonState:"setBackButtonState",notifySDKControllerToClose:"closeAdunit",backButtonPressedEvent:"backButtonPressed"}),a.factory("BackButtonService",["$rootScope","adapter","BACK_BUTTON_EVENTS","BACK_BUTTON_STATES","X_BUTTON_ACTIONS",function(a,b,c,d,e){function f(a){var b;return b=a===e.hide||a===e.buttonHidden?d.adunitResponsibility:j()}function g(a,d){m=a,n=d||angular.noop,b.call({method:c.setBackButtonState,arguments:{state:m}})}function h(a){g(d.adunitResponsibility,a)}function i(){b.call({method:c.notifySDKControllerToClose,arguments:{}})}function j(){return d.defaultBehavior}function k(){return m}function l(){return n}var m=d.defaultBehavior,n=angular.noop;return a.$on(c.backButtonPressedFromSDKController,function(){n()}),{setStateAndAction:g,setAdunitResponsibilityAndAction:h,notifySDKControllerToCloseAdunit:i,getState:k,getHandler:l,getDefaultBackAction:j,getBackActionForFirstFrame:f}}])}(),function(){var a=angular.module("AdUnit");a.factory("storeKitService",["$rootScope","adapter","analytics","productSettingsService","nativeEndCardService","STORE_KIT_EVENTS","STORE_KIT_ERROR_REASONS",function(a,b,c,d,e,f,g){function h(a){return d.isStoreKitSupported()&&a.shouldPreloadAppInstallPage()}function i(c){if(h(c)){var d=c.getViewUniqueId(),f=c.getViewIdentifier();p=c;var g=a.$on("AdController.appStoreInsideVisible",function(b,c){c&&"object"==typeof c&&c.viewUniqueId&&(c.viewUniqueId===f||c.viewUniqueId===d)&&(g(),s=!0,a.$broadcast("StoreKitService.StoreKitOpened",{storeKitOpen:l()}))}),j=a.$on("AdController.appStoreInsideClosed",function(b,g){g&&"object"==typeof g&&g.viewUniqueId&&(g.viewUniqueId===f||g.viewUniqueId===d)&&(j(),s=!1,e.isFlowActive()?e.onClose():(a.$broadcast("StoreKitService.StoreKitClosed",{storeKitOpen:l()}),q=!1,i(c)))});r=!0,b.call({method:"PreloadAppInstallPage",arguments:{appId:c.getPostActionAppID(),viewUniqueId:d,viewIdentifier:f},callback:function(a){a&&a.viewUniqueId&&(a.viewUniqueId===f||a.viewUniqueId===d)&&(q=!0,r=!1)}})}}function j(a,c){(q||c)&&(q=!1,b.call({method:"ClearAppPage",arguments:{viewUniqueId:a.getViewUniqueId(),viewIdentifier:a.getViewIdentifier()}}))}function k(){return q}function l(){return s}function m(a){return e.isSupported(a)}function n(a){return!!e.isSupported(a)&&(!!k()||(c.trackEvent(f.nativeEndCardFail,null,{callFailReason:g.notLoaded}),!1))}function o(a){e.handleFlow(a)}var p,q=!1,r=!1,s=!1,t=a.$on("AdController.enterForeground",function(a,b){"active=true"===b&&!q&&r&&p&&(r=!1,j(p,!0),t())});return{isSupported:h,preloadAppInstallPage:i,clearStoreKit:j,isStoreKitLoaded:k,isStoreKitVisible:l,isNativeEndCardSupported:m,isReadyToDisplay:n,handleFlow:o}}])}(),function(){angular.module("AdUnit").factory("urlWarmUpService",["$window","$rootScope","SSA_Utils","WARMUP_STRATEGY","HTML_TAG_WARMUP_ATTRIBUTE","FIRE_PIXEL_STRATEGIES",function(a,b,c,d,e,f){function g(a){a&&c.addHandlerToAdVisible(function(){angular.forEach(a,function(a,b){var c=new RegExp("^(http|https)://","i");if(c.test(a)){var e=a.split("?")[0];e&&h(e,d.FIRE_PIXEL)}})})}function h(a,c){if(c===d.HTML_TAG){var g=document.createElement("link");g.rel=e.preconnect,g.href=a,document.head.appendChild(g)}else{var h={url:a,type:f.pixel};b.$broadcast("PixelDirective.FirePixel",h)}}return{startWarmupUrls:g}}])}(),function(){angular.module("AdUnit").factory("visibilityService",["$rootScope","SSA_Utils","OPEN_URL_STRATEGIES","LogService",function(a,b,c,d){function e(){l=a.$on("AdController.adVisible",h),a.$on("AdController.viewableChange",f)}function f(a,b){if(!b)return void d.log("visibilityService | AdController.viewableChange | no message object was found",d.logLevel.trace);if(b.webview===c.secondary)return void d.log("visibilityService | AdController.viewableChange | ignoring viewableChange event for secondary webview",d.logLevel.trace);m=b.isViewable===!0||"true"===b.isViewable;var e={isVisible:m};b.changeReason&&(e.changeReason=b.changeReason),g(e)}function g(b){a.$broadcast("visibilityService.onVisibilityChanged",b)}function h(a,b){n=!0,m=!0,l();for(var c=0;c<o.length;c++)o[0](a,b),o.splice(0,1)}function i(a){o.push(a)}function j(a){n?a():i(a)}function k(a){angular.isFunction(a)&&j(a)}var l,m=!1,n=!1,o=[];return{isAdCurrentlyVisible:m,isAdDisplayed:n,callOnVisible:k,initListeners:e}}])}();